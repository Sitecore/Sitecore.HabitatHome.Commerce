---
ID: "936b4e67-7d95-44f5-9a00-d1abe715abf9"
Parent: "28d0286e-5ee1-4be0-9aee-41d76fa2f651"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat SXA Sites/Habitat Home Store/scripts/components/Cart/habitathome-feature-cart-deliverycart-model"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/936B4E677D9544F59A00D1ABE715ABF9.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "b80865c2-db28-4bfa-861f-040884f3ad32"
  Value: 77u/Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIENvcHlyaWdodCAyMDE2IFNpdGVjb3JlIENvcnBvcmF0aW9uIEEvUw0KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUNCi8vIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KLy8gICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQovLw0KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUNCi8vIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsDQovLyBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMNCi8vIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gTGluZUl0ZW1TaGlwcGluZ01ldGhvZChpZCwgZGVzY3JpcHRpb24pIHsNCiAgdmFyIHNlbGYgPSB0aGlzOw0KDQogIHNlbGYuaWQgPSBpZDsNCiAgc2VsZi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOw0KfQ0KDQpmdW5jdGlvbiBTaGlwbWVudERhdGEoZGF0YSkgew0KICB2YXIgc2VsZiA9IHRoaXM7DQoNCiAgc2VsZi5wYXJ0eUlkID0gZGF0YS5QYXJ0eUlEOw0KICBzZWxmLmxpbmVJZHMgPSBkYXRhLkxpbmVJRHM7DQogIHNlbGYuc2hpcHBpbmdNZXRob2RJZCA9IGRhdGEuU2hpcHBpbmdNZXRob2RJZDsNCiAgc2VsZi5zaGlwcGluZ01ldGhvZE5hbWUgPSBkYXRhLlNoaXBwaW5nTWV0aG9kTmFtZTsNCn0NCg0KLy8gSGFiaXRhdEhvbWUgY3VzdG9taXphdGlvbg0KZnVuY3Rpb24gRGVsaXZlcnlDYXJ0TGluZUl0ZW1EYXRhKGNhcnREYXRhLCBsaW5lLCBjYXJ0KSB7DQovLyBlbmQgSGFiaXRhdEhvbWUgY3VzdG9taXphdGlvbg0KICB2YXIgc2VsZiA9IHRoaXM7DQoNCiAgc2VsZi5jYXJ0ID0gY2FydDsNCiAgLy8gbGluZXMgLy8NCiAgc2VsZi5pbWFnZSA9IGxpbmUuSW1hZ2U7DQogIHNlbGYuZGlzcGxheU5hbWUgPSBsaW5lLkRpc3BsYXlOYW1lOw0KICBzZWxmLnN1YmxpbmVzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogIGlmIChsaW5lICYmIGxpbmUuU3ViTGluZXMpIHsNCiAgICAkKGxpbmUuU3ViTGluZXMpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGxpbmVJdGVtID0gbmV3IExpbmVJdGVtRGF0YShjYXJ0RGF0YSwgdGhpcywgbnVsbCk7DQogICAgICBzZWxmLnN1YmxpbmVzLnB1c2gobGluZUl0ZW0pOw0KICAgIH0pOw0KICB9DQoNCiAgc2VsZi5jb2xvckluZm9ybWF0aW9uID0gbGluZS5Db2xvckluZm9ybWF0aW9uOw0KICBzZWxmLnNpemVJbmZvcm1hdGlvbiA9IGxpbmUuU2l6ZUluZm9ybWF0aW9uOw0KICBzZWxmLnN0eWxlSW5mb3JtYXRpb24gPSBsaW5lLlN0eWxlSW5mb3JtYXRpb247DQogIHNlbGYuZ2lmdENhcmRBbW91bnRJbmZvcm1hdGlvbiA9IGxpbmUuR2lmdENhcmRBbW91bnRJbmZvcm1hdGlvbjsNCiAgc2VsZi5wcm9wZXJ0aWVzID0gW107DQogIHZhciBwcm9wcyA9IGxpbmUuUHJvcGVydGllcyB8fCB7fTsNCiAgT2JqZWN0LmtleXMocHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgpIHsNCiAgICBpZiAocHJvcHNba2V5XSkgew0KICAgICAgc2VsZi5wcm9wZXJ0aWVzLnB1c2goew0KICAgICAgICBsYWJlbDoga2V5LA0KICAgICAgICB2YWx1ZTogcHJvcHNba2V5XQ0KICAgICAgfSk7DQogICAgfQ0KICB9KTsNCg0KICBzZWxmLmxpbmVJdGVtRGlzY291bnQgPSBsaW5lLkxpbmVEaXNjb3VudDsNCiAgc2VsZi5xdWFudGl0eSA9IGxpbmUuUXVhbnRpdHk7DQogIHNlbGYubGluZVByaWNlID0gbGluZS5MaW5lUHJpY2U7DQogIHNlbGYubGluZVRvdGFsID0gbGluZS5MaW5lVG90YWw7DQogIHNlbGYuZXh0ZXJuYWxDYXJ0TGluZUlkID0gbGluZS5FeHRlcm5hbENhcnRMaW5lSWQ7DQogIHNlbGYucHJvZHVjdFVybCA9IGxpbmUuUHJvZHVjdFVybDsNCiAgc2VsZi5kaXNjb3VudE9mZmVyTmFtZXMgPSBsaW5lLkRpc2NvdW50T2ZmZXJOYW1lczsNCiAgc2VsZi5zaGlwcGluZ01ldGhvZE5hbWUgPSBsaW5lLlNoaXBwaW5nTWV0aG9kTmFtZTsNCiAgc2VsZi5hZGRyZXNzID0gbGluZS5BZGRyZXNzOw0KICBzZWxmLnNob3VsZFNob3dTYXZpbmdzID0ga28ub2JzZXJ2YWJsZShzZWxmLmxpbmVJdGVtRGlzY291bnQgIT09ICIkMC4wMCIpOw0KICBzZWxmLnNob3VsZFNob3dEaXNjb3VudE9mZmVycyA9IGtvLm9ic2VydmFibGUoc2VsZi5kaXNjb3VudE9mZmVyTmFtZXMubGVuZ3RoID4gMCk7DQoNCiAgLy8gc2hpcHBpbmcgLy8NCiAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0ga28ub2JzZXJ2YWJsZSgnMCcpOw0KDQogIHNlbGYuaXNMaW5lU2hpcEFsbCA9IGtvLm9ic2VydmFibGUoY2FydERhdGEgJiYgY2FydERhdGEuU2hpcG1lbnRzICYmIGNhcnREYXRhLlNoaXBtZW50cy5sZW5ndGggPiAxKTsNCiAgc2VsZi5pc0xpbmVTaGlwVG9FbWFpbCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KDQogIC8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCiAgLy9JcyBMaW5lIFBpY2t1cCBhbmQgcGlja3VwIHN0b3Jlcw0KICBzZWxmLmlzTGluZVBpY2tVcCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICBzZWxmLmxpbmVQaWNrVXBTdG9yZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgLy8gZW5kIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCg0KICBzZWxmLnNob3dTaGlwT3B0aW9uQ29udGVudCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb25OYW1lID0ga28ub2JzZXJ2YWJsZSgkKCcjU2VsZWN0RGVsaXZlcnlGaXJzdE1lc3NhZ2UnKS52YWwoKSk7DQogIHNlbGYudG9nZ2xlU2hpcENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7DQogICAgc2VsZi5zaG93U2hpcE9wdGlvbkNvbnRlbnQoIXNlbGYuc2hvd1NoaXBPcHRpb25Db250ZW50KCkpOw0KICB9Ow0KDQogIHNlbGYuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5zdWJzY3JpYmUoZnVuY3Rpb24gKG9wdGlvbikgew0KICAgIHNlbGYuaXNMaW5lU2hpcEFsbChvcHRpb24gPT09IDEpOw0KICAgIHNlbGYuaXNMaW5lU2hpcFRvRW1haWwob3B0aW9uID09PSAzKTsNCg0KICAgIC8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCiAgICAvL3NldCBpcyBwaWNrdXAgZm9yIGVhY2gNCiAgICBzZWxmLmlzTGluZVBpY2tVcChvcHRpb24gPT09IDIpOw0KICAgIC8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCg0KICAgIHNlbGYuc2hvd1NoaXBPcHRpb25Db250ZW50KG9wdGlvbiAhPT0gMCk7DQoNCiAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuc2hpcHBpbmdPcHRpb25zKCksIGZ1bmN0aW9uIChvKSB7DQogICAgICByZXR1cm4gby5TaGlwcGluZ09wdGlvblR5cGUuVmFsdWUgPT09IG9wdGlvbjsNCiAgICB9KTsNCg0KICAgIGlmIChtYXRjaCkgew0KICAgICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uTmFtZShtYXRjaC5OYW1lKTsNCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQoNCiAgc2VsZi5zaGlwcGluZ01ldGhvZHMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgc2VsZi5zaGlwcGluZ01ldGhvZCA9IGtvLnZhbGlkYXRlZE9ic2VydmFibGUoKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSB9KTsNCiAgc2VsZi5zZWxlY3RTaGlwcGluZ01ldGhvZCA9IGZ1bmN0aW9uIChzaGlwcGluZ01ldGhvZCkgew0KICAgIGlmIChzaGlwcGluZ01ldGhvZHNBcnJheS5pbmRleE9mKHNlbGYuZXh0ZXJuYWxDYXJ0TGluZUlkKSA9PT0gLTEpIHsNCiAgICAgIHNoaXBwaW5nTWV0aG9kc0FycmF5LnB1c2goc2VsZi5leHRlcm5hbENhcnRMaW5lSWQpOw0KICAgIH0NCiAgfTsNCg0KICBzZWxmLnNoaXBwaW5nQWRkcmVzcyA9IGtvLnZhbGlkYXRlZE9ic2VydmFibGUobmV3IEFkZHJlc3NWaWV3TW9kZWwoeyAiRXh0ZXJuYWxJZCI6IHNlbGYuZXh0ZXJuYWxDYXJ0TGluZUlkIH0pKTsNCiAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nQWRkcmVzcyA9IGtvLm9ic2VydmFibGUoIlVzZU90aGVyIik7DQogIHNlbGYuc2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3Muc3Vic2NyaWJlKGZ1bmN0aW9uIChpZCkgew0KICAgIHZhciBtYXRjaCA9IGtvLnV0aWxzLmFycmF5Rmlyc3Qoc2VsZi5jYXJ0LnVzZXJBZGRyZXNzZXMoKSwgZnVuY3Rpb24gKGEpIHsNCiAgICAgIGlmIChhLmV4dGVybmFsSWQoKSA9PT0gaWQgJiYgaWQgIT09ICJVc2VPdGhlciIpIHsNCiAgICAgICAgcmV0dXJuIGE7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0pOw0KDQogICAgc2VsZi5zaGlwcGluZ01ldGhvZCgiIik7DQogICAgc2VsZi5zaGlwcGluZ01ldGhvZHMucmVtb3ZlQWxsKCk7DQogICAgaWYgKG1hdGNoKSB7DQogICAgICB2YXIgbmV3QWRkcmVzcyA9IG1hdGNoLmNsb25lKCk7DQogICAgICB2YXIgbmV3SWQgPSBzZWxmLmNhcnQuZ2V0VW5pcXVlQWRkcmVzc0lkKCkudG9TdHJpbmcoKTsNCiAgICAgIG5ld0FkZHJlc3MuZXh0ZXJuYWxJZChuZXdJZCk7DQogICAgICBuZXdBZGRyZXNzLnBhcnR5SWQobmV3SWQpOw0KICAgICAgc2VsZi5zaGlwcGluZ0FkZHJlc3MobmV3QWRkcmVzcyk7DQogICAgfSBlbHNlIHsNCiAgICAgIHNlbGYuc2hpcHBpbmdBZGRyZXNzKG5ldyBBZGRyZXNzVmlld01vZGVsKHsgIkV4dGVybmFsSWQiOiBzZWxmLmV4dGVybmFsQ2FydExpbmVJZCB9KSk7DQogICAgfQ0KICB9LmJpbmQodGhpcykpOw0KICBzZWxmLnNoaXBwaW5nQWRkcmVzc0ZpZWxkQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgaW5kZXggPSBzaGlwcGluZ01ldGhvZHNBcnJheS5pbmRleE9mKHNlbGYuZXh0ZXJuYWxDYXJ0TGluZUlkKTsNCiAgICBpZiAoaW5kZXggIT09IC0xKSB7DQogICAgICBzaGlwcGluZ01ldGhvZHNBcnJheS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIH0NCiAgICBzZWxmLnNoaXBwaW5nTWV0aG9kKCIiKTsNCiAgICBzZWxmLnNoaXBwaW5nTWV0aG9kcy5yZW1vdmVBbGwoKTsNCiAgfTsNCg0KICBzZWxmLnNoaXBwaW5nRW1haWwgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCIiKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSwgZW1haWw6IHRydWUgfSk7DQogIHNlbGYuc2hpcHBpbmdFbWFpbC5zdWJzY3JpYmUoZnVuY3Rpb24gKGVtYWlsKSB7DQogICAgdmFyIGluZGV4ID0gc2hpcHBpbmdNZXRob2RzQXJyYXkuaW5kZXhPZihzZWxmLmV4dGVybmFsQ2FydExpbmVJZCk7DQogICAgaWYgKGVtYWlsLnRyaW0oKS5sZW5ndGggPiAwICYmIGluZGV4ID09PSAtMSkgew0KICAgICAgc2hpcHBpbmdNZXRob2RzQXJyYXkucHVzaChzZWxmLmV4dGVybmFsQ2FydExpbmVJZCk7DQogICAgfSBlbHNlIGlmIChlbWFpbC50cmltKCkubGVuZ3RoID09PSAwICYmIGluZGV4ICE9PSAtMSkgew0KICAgICAgc2hpcHBpbmdNZXRob2RzQXJyYXkuc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQogIHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQgPSBrby5vYnNlcnZhYmxlKCIiKTsNCg0KICBzZWxmLnNoaXBwaW5nT3B0aW9ucyA9IGtvLm9ic2VydmFibGVBcnJheSgpOw0KICBpZiAobGluZS5TaGlwcGluZ09wdGlvbnMpIHsNCiAgICAkKGxpbmUuU2hpcHBpbmdPcHRpb25zKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgIHNlbGYuc2hpcHBpbmdPcHRpb25zLnB1c2godGhpcyk7DQogICAgfSk7DQoNCiAgICAvLyBIYW5kbGUgZWRpdCBtb2RlLg0KICAgIGlmIChsaW5lLlNoaXBwaW5nT3B0aW9ucyAmJiBsaW5lLlNoaXBwaW5nT3B0aW9ucy5sZW5ndGggPiAwKSB7DQogICAgICB2YXIgc2hpcHBpbmdPcHRpb24gPSBsaW5lLlNoaXBwaW5nT3B0aW9uc1swXTsNCiAgICAgIGlmIChzaGlwcGluZ09wdGlvbiAmJiBzaGlwcGluZ09wdGlvbi5TaGlwcGluZ09wdGlvblR5cGUpIHsNCiAgICAgICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLlNoaXBwaW5nT3B0aW9uVHlwZS5WYWx1ZSk7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgc2VsZi5oYW5kbGVFZGl0TW9kZSA9IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgaWYgKGRhdGEgJiYgZGF0YS5DYXJ0ICYmIGRhdGEuQ2FydC5TaGlwbWVudHMgJiYgZGF0YS5DYXJ0LlNoaXBtZW50cy5sZW5ndGggPiAwKSB7DQogICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0gc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKCk7DQoNCiAgICAgICQoZGF0YS5DYXJ0LlNoaXBtZW50cykuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBzaGlwbWVudCA9IHRoaXM7DQogICAgICAgIGlmIChzaGlwbWVudC5MaW5lSURzKSB7DQogICAgICAgICAgZm91bmRMaW5lSWQgPSBrby51dGlscy5hcnJheUZpcnN0KHNoaXBtZW50LkxpbmVJRHMsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICBpZiAoYSA9PT0gc2VsZi5leHRlcm5hbENhcnRMaW5lSWQpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgaWYgKGZvdW5kTGluZUlkKSB7DQogICAgICAgICAgICAvLyBTaGlwVG9BZGRyZXNzDQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PT0gIjEiICYmIHNoaXBtZW50LlNoaXBtZW50RWRpdE1vZGVsKSB7DQogICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2RzLnJlbW92ZUFsbCgpOw0KICAgICAgICAgICAgICAkLmVhY2goc2hpcG1lbnQuU2hpcG1lbnRFZGl0TW9kZWwuU2hpcHBpbmdNZXRob2RzLCBmdW5jdGlvbiAoaSwgdikgew0KICAgICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2RzLnB1c2gobmV3IG1ldGhvZCh2LkRlc2NyaXB0aW9uLCB2LkV4dGVybmFsSWQsIHYuTmFtZSkpOw0KICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICB2YXIgc20gPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuc2hpcHBpbmdNZXRob2RzKCksIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgaWYgKGEuZGVzY3JpcHRpb24gPT09IHNoaXBtZW50LlNoaXBwaW5nTWV0aG9kTmFtZSkgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgIGlmIChzbSkgew0KICAgICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2Qoc20pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEVtYWlsDQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PT0gJzMnKSB7DQogICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdFbWFpbChzaGlwbWVudC5FbWFpbCk7DQogICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQoc2hpcG1lbnQuRW1haWxDb250ZW50KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KDQogICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PT0gIjEiKSB7DQogICAgICAgIHNlbGYuaXNMaW5lU2hpcEFsbCh0cnVlKTsNCiAgICAgICAgc2VsZi5pc0xpbmVTaGlwVG9FbWFpbChmYWxzZSk7DQogICAgICAgIC8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCiAgICAgICAgc2VsZi5pc0xpbmVQaWNrVXAoZmFsc2UpOw0KICAgICAgICAvLyBlbmQgSGFiaXRhdEhvbWUgY3VzdG9taXphdGlvbg0KICAgICAgfQ0KDQogICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PT0gJzMnKSB7DQogICAgICAgIHNlbGYuaXNMaW5lU2hpcFRvRW1haWwodHJ1ZSk7DQogICAgICAgIHNlbGYuaXNMaW5lU2hpcEFsbChmYWxzZSk7DQogICAgICAgIC8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCiAgICAgICAgc2VsZi5pc0xpbmVQaWNrVXAoZmFsc2UpOw0KICAgICAgICAvLyBlbmQgSGFiaXRhdEhvbWUgY3VzdG9taXphdGlvbg0KICAgICAgfQ0KDQogICAgICAvLyBIYWJpdGF0SG9tZSBjdXN0b21pemF0aW9uDQogICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PSAiMiIpIHsNCiAgICAgICAgc2VsZi5pc0xpbmVTaGlwQWxsKGZhbHNlKTsNCiAgICAgICAgc2VsZi5pc0xpbmVTaGlwVG9FbWFpbChmYWxzZSk7DQogICAgICAgIHNlbGYuaXNMaW5lUGlja1VwKHRydWUpOw0KICAgICAgfQ0KICAgICAgLy8gZW5kIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCg0KICAgICAgc2VsZi5zaG93U2hpcE9wdGlvbkNvbnRlbnQodHJ1ZSk7DQogICAgfQ0KICB9DQp9DQoNCi8vIEhhYml0YXRIb21lIGN1c3RvbWl6YXRpb24NCmZ1bmN0aW9uIERlbGl2ZXJ5Q2FydFZpZXdNb2RlbChkYXRhLCB1c2VyQWRkcmVzc2VzKSB7DQovLyBlbmQgSGFiaXRhdEhvbWUgY3VzdG9taXphdGlvbg0KICB2YXIgc2VsZiA9IHRoaXM7DQoNCiAgc2VsZi5jYXJ0TGluZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgc2VsZi51c2VyQWRkcmVzc2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogIGlmICh1c2VyQWRkcmVzc2VzKSB7DQogICAgc2VsZi51c2VyQWRkcmVzc2VzKHVzZXJBZGRyZXNzZXMpOw0KICB9DQoNCiAgc2VsZi5nZXRVbmlxdWVBZGRyZXNzSWQgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIG5ld0lkID0gMTA7DQogICAgZm9yIChsZXQgaSA9IDEwOyBpIDwgMTAwMDsgaSsrKSB7DQogICAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuY2FydExpbmVzKCksIGZ1bmN0aW9uIChhKSB7DQogICAgICAgIGlmIChhLnNoaXBwaW5nQWRkcmVzcygpICYmIGEuc2hpcHBpbmdBZGRyZXNzKCkuZXh0ZXJuYWxJZCgpID09PSBpLnRvU3RyaW5nKCkpIHsNCiAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfSk7DQoNCiAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCkgew0KICAgICAgICBuZXdJZCA9IGk7DQogICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBuZXdJZDsNCiAgfTsNCg0KICAvLyBleGlzdGluZyBwcm9tbyBjb2Rlcw0KICBzZWxmLnByb21vQ29kZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgaWYgKGRhdGEgJiYgZGF0YS5Qcm9tb0NvZGVzKSB7DQogICAgJChkYXRhLlByb21vQ29kZXMpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgc2VsZi5wcm9tb0NvZGVzLnB1c2godGhpcyk7DQogICAgfSk7DQogIH0NCg0KICAvLyBwcm9tbyBjb2RlIGlucHV0DQogIHNlbGYucHJvbW9Db2RlID0ga28ub2JzZXJ2YWJsZSgpOw0KICBzZWxmLmhhc1Byb21vQ29kZSA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gc2VsZi5wcm9tb0NvZGUoKTsNCiAgfSk7DQoNCiAgc2VsZi5zdWJUb3RhbCA9IGtvLm9ic2VydmFibGUoZGF0YSA/IGRhdGEuU3VidG90YWwgOiAwKTsNCiAgc2VsZi50YXhUb3RhbCA9IGtvLm9ic2VydmFibGUoZGF0YSA/IGRhdGEuVGF4VG90YWwgOiAwKTsNCiAgc2VsZi50b3RhbCA9IGtvLm9ic2VydmFibGUoZGF0YSA/IGRhdGEuVG90YWwgOiAwKTsNCiAgc2VsZi50b3RhbEFtb3VudCA9IGtvLm9ic2VydmFibGUoZGF0YSA/IGRhdGEuVG90YWxBbW91bnQgOiAwKTsNCiAgc2VsZi5kaXNjb3VudCA9IGtvLm9ic2VydmFibGUoZGF0YSA/IGRhdGEuRGlzY291bnQgOiAwKTsNCiAgc2VsZi5zaGlwcGluZ1RvdGFsID0ga28ub2JzZXJ2YWJsZShkYXRhID8gZGF0YS5TaGlwcGluZ1RvdGFsIDogMCk7DQogIHNlbGYuaXNMaW5lU2hpcEFsbCA9IGRhdGEgJiYgZGF0YS5TaGlwbWVudHMgJiYgZGF0YS5TaGlwbWVudHMubGVuZ3RoID4gMTsNCg0KICBzZWxmLnNoaXBtZW50cyA9IFtdOw0KICBpZiAoZGF0YSAmJiBkYXRhLlNoaXBtZW50cykgew0KICAgICQoZGF0YS5TaGlwbWVudHMpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgc2VsZi5zaGlwbWVudHMucHVzaChuZXcgU2hpcG1lbnREYXRhKHRoaXMpKTsNCiAgICB9KTsNCiAgfQ0KDQogIHNlbGYucGFydGllcyA9IFtdOw0KICBpZiAoZGF0YSAmJiBkYXRhLlBhcnRpZXMpIHsNCiAgICAkKGRhdGEuUGFydGllcykuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICBzZWxmLnBhcnRpZXMucHVzaChuZXcgQWRkcmVzc1ZpZXdNb2RlbCh0aGlzKSk7DQogICAgfSk7DQogIH0NCg0KICBpZiAoZGF0YSAmJiBkYXRhLkxpbmVzKSB7DQogICAgJChkYXRhLkxpbmVzKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBsaW5lSXRlbSA9IG5ldyBEZWxpdmVyeUNhcnRMaW5lSXRlbURhdGEoZGF0YSwgdGhpcywgc2VsZik7DQoNCiAgICAgIGlmIChzZWxmLmlzTGluZVNoaXBBbGwpIHsNCiAgICAgICAgdmFyIHNoaXBtZW50ID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLnNoaXBtZW50cywgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICBpZiAoYS5saW5lSWRzICYmIGEubGluZUlkcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICB2YXIgZm91bmQgPSBrby51dGlscy5hcnJheUZpcnN0KGEubGluZUlkcywgZnVuY3Rpb24gKGwpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGwgPT09IGxpbmVJdGVtLmV4dGVybmFsQ2FydExpbmVJZCA/IGwgOiBudWxsOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChmb3VuZCkgew0KICAgICAgICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmIChzaGlwbWVudCkgew0KICAgICAgICAgIGxpbmVJdGVtLnNoaXBwaW5nTWV0aG9kKG5ldyBMaW5lSXRlbVNoaXBwaW5nTWV0aG9kKHNoaXBtZW50LnNoaXBwaW5nTWV0aG9kSWQsIHNoaXBtZW50LnNoaXBwaW5nTWV0aG9kTmFtZSkpOw0KDQogICAgICAgICAgdmFyIHBhcnR5ID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLnBhcnRpZXMsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICBpZiAoYS5leHRlcm5hbElkKCkgPT09IHNoaXBtZW50LnBhcnR5SWQpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgaWYgKHBhcnR5KSB7DQogICAgICAgICAgICBsaW5lSXRlbS5zaGlwcGluZ0FkZHJlc3MocGFydHkpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBzZWxmLmNhcnRMaW5lcy5wdXNoKGxpbmVJdGVtKTsNCiAgICB9KTsNCiAgfQ0KfQ==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 11650
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T183739Z
- Language: "fr-CA"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T183739Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: "ja-JP"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T183739Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
