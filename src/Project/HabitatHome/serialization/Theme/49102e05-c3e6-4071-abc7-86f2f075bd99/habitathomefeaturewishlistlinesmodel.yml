---
ID: "f8e5be07-bf5a-4df5-a3da-e1143e4c8729"
Parent: "49102e05-c3e6-4071-abc7-86f2f075bd99"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Themes/Habitat Sites/Habitat Home Store/scripts/components/Wishlists/habitathomefeaturewishlistlinesmodel
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/F8E5BE07BF5A4DF5A3DAE1143E4C8729.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "a1b680ad-08f8-462f-a739-8c172b5e6976"
  Value: 77u/Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gQ29weXJpZ2h0IDIwMTYgU2l0ZWNvcmUgQ29ycG9yYXRpb24gQS9TDQovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSANCi8vIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KLy8gICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQovLw0KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgDQovLyBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCANCi8vIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyANCi8vIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gV2lzaExpc3RMaW5lc1ZpZXdNb2RlbChkYXRhKSB7DQogICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgIHNlbGYud2lzaExpc3QgPSBrby5vYnNlcnZhYmxlKG5ldyBXaXNoTGlzdFZpZXdNb2RlbChkYXRhKSk7DQogICAgc2VsZi51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgIHNlbGYud2lzaExpc3QobmV3IFdpc2hMaXN0Vmlld01vZGVsKGRhdGEpKTsNCg0KICAgIH07DQogICAgc2VsZi5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGV2ZW50KSB7DQogICAgICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuZmluZCgiLmdseXBoaWNvbiIpLnJlbW92ZUNsYXNzKCJnbHlwaGljb24tcmVtb3ZlLWNpcmNsZSIpOw0KICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmZpbmQoIi5nbHlwaGljb24iKS5hZGRDbGFzcygiZ2x5cGhpY29uLXJlZnJlc2giKTsNCiAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5maW5kKCIuZ2x5cGhpY29uIikuYWRkQ2xhc3MoImdseXBoaWNvbi1yZWZyZXNoLWFuaW1hdGUiKTsNCiAgICAgICAgdmFyIGxpbmVJdGVtSWQgPSBpdGVtLmV4dGVybmFsV2lzaExpc3RMaW5lSWQ7ICAgICAgICANCiAgICAgICAgdmFyIGxpbmVJZHMgPSBbXTsNCiAgICAgICAgbGluZUlkcy5wdXNoKGxpbmVJdGVtSWQpOw0KICAgICAgICB2YXIgc2VuZGVyID0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgQWpheFNlcnZpY2UuUG9zdCgiL2FwaS9jeGEvd2lzaGxpc3RsaW5lcy9SZW1vdmVXaXNoTGlzdExpbmVzIiwgeyBsaW5lSWRzOiBsaW5lSWRzIH0sIGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBzZW5kZXIpIHsNCiAgICAgICAgICAgIGlmIChzdWNjZXNzICYmIGRhdGEuU3VjY2Vzcykgew0KICAgICAgICAgICAgICAgIENhcnRDb250ZXh0LlRyaWdnZXJDYXJ0VXBkYXRlRXZlbnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBzZWxmLmFkZEl0ZW1Ub0NhcnQgPSBmdW5jdGlvbiAoaXRlbSwgZXZlbnQpIHsNCiAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5maW5kKCIuZmEiKS5hZGRDbGFzcygiZmEtc3Bpbm5lciIpOw0KICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmZpbmQoIi5mYSIpLmFkZENsYXNzKCJmYS1zcGluIik7DQogICANCiAgICAgICAgdmFyIHNlbmRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7DQogICAgICAgIEFqYXhTZXJ2aWNlLlBvc3QoIi9hcGkvY3hhL3dpc2hsaXN0bGluZXMvQWRkV2lzaExpc3RMaW5lVG9DYXJ0IiwgeyBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdElkLCB2YXJpYW50SWQ6IGl0ZW0udmFyaWFudElkLCBxdWFudGl0eTogaXRlbS5xdWFudGl0eSB9LCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICBpZiAoc3VjY2VzcyAmJiBkYXRhLlN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICBDYXJ0Q29udGV4dC5UcmlnZ2VyQ2FydFVwZGF0ZUV2ZW50KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH07DQogICAgc2VsZi5pbmNyZWFzZVF1YW50aXR5ID0gZnVuY3Rpb24gKGl0ZW0pIHsNCiAgICAgICAgaXRlbS5xdWFudGl0eSA9IE51bWJlcihpdGVtLnF1YW50aXR5KSArIDE7DQogICAgICAgIHNlbGYudXBkYXRlUXVhbnRpdHkoaXRlbSk7DQogICAgfQ0KICAgIHNlbGYuZGVjcmVhc2VRdWFudGl0eSA9IGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgIGl0ZW0ucXVhbnRpdHkgPSBOdW1iZXIoaXRlbS5xdWFudGl0eSkgLSAxOw0KICAgICAgICBzZWxmLnVwZGF0ZVF1YW50aXR5KGl0ZW0pOw0KICAgIH0NCg0KICAgIHNlbGYucXVudGl0eVVwZGF0aW5nID0ga28ub2JzZXJ2YWJsZShmYWxzZSB8fCAoQ1hBQXBwbGljYXRpb24uUnVubmluZ01vZGUgPT09IFJ1bm5pbmdNb2Rlcy5FeHBlcmllbmNlRWRpdG9yKSk7DQoNCg0KICAgIHNlbGYudXBkYXRlUXVhbnRpdHkgPSBmdW5jdGlvbiAoaXRlbSkgew0KICAgICAgICBpZiAoQ1hBQXBwbGljYXRpb24uUnVubmluZ01vZGUgPT09IFJ1bm5pbmdNb2Rlcy5Ob3JtYWwpIHsNCiAgICAgICAgICAgIHNlbGYucXVudGl0eVVwZGF0aW5nKHRydWUpOw0KICAgICAgICAgICAgdmFyIG1vZGVsID0gc2VsZjsNCiAgICAgICAgICAgIEFqYXhTZXJ2aWNlLlBvc3QoIi9hcGkvY3hhL2NhcnQvVXBkYXRlQ2FydExpbmVRdWFudGl0eSIsIHsgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksIGxpbmVOdW1iZXI6IGl0ZW0uRXh0ZXJuYWxXaXNoTGlzdExpbmVJZCB9LCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VsZikgew0KICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzICYmIGRhdGEuU3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICBDYXJ0Q29udGV4dC5UcmlnZ2VyQ2FydFVwZGF0ZUV2ZW50KCk7DQogICAgICAgICAgICAgICAgICAgIG1vZGVsLnF1bnRpdHlVcGRhdGluZyhmYWxzZSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgfTsNCn0NCg0KDQpmdW5jdGlvbiBXaXNoTGlzdExpbmVJdGVtRGF0YShjYXJ0RGF0YSwgbGluZSwgY2FydCkgew0KICAgIHZhciBzZWxmID0gdGhpczsNCg0KICAgIHNlbGYuY2FydCA9IGNhcnQ7DQogICAgLy8gbGluZXMgLy8NCiAgICBzZWxmLmltYWdlID0gbGluZS5JbWFnZTsNCiAgICBzZWxmLmRpc3BsYXlOYW1lID0gbGluZS5EaXNwbGF5TmFtZTsNCg0KICAgIC8vIFRPRE86IFNjaGVtYSBzcGVjaWZpYw0KICAgIHNlbGYucHJvZHVjdElkID0gbGluZS5Qcm9kdWN0SWQuc3BsaXQoInwiKVswXTsNCiAgICBzZWxmLnZhcmlhbnRJZCA9IGxpbmUuUHJvZHVjdElkLnNwbGl0KCJ8IilbMV07DQogICAgc2VsZi5jb2xvckluZm9ybWF0aW9uID0gbGluZS5Db2xvckluZm9ybWF0aW9uOw0KICAgIHNlbGYuc2l6ZUluZm9ybWF0aW9uID0gbGluZS5TaXplSW5mb3JtYXRpb247DQogICAgc2VsZi5zdHlsZUluZm9ybWF0aW9uID0gbGluZS5TdHlsZUluZm9ybWF0aW9uOw0KICAgIHNlbGYuZ2lmdENhcmRBbW91bnRJbmZvcm1hdGlvbiA9IGxpbmUuR2lmdENhcmRBbW91bnRJbmZvcm1hdGlvbjsNCiAgICBzZWxmLmxpbmVJdGVtRGlzY291bnQgPSBsaW5lLkxpbmVEaXNjb3VudDsNCiAgICBzZWxmLnF1YW50aXR5ID0gbGluZS5RdWFudGl0eTsNCiAgICBzZWxmLmxpbmVQcmljZSA9IGxpbmUuTGluZVByaWNlOw0KICAgIHNlbGYubGluZVRvdGFsID0gbGluZS5MaW5lVG90YWw7DQogICAgc2VsZi5leHRlcm5hbFdpc2hMaXN0TGluZUlkID0gbGluZS5FeHRlcm5hbFdpc2hMaXN0TGluZUlkOw0KICAgIHNlbGYucHJvZHVjdFVybCA9IGxpbmUuUHJvZHVjdFVybDsNCiAgICAvL3NlbGYuZGlzY291bnRPZmZlck5hbWVzID0gbGluZS5EaXNjb3VudE9mZmVyTmFtZXM7DQogICAgc2VsZi5zaG91bGRTaG93U2F2aW5ncyA9IGtvLm9ic2VydmFibGUoc2VsZi5saW5lSXRlbURpc2NvdW50ICE9PSAiJDAuMDAiID8gdHJ1ZSA6IGZhbHNlKTsNCiAgICAvL3NlbGYuc2hvdWxkU2hvd0Rpc2NvdW50T2ZmZXJzID0ga28ub2JzZXJ2YWJsZShzZWxmLmRpc2NvdW50T2ZmZXJOYW1lcy5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlKTsNCg0KICAgIC8vIHNoaXBwaW5nIC8vDQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0ga28ub2JzZXJ2YWJsZSgnMCcpOw0KDQogICAgc2VsZi5pc0xpbmVTaGlwQWxsID0ga28ub2JzZXJ2YWJsZShjYXJ0RGF0YS5TaGlwbWVudHMgIT0gbnVsbCAmJiBjYXJ0RGF0YS5TaGlwbWVudHMubGVuZ3RoID4gMSk7DQogICAgc2VsZi5pc0xpbmVTaGlwVG9FbWFpbCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICAgIHNlbGYuc2hvd1NoaXBPcHRpb25Db250ZW50ID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7DQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uTmFtZSA9IGtvLm9ic2VydmFibGUoJCgnI1NlbGVjdERlbGl2ZXJ5Rmlyc3RNZXNzYWdlJykudmFsKCkpOw0KICAgIHNlbGYudG9nZ2xlU2hpcENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNlbGYuc2hvd1NoaXBPcHRpb25Db250ZW50KCFzZWxmLnNob3dTaGlwT3B0aW9uQ29udGVudCgpKTsNCiAgICB9Ow0KDQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLnN1YnNjcmliZShmdW5jdGlvbiAob3B0aW9uKSB7DQogICAgICAgIHNlbGYuaXNMaW5lU2hpcEFsbChvcHRpb24gPT09IDEpOw0KICAgICAgICBzZWxmLmlzTGluZVNoaXBUb0VtYWlsKG9wdGlvbiA9PT0gMyk7DQogICAgICAgIHNlbGYuc2hvd1NoaXBPcHRpb25Db250ZW50KG9wdGlvbiAhPT0gMCk7DQoNCiAgICAgICAgdmFyIG1hdGNoID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLnNoaXBwaW5nT3B0aW9ucygpLCBmdW5jdGlvbiAobykgew0KICAgICAgICAgICAgcmV0dXJuIG8uU2hpcHBpbmdPcHRpb25UeXBlLlZhbHVlID09PSBvcHRpb247DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmIChtYXRjaCAhPSBudWxsKSB7DQogICAgICAgICAgICBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb25OYW1lKG1hdGNoLk5hbWUpOw0KICAgICAgICB9DQogICAgfS5iaW5kKHRoaXMpKTsNCg0KICAgIHNlbGYuc2hpcHBpbmdNZXRob2RzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgc2VsZi5zaGlwcGluZ01ldGhvZCA9IGtvLnZhbGlkYXRlZE9ic2VydmFibGUoKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSB9KTsNCiAgICBzZWxmLnNlbGVjdFNoaXBwaW5nTWV0aG9kID0gZnVuY3Rpb24gKHNoaXBwaW5nTWV0aG9kKSB7DQogICAgICAgIGlmIChzaGlwcGluZ01ldGhvZHNBcnJheS5pbmRleE9mKHNlbGYuZXh0ZXJuYWxDYXJ0TGluZUlkKSA9PT0gLTEpIHsNCiAgICAgICAgICAgIHNoaXBwaW5nTWV0aG9kc0FycmF5LnB1c2goc2VsZi5leHRlcm5hbENhcnRMaW5lSWQpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbGYuc2hpcHBpbmdBZGRyZXNzID0ga28udmFsaWRhdGVkT2JzZXJ2YWJsZShuZXcgQWRkcmVzc1ZpZXdNb2RlbCh7ICJFeHRlcm5hbElkIjogc2VsZi5leHRlcm5hbENhcnRMaW5lSWQgfSkpOw0KICAgIHNlbGYuc2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3MgPSBrby5vYnNlcnZhYmxlKCJVc2VPdGhlciIpOw0KICAgIHNlbGYuc2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3Muc3Vic2NyaWJlKGZ1bmN0aW9uIChpZCkgew0KICAgICAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuY2FydC51c2VyQWRkcmVzc2VzKCksIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICBpZiAoYS5leHRlcm5hbElkKCkgPT09IGlkICYmIGlkICE9PSAiVXNlT3RoZXIiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9KTsNCg0KICAgICAgICBzZWxmLnNoaXBwaW5nTWV0aG9kKCIiKTsNCiAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZHMucmVtb3ZlQWxsKCk7DQogICAgICAgIGlmIChtYXRjaCAhPSBudWxsKSB7DQogICAgICAgICAgICB2YXIgbmV3QWRkcmVzcyA9IG1hdGNoLmNsb25lKCk7DQogICAgICAgICAgICB2YXIgbmV3SWQgPSBzZWxmLmNhcnQuZ2V0VW5pcXVlQWRkcmVzc0lkKCkudG9TdHJpbmcoKTsNCiAgICAgICAgICAgIG5ld0FkZHJlc3MuZXh0ZXJuYWxJZChuZXdJZCk7DQogICAgICAgICAgICBuZXdBZGRyZXNzLnBhcnR5SWQobmV3SWQpOw0KICAgICAgICAgICAgc2VsZi5zaGlwcGluZ0FkZHJlc3MobmV3QWRkcmVzcyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzZWxmLnNoaXBwaW5nQWRkcmVzcyhuZXcgQWRkcmVzc1ZpZXdNb2RlbCh7ICJFeHRlcm5hbElkIjogc2VsZi5leHRlcm5hbENhcnRMaW5lSWQgfSkpOw0KICAgICAgICB9DQogICAgfS5iaW5kKHRoaXMpKTsNCiAgICBzZWxmLnNoaXBwaW5nQWRkcmVzc0ZpZWxkQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIGluZGV4ID0gc2hpcHBpbmdNZXRob2RzQXJyYXkuaW5kZXhPZihzZWxmLmV4dGVybmFsQ2FydExpbmVJZCk7DQogICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICAgIHNoaXBwaW5nTWV0aG9kc0FycmF5LnNwbGljZShpbmRleCwgMSk7DQogICAgICAgIH0NCiAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZCgiIik7DQogICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2RzLnJlbW92ZUFsbCgpOw0KICAgIH07DQoNCiAgICBzZWxmLnNoaXBwaW5nRW1haWwgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCIiKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSwgZW1haWw6IHRydWUgfSk7DQogICAgc2VsZi5zaGlwcGluZ0VtYWlsLnN1YnNjcmliZShmdW5jdGlvbiAoZW1haWwpIHsNCiAgICAgICAgdmFyIGluZGV4ID0gc2hpcHBpbmdNZXRob2RzQXJyYXkuaW5kZXhPZihzZWxmLmV4dGVybmFsQ2FydExpbmVJZCk7DQogICAgICAgIGlmIChlbWFpbC50cmltKCkubGVuZ3RoID4gMCAmJiBpbmRleCA9PT0gLTEpIHsNCiAgICAgICAgICAgIHNoaXBwaW5nTWV0aG9kc0FycmF5LnB1c2goc2VsZi5leHRlcm5hbENhcnRMaW5lSWQpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGVtYWlsLnRyaW0oKS5sZW5ndGggPT09IDAgJiYgaW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICBzaGlwcGluZ01ldGhvZHNBcnJheS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgICB9DQoNCiAgICB9LmJpbmQodGhpcykpOw0KICAgIHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQgPSBrby5vYnNlcnZhYmxlKCIiKTsNCg0KICAgIHNlbGYuc2hpcHBpbmdPcHRpb25zID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgaWYgKGxpbmUuU2hpcHBpbmdPcHRpb25zICE9PSBudWxsKSB7DQogICAgICAgICQobGluZS5TaGlwcGluZ09wdGlvbnMpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2VsZi5zaGlwcGluZ09wdGlvbnMucHVzaCh0aGlzKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gSGFuZGxlIGVkaXQgbW9kZS4NCiAgICAgICAgaWYgKGxpbmUuU2hpcHBpbmdPcHRpb25zICE9IG51bGwgJiYgbGluZS5TaGlwcGluZ09wdGlvbnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdmFyIHNoaXBwaW5nT3B0aW9uID0gbGluZS5TaGlwcGluZ09wdGlvbnNbMF07DQogICAgICAgICAgICBpZiAoc2hpcHBpbmdPcHRpb24gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChzaGlwcGluZ09wdGlvbi5TaGlwcGluZ09wdGlvblR5cGUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uU2hpcHBpbmdPcHRpb25UeXBlLlZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBzZWxmLmhhbmRsZUVkaXRNb2RlID0gZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgaWYgKGRhdGEuQ2FydC5TaGlwbWVudHMgIT0gbnVsbCAmJiBkYXRhLkNhcnQuU2hpcG1lbnRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb24gPSBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKTsNCg0KICAgICAgICAgICAgJChkYXRhLkNhcnQuU2hpcG1lbnRzKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICB2YXIgc2hpcG1lbnQgPSB0aGlzOw0KICAgICAgICAgICAgICAgIHZhciBmb3VuZFNoaXBtZW50ID0gbnVsbDsNCiAgICAgICAgICAgICAgICBpZiAoc2hpcG1lbnQuTGluZUlEcyAhPSBudWxsKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgZm91bmRMaW5lSWQgPSBrby51dGlscy5hcnJheUZpcnN0KHNoaXBtZW50LkxpbmVJRHMsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PT0gc2VsZi5leHRlcm5hbENhcnRMaW5lSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZExpbmVJZCAhPSBudWxsKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoaXBUb0FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID09ICIxIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGlwbWVudC5TaGlwbWVudEVkaXRNb2RlbCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2RzID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2RzLnJlbW92ZUFsbCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goc2hpcG1lbnQuU2hpcG1lbnRFZGl0TW9kZWwuU2hpcHBpbmdNZXRob2RzLCBmdW5jdGlvbiAoaSwgdikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZHMucHVzaChuZXcgbWV0aG9kKHYuRGVzY3JpcHRpb24sIHYuRXh0ZXJuYWxJZCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc20gPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuc2hpcHBpbmdNZXRob2RzKCksIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5kZXNjcmlwdGlvbiA9PT0gc2hpcG1lbnQuU2hpcHBpbmdNZXRob2ROYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc20gIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZChzbSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVtYWlsDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PSAnMycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNoaXBwaW5nRW1haWwoc2hpcG1lbnQuRW1haWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQoc2hpcG1lbnQuRW1haWxDb250ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9PSAiMSIpIHsNCiAgICAgICAgICAgICAgICBzZWxmLmlzTGluZVNoaXBBbGwodHJ1ZSk7DQogICAgICAgICAgICAgICAgc2VsZi5pc0xpbmVTaGlwVG9FbWFpbChmYWxzZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID09ICczJykgew0KICAgICAgICAgICAgICAgIHNlbGYuaXNMaW5lU2hpcFRvRW1haWwodHJ1ZSk7DQogICAgICAgICAgICAgICAgc2VsZi5pc0xpbmVTaGlwQWxsKGZhbHNlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc2VsZi5zaG93U2hpcE9wdGlvbkNvbnRlbnQodHJ1ZSk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCg0KZnVuY3Rpb24gV2lzaExpc3RWaWV3TW9kZWwoZGF0YSwgdXNlckFkZHJlc3Nlcykgew0KICAgIHZhciBzZWxmID0gdGhpczsNCg0KICAgIHNlbGYuY2FydExpbmVzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgc2VsZi51c2VyQWRkcmVzc2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgaWYgKHVzZXJBZGRyZXNzZXMgIT0gbnVsbCkgew0KICAgICAgICBzZWxmLnVzZXJBZGRyZXNzZXModXNlckFkZHJlc3Nlcyk7DQogICAgfQ0KDQogICAgc2VsZi5nZXRVbmlxdWVBZGRyZXNzSWQgPSBmdW5jdGlvbiAoKSB7DQoNCiAgICAgICAgdmFyIG5ld0lkID0gMTA7DQogICAgICAgIGZvciAoaSA9IDEwOyBpIDwgMTAwMDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuY2FydExpbmVzKCksIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgaWYgKGEuc2hpcHBpbmdBZGRyZXNzKCkgIT0gbnVsbCAmJiBhLnNoaXBwaW5nQWRkcmVzcygpLmV4dGVybmFsSWQoKSA9PT0gaS50b1N0cmluZygpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgbmV3SWQgPSBpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIG5ld0lkOw0KICAgIH0NCg0KICAgIC8vZXhpc3RpbmcgcHJvbW8gY29kZXMNCiAgICBzZWxmLnByb21vQ29kZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgICBpZiAoZGF0YSAhPSBudWxsKSB7DQogICAgICAgICQoZGF0YS5Qcm9tb0NvZGVzKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHNlbGYucHJvbW9Db2Rlcy5wdXNoKHRoaXMpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvL3Byb21vIGNvZGUgaW5wdXQNCiAgICBzZWxmLnByb21vQ29kZSA9IGtvLm9ic2VydmFibGUoKTsNCiAgICBzZWxmLmhhc1Byb21vQ29kZSA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHNlbGYucHJvbW9Db2RlKCk7DQogICAgfSk7DQoNCiAgICBzZWxmLnN1YlRvdGFsID0ga28ub2JzZXJ2YWJsZShkYXRhICE9IG51bGwgPyBkYXRhLlN1YnRvdGFsIDogMCk7DQogICAgc2VsZi50YXhUb3RhbCA9IGtvLm9ic2VydmFibGUoZGF0YSAhPSBudWxsID8gZGF0YS5UYXhUb3RhbCA6IDApOw0KICAgIHNlbGYudG90YWwgPSBrby5vYnNlcnZhYmxlKGRhdGEgIT0gbnVsbCA/IGRhdGEuVG90YWwgOiAwKTsNCiAgICBzZWxmLnRvdGFsQW1vdW50ID0ga28ub2JzZXJ2YWJsZShkYXRhICE9IG51bGwgPyBkYXRhLlRvdGFsQW1vdW50IDogMCk7DQogICAgc2VsZi5kaXNjb3VudCA9IGtvLm9ic2VydmFibGUoZGF0YSAhPSBudWxsID8gZGF0YS5EaXNjb3VudCA6IDApOw0KICAgIHNlbGYuc2hpcHBpbmdUb3RhbCA9IGtvLm9ic2VydmFibGUoZGF0YSAhPSBudWxsID8gZGF0YS5TaGlwcGluZ1RvdGFsIDogMCk7DQogICAgc2VsZi5pc0xpbmVTaGlwQWxsID0gZGF0YSAhPSBudWxsICYmIGRhdGEuU2hpcG1lbnRzICE9IG51bGwgJiYgZGF0YS5TaGlwbWVudHMubGVuZ3RoID4gMTsNCg0KICAgIHNlbGYuc2hpcG1lbnRzID0gW107DQogICAgaWYgKGRhdGEgIT0gbnVsbCkgew0KICAgICAgICAkKGRhdGEuU2hpcG1lbnRzKS5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHNlbGYuc2hpcG1lbnRzLnB1c2gobmV3IFNoaXBtZW50RGF0YSh0aGlzKSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIHNlbGYucGFydGllcyA9IFtdOw0KICAgIGlmIChkYXRhICE9IG51bGwpIHsNCiAgICAgICAgJChkYXRhLlBhcnRpZXMpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2VsZi5wYXJ0aWVzLnB1c2gobmV3IEFkZHJlc3NWaWV3TW9kZWwodGhpcykpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBpZiAoZGF0YSAhPSBudWxsKSB7DQogICAgICAgICQoZGF0YS5MaW5lcykuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgbGluZUl0ZW0gPSBuZXcgV2lzaExpc3RMaW5lSXRlbURhdGEoZGF0YSwgdGhpcywgc2VsZik7DQoNCiAgICAgICAgICAgIGlmIChzZWxmLmlzTGluZVNoaXBBbGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgc2hpcG1lbnQgPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuc2hpcG1lbnRzLCBmdW5jdGlvbiAoYSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoYS5saW5lSWRzICE9IG51bGwgJiYgYS5saW5lSWRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IGtvLnV0aWxzLmFycmF5Rmlyc3QoYS5saW5lSWRzLCBmdW5jdGlvbiAobCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID09PSBsaW5lSXRlbS5leHRlcm5hbENhcnRMaW5lSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIGlmIChzaGlwbWVudCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtLnNoaXBwaW5nTWV0aG9kKG5ldyBMaW5lSXRlbVNoaXBwaW5nTWV0aG9kKHNoaXBtZW50LnNoaXBwaW5nTWV0aG9kSWQsIHNoaXBtZW50LnNoaXBwaW5nTWV0aG9kTmFtZSkpDQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnR5ID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLnBhcnRpZXMsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5leHRlcm5hbElkKCkgPT09IHNoaXBtZW50LnBhcnR5SWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0eSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbS5zaGlwcGluZ0FkZHJlc3MocGFydHkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBzZWxmLmNhcnRMaW5lcy5wdXNoKGxpbmVJdGVtKTsNCiAgICAgICAgfSk7DQogICAgfQ0KfQ0K
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 14277
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190305T182639Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\Admin
