---
ID: "83687e9e-e76f-404f-9868-61172eed9ff7"
Parent: "28d0286e-5ee1-4be0-9aee-41d76fa2f651"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat Sites/Habitat Home Store/scripts/components/Cart/habitathome-feature-cart-billing-model"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/83687E9EE76F404F986861172EED9FF7.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "97dbbaf0-d13b-4d44-b13a-16d0183fbc90"
  Value: 77u/dmFyIG11c3RFcXVhbCA9IGZ1bmN0aW9uICh2YWwsIG90aGVyKSB7DQoNCiAgICBpZiAodmFsKSB7DQogICAgICAgIHJldHVybiB2YWwgPT09IG90aGVyOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfTsNCg0KLy8gLS0tLS1bR0lGVCBDQVJEIFBBWU1FTlQgTU9ERUxdLS0tLS0NCmZ1bmN0aW9uIEdpZnRDYXJkUGF5bWVudFZpZXdNb2RlbChiaWxsaW5nVmlld01vZGVsLCBjYXJkKSB7DQogICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgIHZhciBwb3B1bGF0ZSA9IGNhcmQgIT0gbnVsbDsNCg0KICAgIHNlbGYuYmlsbGluZ1ZpZXdNb2RlbCA9IGJpbGxpbmdWaWV3TW9kZWw7DQoNCiAgICBzZWxmLmlzQWRkZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLmJhbGFuY2UgPSBrby5vYnNlcnZhYmxlKDApOw0KICAgIHNlbGYuZm9ybWF0dGVkQmFsYW5jZSA9IGtvLm9ic2VydmFibGUoIiIpOw0KICAgIHNlbGYuZW5hYmxlQWRkQ2FyZCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KDQogICAgc2VsZi5naWZ0Q2FyZE51bWJlciA9IHBvcHVsYXRlID8ga28udmFsaWRhdGVkT2JzZXJ2YWJsZShjYXJkLlBheW1lbnRNZXRob2RJRCkuZXh0ZW5kKHsgcmVxdWlyZWQ6IHRydWUgfSkgOiBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCIiKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSB9KTsNCiAgICBzZWxmLmdpZnRDYXJkTnVtYmVyLnN1YnNjcmliZShmdW5jdGlvbiAoY24pIHsNCiAgICAgICAgc2VsZi5iYWxhbmNlKDApOw0KICAgICAgICBzZWxmLmZvcm1hdHRlZEJhbGFuY2UoIiIpOw0KDQogICAgICAgIHNlbGYucmVFbmFibGVBZGRDYXJkKCk7DQogICAgICAgIC8vc2VsZi5lbmFibGVBZGRDYXJkKGNuLmxlbmd0aCA+IDAgJiYgc2VsZi5naWZ0Q2FyZEFtb3VudCgpLmxlbmd0aCA+IDAgJiYgc2VsZi5pc0FkZGVkKCkgPT09IGZhbHNlKTsNCiAgICB9LmJpbmQodGhpcykpOw0KDQogICAgc2VsZi5yZWxvYWQgPSBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICBzZWxmLmdpZnRDYXJkTnVtYmVyKGRhdGEuRXh0ZXJuYWxJZCk7DQogICAgICAgIHNlbGYuZm9ybWF0dGVkQmFsYW5jZShkYXRhLkZvcm1hdHRlZEJhbGFuY2UpOw0KICAgICAgICBzZWxmLmJhbGFuY2UoZGF0YS5CYWxhbmNlKTsNCiAgICAgICAgLy9zZWxmLmVuYWJsZUFkZENhcmQoZmFsc2UpOw0KICAgICAgICBzZWxmLnJlRW5hYmxlQWRkQ2FyZCgpOw0KICAgIH0NCg0KICAgIHNlbGYucmVFbmFibGVBZGRDYXJkID0gZnVuY3Rpb24gKGNhKSB7DQogICAgICAgIGlmICghY2EpIHsNCiAgICAgICAgICAgIGNhID0gc2VsZi5naWZ0Q2FyZEFtb3VudCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgc2VsZi5lbmFibGVBZGRDYXJkKGNhLmxlbmd0aCA+IDAgJiYgc2VsZi5naWZ0Q2FyZE51bWJlcigpLmxlbmd0aCA+IDAgJiYgc2VsZi5pc0FkZGVkKCkgPT09IGZhbHNlICYmIHNlbGYuZ2lmdENhcmRBbW91bnQuaXNWYWxpZCgpICYmIHNlbGYuYmFsYW5jZSgpID4gMCk7DQogICAgfQ0KDQogICAgc2VsZi5nZXRCYWxhbmNlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBNZXNzYWdlQ29udGV4dC5DbGVhckFsbE1lc3NhZ2VzKCk7DQogICAgICAgIHZhciAkYnRuID0gJCgnLmdpdC1jYXJkLXBheW1lbnQtZ2V0LWJhbGFuY2UtYnRuJykuYnV0dG9uKCdsb2FkaW5nJyk7DQogICAgICAgIHZhciBkYXRhID0ge307DQogICAgICAgIGRhdGEuR2lmdENhcmRJZCA9IHNlbGYuZ2lmdENhcmROdW1iZXIoKTsNCiAgICAgICAgQWpheFNlcnZpY2UuUG9zdCgnL2FwaS9jeGEvY2hlY2tvdXQvZ2V0Z2lmdGNhcmRiYWxhbmNlJywgZGF0YSwgZnVuY3Rpb24gKGRhdGEsIHN1Y2Nlc3MsIHNlbmRlcikgew0KICAgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgc2VsZi5yZWxvYWQoZGF0YSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICQoJy5naXQtY2FyZC1wYXltZW50LWdldC1iYWxhbmNlLWJ0bicpLmJ1dHRvbigncmVzZXQnKTsNCiAgICAgICAgfSwgdGhpcyk7DQogICAgfTsNCg0KICAgIHNlbGYuYXBwbHlCYWxhbmNlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBNZXNzYWdlQ29udGV4dC5DbGVhckFsbE1lc3NhZ2VzKCk7DQogICAgICAgIHZhciBiYWxhbmNlID0gc2VsZi5iYWxhbmNlKCk7DQogICAgICAgIGlmIChiYWxhbmNlIDw9IDApIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBvcmRlclRvdGFsID0gc2VsZi5iaWxsaW5nVmlld01vZGVsLmNhcnQoKS50b3RhbEFtb3VudCgpOw0KICAgICAgICBpZiAoYmFsYW5jZSA+IG9yZGVyVG90YWwpIHsNCiAgICAgICAgICAgIHNlbGYuZ2lmdENhcmRBbW91bnRSYXdWYWx1ZShvcmRlclRvdGFsKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChiYWxhbmNlIDw9IG9yZGVyVG90YWwpIHsNCiAgICAgICAgICAgIHNlbGYuZ2lmdENhcmRBbW91bnRSYXdWYWx1ZShiYWxhbmNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHNlbGYuZW5hYmxlQWRkQ2FyZCh0cnVlKTsNCiAgICB9Ow0KDQogICAgc2VsZi5hZGRDYXJkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBNZXNzYWdlQ29udGV4dC5DbGVhckFsbE1lc3NhZ2VzKCk7DQogICAgICAgIHNlbGYuaXNBZGRlZCh0cnVlKTsNCiAgICAgICAgc2VsZi5lbmFibGVBZGRDYXJkKGZhbHNlKTsNCiAgICAgICAgc2VsZi5yZXZhbHVlQW1vdW50cygpOw0KICAgIH07DQoNCiAgICBzZWxmLnJlbW92ZUNhcmQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIE1lc3NhZ2VDb250ZXh0LkNsZWFyQWxsTWVzc2FnZXMoKTsNCiAgICAgICAgc2VsZi5pc0FkZGVkKGZhbHNlKTsNCiAgICAgICAgc2VsZi5naWZ0Q2FyZE51bWJlcigiIik7DQogICAgICAgIHNlbGYuZm9ybWF0dGVkQmFsYW5jZSgiIik7DQogICAgICAgIHNlbGYuZ2lmdENhcmRBbW91bnRSYXdWYWx1ZSgwLjAwKTsNCiAgICAgICAgc2VsZi5iYWxhbmNlKDAuMDApOw0KICAgIH07DQoNCiAgICBzZWxmLnJldmFsdWVBbW91bnRzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAoIXNlbGYuaXNBZGRlZCgpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgY2NJc0FkZGVkID0gc2VsZi5iaWxsaW5nVmlld01vZGVsLmNyZWRpdENhcmRQYXltZW50KCkuaXNBZGRlZCgpOw0KICAgICAgICBpZiAoIWNjSXNBZGRlZCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGNjQW1vdW50ID0gcGFyc2VGbG9hdChzZWxmLmJpbGxpbmdWaWV3TW9kZWwuY3JlZGl0Q2FyZFBheW1lbnQoKS5jcmVkaXRDYXJkQW1vdW50KCkpOw0KICAgICAgICB2YXIgdG90YWwgPSBwYXJzZUZsb2F0KHNlbGYuYmlsbGluZ1ZpZXdNb2RlbC5jYXJ0KCkudG90YWxBbW91bnQoKSk7DQogICAgICAgIHZhciBhVG90YWwgPSBwYXJzZUZsb2F0KHBhcnNlRmxvYXQoc2VsZi5naWZ0Q2FyZEFtb3VudFJhd1ZhbHVlKCkpICsgY2NBbW91bnQpOw0KDQogICAgICAgIGlmIChhVG90YWwgPiB0b3RhbCkgew0KICAgICAgICAgICAgdmFyIGNvdW50ID0gMTsNCiAgICAgICAgICAgIHZhciBkaWZmID0gKGFUb3RhbCAtIHRvdGFsKSAvIGNvdW50Ow0KICAgICAgICAgICAgY2NBbW91bnQgPSBjY0lzQWRkZWQgPyBjY0Ftb3VudCAtIGRpZmYgOiAwOw0KICAgICAgICAgICAgc2VsZi5iaWxsaW5nVmlld01vZGVsLmNyZWRpdENhcmRQYXltZW50KCkuY3JlZGl0Q2FyZEFtb3VudCgoY2NBbW91bnQpLnRvRml4ZWQoMikpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbGYuZ2lmdENhcmRBbW91bnQgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKDAuMDApLmV4dGVuZCh7IHJlcXVpcmVkOiB0cnVlLCBudW1iZXI6IHRydWUgfSk7DQoNCiAgICBzZWxmLmdpZnRDYXJkQW1vdW50UmF3VmFsdWUgPSBrby5jb21wdXRlZCh7DQogICAgICAgIHJlYWQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhbHVlID0gc2VsZi5naWZ0Q2FyZEFtb3VudCgpOw0KDQogICAgICAgICAgICBpZiAoc2VsZi5iaWxsaW5nVmlld01vZGVsKSB7DQogICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpOw0KICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShzZWxmLmJpbGxpbmdWaWV3TW9kZWwuY3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKCksICIuIik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgICAgICAgaWYgKHNlbGYuYmlsbGluZ1ZpZXdNb2RlbCkgew0KICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIi4iLCBzZWxmLmJpbGxpbmdWaWV3TW9kZWwuY3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKCkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBzZWxmLmdpZnRDYXJkQW1vdW50KHZhbHVlKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KDQogICAgc2VsZi5naWZ0Q2FyZEFtb3VudC5zdWJzY3JpYmUoZnVuY3Rpb24gKGNhKSB7DQogICAgICAgIHNlbGYucmVFbmFibGVBZGRDYXJkKGNhKTsNCiAgICAgICAgc2VsZi5yZXZhbHVlQW1vdW50cygpOw0KICAgIH0uYmluZCh0aGlzKSk7DQoNCiAgICBzZWxmLmFkZEdpZnRDYXJkID0gZnVuY3Rpb24gKGNhcmREYXRhKSB7DQogICAgICAgIHNlbGYuZ2lmdENhcmROdW1iZXIoY2FyZERhdGEuR2lmdENhcmROdW1iZXIgIT0gbnVsbCA/IGNhcmREYXRhLkdpZnRDYXJkTnVtYmVyIDogIiIpOw0KICAgICAgICBzZWxmLmdpZnRDYXJkQW1vdW50UmF3VmFsdWUoY2FyZERhdGEuQW1vdW50KTsNCiAgICAgICAgc2VsZi5pc0FkZGVkKHRydWUpOw0KICAgIH0NCn0NCg0KLy8gLS0tLS1bQ1JFRElUQ0FSRCBQQVlNRU5UIE1PREVMXS0tLS0tDQpmdW5jdGlvbiBDcmVkaXRDYXJkUGF5bWVudFZpZXdNb2RlbChjYXJkLCBjaGVja291dFZpZXdNb2RlbCkgew0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgcG9wdWxhdGUgPSBjYXJkICE9IG51bGw7DQoNCiAgICBzZWxmLmNoZWNrb3V0Vmlld01vZGVsID0gY2hlY2tvdXRWaWV3TW9kZWw7DQoNCiAgICBzZWxmLmlzQWRkZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLmNyZWRpdENhcmROdW1iZXIgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCkuZXh0ZW5kKHsgcmVxdWlyZWQ6IHRydWUsIG51bWJlcjogdHJ1ZSB9KTsNCiAgICBzZWxmLmNyZWRpdENhcmROdW1iZXJNYXNrZWQgPSBrby5vYnNlcnZhYmxlKCk7DQogICAgc2VsZi5jcmVkaXRDYXJkTnVtYmVyLnN1YnNjcmliZShmdW5jdGlvbiAobnVtYmVyKSB7DQogICAgICAgIHNlbGYuY3JlZGl0Q2FyZE51bWJlck1hc2tlZCgiWFhYWCBYWFhYIFhYWFggIiArIG51bWJlci5zdWJzdHIobnVtYmVyLmxlbmd0aCAtIDQpKTsNCiAgICB9KTsNCg0KICAgIHNlbGYuZGVzY3JpcHRpb24gPSBrby5vYnNlcnZhYmxlKCk7DQoNCiAgICBzZWxmLmV4aXN0aW5nUGF5bWVudEFtb3VudCA9IGtvLm9ic2VydmFibGUocG9wdWxhdGUgPyBjYXJkLkFtb3VudCA6IDApOw0KDQogICAgc2VsZi5wYXltZW50TWV0aG9kSUQgPSBwb3B1bGF0ZSA/IGtvLnZhbGlkYXRlZE9ic2VydmFibGUoY2FyZC5QYXltZW50TWV0aG9kSUQpLmV4dGVuZCh7IHJlcXVpcmVkOiB0cnVlIH0pIDoga28udmFsaWRhdGVkT2JzZXJ2YWJsZSgpLmV4dGVuZCh7IHJlcXVpcmVkOiB0cnVlIH0pOw0KICAgIHNlbGYucGF5bWVudE1ldGhvZElELnN1YnNjcmliZShmdW5jdGlvbiAobWV0aG9kSWQpIHsNCiAgICAgICAgaWYgKG1ldGhvZElkICE9PSAiMCIpIHsNCiAgICAgICAgICAgIHNlbGYuaXNBZGRlZCh0cnVlKTsNCg0KICAgICAgICAgICAgdmFyIHBheW1lbnRNZXRob2QgPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuY2hlY2tvdXRWaWV3TW9kZWwucGF5bWVudE1ldGhvZHMoKSwgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICBpZiAoYS5FeHRlcm5hbElkID09PSBtZXRob2RJZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBzZWxmLmRlc2NyaXB0aW9uKHBheW1lbnRNZXRob2QgPyBwYXltZW50TWV0aG9kLkRlc2NyaXB0aW9uIDogIiIpOw0KICAgICAgICAgICAgc2VsZi5jaGVja291dFZpZXdNb2RlbC5jcmVkaXRDYXJkRW5hYmxlKHRydWUpOw0KICAgICAgICAgICAgc2VsZi5jaGVja291dFZpZXdNb2RlbC5iaWxsaW5nQWRkcmVzc0VuYWJsZSh0cnVlKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNlbGYuaXNBZGRlZChmYWxzZSk7DQogICAgICAgICAgICBzZWxmLmNoZWNrb3V0Vmlld01vZGVsLmNyZWRpdENhcmRFbmFibGUoZmFsc2UpOw0KICAgICAgICAgICAgc2VsZi5jaGVja291dFZpZXdNb2RlbC5iaWxsaW5nQWRkcmVzc0VuYWJsZShmYWxzZSk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIHNlbGYuY2hhbmdlUGF5bWVudCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICAgIHNlbGYuZGlzcGxheUV4aXN0aW5nUGF5bWVudE1lc3NhZ2UgPSBrby5jb21wdXRlZCh7DQogICAgICAgIHJlYWQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGlmIChzZWxmLmNoZWNrb3V0Vmlld01vZGVsLmVkaXRNb2RlKCkgJiYgc2VsZi5leGlzdGluZ1BheW1lbnRBbW91bnQoKSA9PSBzZWxmLmNyZWRpdENhcmRBbW91bnQoKSAmJiAhc2VsZi5jaGFuZ2VQYXltZW50KCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uICgpIHsgfQ0KICAgIH0pOw0KDQogICAgc2VsZi5tdXN0UmV2YWxpZGF0ZVBheW1lbnRNZXNzYWdlID0ga28ub2JzZXJ2YWJsZShwb3B1bGF0ZSA/IGNhcmQuQ2FydEFtb3VudERpZmZlcmVudFRoYW5QYXltZW50TWVzc2FnZSA6ICIiKTsNCiAgICBzZWxmLm11c3RSZXZhbGlkYXRlUGF5bWVudCA9IGtvLmNvbXB1dGVkKHsNCiAgICAgICAgcmVhZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHNlbGYuY2hlY2tvdXRWaWV3TW9kZWwuZWRpdE1vZGUoKSAmJiBzZWxmLmV4aXN0aW5nUGF5bWVudEFtb3VudCgpICE9IHNlbGYuY3JlZGl0Q2FyZEFtb3VudCgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHdyaXRlOiBmdW5jdGlvbiAoKSB7IH0NCiAgICB9KTsNCg0KICAgIHNlbGYuY3JlZGl0Q2FyZEFtb3VudCA9IGtvLmNvbXB1dGVkKHsNCiAgICAgICAgcmVhZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKCFzZWxmLmlzQWRkZWQoKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgdG90YWwgPSBzZWxmLmNoZWNrb3V0Vmlld01vZGVsLmNhcnQoKSA/IHNlbGYuY2hlY2tvdXRWaWV3TW9kZWwuY2FydCgpLnRvdGFsQW1vdW50KCkgOiAwOw0KICAgICAgICAgICAgdmFyIGdjQW1vdW50ID0gc2VsZi5jaGVja291dFZpZXdNb2RlbC5naWZ0Q2FyZFBheW1lbnQoKSA/IHNlbGYuY2hlY2tvdXRWaWV3TW9kZWwuZ2lmdENhcmRQYXltZW50KCkuZ2lmdENhcmRBbW91bnRSYXdWYWx1ZSgpIDogMDsNCiAgICAgICAgICAgIHZhciBjY0Ftb3VudCA9IChwYXJzZUZsb2F0KHRvdGFsKSAtIHBhcnNlRmxvYXQoZ2NBbW91bnQpKS50b0ZpeGVkKDIpOw0KDQogICAgICAgICAgICBpZiAoY2NBbW91bnQgPD0gMCkgew0KICAgICAgICAgICAgICAgIHNlbGYuaXNBZGRlZChmYWxzZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBjY0Ftb3VudDsNCiAgICAgICAgfSwNCiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uICgpIHsgfQ0KICAgIH0pOw0KDQogICAgc2VsZi5vcmlnaW5hbEV4aXN0aW5nUGF5bWVudE1lc3NhZ2UgPSBrby5vYnNlcnZhYmxlKHBvcHVsYXRlID8gY2FyZC5FeGlzdGluZ1BheW1lbnRNZXNzYWdlIDogIiIpOw0KICAgIHNlbGYuZXhpc3RpbmdQYXltZW50TWVzc2FnZSA9IGtvLmNvbXB1dGVkKHsNCiAgICAgICAgcmVhZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHNlbGYuY3JlZGl0Q2FyZEFtb3VudCgpICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5vcmlnaW5hbEV4aXN0aW5nUGF5bWVudE1lc3NhZ2UoKS5mb3JtYXQoc2VsZi5jcmVkaXRDYXJkQW1vdW50KCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICB3cml0ZTogZnVuY3Rpb24gKCkgeyB9DQogICAgfSk7DQoNCiAgICBzZWxmLnBhcnR5SUQgPSBwb3B1bGF0ZSA/IGtvLm9ic2VydmFibGUoY2FyZC5QYXJ0eUlEKSA6IGtvLm9ic2VydmFibGUoKTsNCn0NCg0KLy8gLS0tLS1bQklMTElORyBEQVRBIE1PREVMXS0tLS0tDQpmdW5jdGlvbiBCaWxsaW5nRGF0YVZpZXdNb2RlbCgpIHsNCiAgICB2YXIgc2VsZiA9IHRoaXM7DQoNCiAgICB2YXIgUGF5bWVudFR5cGVzID0gew0KICAgICAgICBHaWZ0Q2FyZDogMywNCiAgICAgICAgRmVkZXJhdGVkUGF5bWVudDogNCwNCiAgICB9Ow0KDQogICAgc2VsZi5jYXJ0ID0ga28ub2JzZXJ2YWJsZSgiIik7DQoNCiAgICBzZWxmLmVkaXRNb2RlID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7DQoNCiAgICB2YXIgQ291bnRyeSA9IGZ1bmN0aW9uIChuYW1lLCBjb2RlKSB7DQogICAgICAgIHRoaXMuY291bnRyeSA9IG5hbWU7DQogICAgICAgIHRoaXMuY29kZSA9IGNvZGU7DQogICAgfTsNCiAgICBzZWxmLmNvdW50cmllcyA9IGtvLm9ic2VydmFibGVBcnJheSgpOw0KDQogICAgc2VsZi5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsNCiAgICBzZWxmLnVzZXJFbWFpbCA9ICIiOw0KDQogICAgc2VsZi5pc1NoaXBBbGwgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCg0KICAgIHNlbGYuY3VsdHVyZURlY2ltYWxTZXBhcmF0b3IgPSBrby5vYnNlcnZhYmxlKCk7DQogICAgc2VsZi5jdXJyZW5jeURlY2ltYWxTZXBhcmF0b3IgPSBrby5vYnNlcnZhYmxlKCk7DQogICAgc2VsZi5jdXJyZW5jeUdyb3VwU2VwYXJhdG9yID0ga28ub2JzZXJ2YWJsZSgpOw0KDQogICAgc2VsZi51c2VyQWRkcmVzc2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgc2VsZi5oYXNEaWdpdGFsUHJvZHVjdHNJbkNhcnQgPSBmYWxzZTsNCiAgICBzZWxmLnVzZXJBZGRyZXNzZXMucHVzaChuZXcgQWRkcmVzc1ZpZXdNb2RlbCh7ICJFeHRlcm5hbElkIjogIlVzZU90aGVyIiwgIkZ1bGxBZGRyZXNzIjogJCgiI090aGVyQWRkcmVzc0xhYmVsIikudmFsKCkgfSkpOw0KDQogICAgc2VsZi5iaWxsaW5nRW1haWwgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKHNlbGYudXNlckVtYWlsKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSwgZW1haWw6IHRydWUgfSk7DQogICAgc2VsZi5iaWxsaW5nQ29uZmlybUVtYWlsID0ga28udmFsaWRhdGVkT2JzZXJ2YWJsZShzZWxmLnVzZXJFbWFpbCkuZXh0ZW5kKHsgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRpb246IHsgdmFsaWRhdG9yOiBtdXN0RXF1YWwsIG1lc3NhZ2U6ICQoIiNFbWFpbHNNdXN0TWF0Y2hNZXNzYWdlIikudmFsKCksIHBhcmFtczogc2VsZi5iaWxsaW5nRW1haWwgfSB9KTsNCg0KICAgIHNlbGYucGF5RmVkZXJhdGVkUGF5bWVudCA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICAgIHNlbGYucGF5R2lmdENhcmQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLmNhcmRQYXltZW50QWNjZXB0UGFnZVVybCA9IGtvLm9ic2VydmFibGUoJycpOw0KICAgIHNlbGYuY2FyZFBheW1lbnRSZXN1bHRBY2Nlc3NDb2RlID0gIiI7DQogICAgc2VsZi5jYXJkUGF5bWVudEFjY2VwdENhcmRQcmVmaXggPSAiIjsNCiAgICBzZWxmLkNBUkRQQVlNRU5UQUNDRVBUUEFHRUhFSUdIVCA9ICJtc2F4LWNjLWhlaWdodCI7DQogICAgc2VsZi5DQVJEUEFZTUVOVEFDQ0VQVFBBR0VFUlJPUiA9ICJtc2F4LWNjLWVycm9yIjsNCiAgICBzZWxmLkNBUkRQQVlNRU5UQUNDRVBUUEFHRVJFU1VMVCA9ICJtc2F4LWNjLXJlc3VsdCI7DQogICAgc2VsZi5DQVJEUEFZTUVOVEFDQ0VQVFBBR0VTVUJNSVQgPSAibXNheC1jYy1zdWJtaXQiOw0KICAgIHNlbGYuQ0FSRFBBWU1FTlRBQ0NFUFRDQVJEUFJFRklYID0gIm1zYXgtY2MtY2FyZHByZWZpeCI7DQoNCiAgICB2YXIgUGF5bWVudE1ldGhvZCA9IGZ1bmN0aW9uIChleHRlcm5hbElkLCBkZXNjcmlwdGlvbikgew0KICAgICAgICB0aGlzLkV4dGVybmFsSWQgPSBleHRlcm5hbElkOw0KICAgICAgICB0aGlzLkRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247DQogICAgfTsNCg0KICAgIHNlbGYucGF5bWVudE1ldGhvZHMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgICBzZWxmLnBheW1lbnRDbGllbnRUb2tlbiA9IGtvLm9ic2VydmFibGUoIiIpOw0KDQogICAgc2VsZi5naWZ0Q2FyZFBheW1lbnQgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKG5ldyBHaWZ0Q2FyZFBheW1lbnRWaWV3TW9kZWwoc2VsZikpOw0KICAgIHNlbGYuY3JlZGl0Q2FyZFBheW1lbnQgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKG5ldyBDcmVkaXRDYXJkUGF5bWVudFZpZXdNb2RlbChudWxsLCBzZWxmKSk7DQogICAgc2VsZi5jcmVkaXRDYXJkRW5hYmxlID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7DQogICAgc2VsZi5iaWxsaW5nQWRkcmVzcyA9IGtvLnZhbGlkYXRlZE9ic2VydmFibGUobmV3IEFkZHJlc3NWaWV3TW9kZWwoeyAiRXh0ZXJuYWxJZCI6ICIxIiB9KSk7DQogICAgc2VsZi5iaWxsaW5nQWRkcmVzc0VuYWJsZSA9IGtvLm9ic2VydmFibGUoZmFsc2UpOw0KICAgIHNlbGYuc2hpcHBpbmdBZGRyZXNzID0ga28ub2JzZXJ2YWJsZSgpOw0KICAgIHNlbGYuc2VsZWN0ZWRCaWxsaW5nQWRkcmVzcyA9IGtvLm9ic2VydmFibGUoIlVzZU90aGVyIik7DQogICAgc2VsZi5zZWxlY3RlZEJpbGxpbmdBZGRyZXNzLnN1YnNjcmliZShmdW5jdGlvbiAoaWQpIHsNCiAgICAgICAgaWYgKGlkID09PSAiVXNlU2hpcHBpbmciKSB7DQogICAgICAgICAgICBzZWxmLmJpbGxpbmdBZGRyZXNzRW5hYmxlKGZhbHNlKTsNCiAgICAgICAgICAgIHNlbGYuYmlsbGluZ0FkZHJlc3Moc2VsZi5zaGlwcGluZ0FkZHJlc3MoKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2YXIgbWF0Y2ggPSBzZWxmLmdldEFkZHJlc3MoaWQpOw0KICAgICAgICAgICAgaWYgKG1hdGNoICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBzZWxmLmJpbGxpbmdBZGRyZXNzRW5hYmxlKGZhbHNlKTsNCiAgICAgICAgICAgICAgICBzZWxmLmJpbGxpbmdBZGRyZXNzKG1hdGNoKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc2VsZi5iaWxsaW5nQWRkcmVzc0VuYWJsZSh0cnVlKTsNCiAgICAgICAgICAgICAgICBzZWxmLmJpbGxpbmdBZGRyZXNzKG5ldyBBZGRyZXNzVmlld01vZGVsKHsgIkV4dGVybmFsSWQiOiAiMSIgfSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJCgiLnNlbGVjdC1iaWxsaW5nLWFkZHJlc3MiKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsNCiAgICB9KTsNCg0KICAgIHNlbGYucGF5bWVudFRvdGFsID0ga28uY29tcHV0ZWQoew0KICAgICAgICByZWFkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgY2NJc0FkZGVkID0gc2VsZi5jcmVkaXRDYXJkUGF5bWVudCgpLmlzQWRkZWQoKTsNCiAgICAgICAgICAgIHZhciBnY0lzQWRkZWQgPSBzZWxmLmdpZnRDYXJkUGF5bWVudCgpLmlzQWRkZWQoKTsNCiAgICAgICAgICAgIGlmICghY2NJc0FkZGVkICYmICFnY0lzQWRkZWQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIGNjQW1vdW50ID0gY2NJc0FkZGVkID8gc2VsZi5jcmVkaXRDYXJkUGF5bWVudCgpLmNyZWRpdENhcmRBbW91bnQoKSA6IDA7DQogICAgICAgICAgICB2YXIgZ2NBbW91bnQgPSBnY0lzQWRkZWQgPyBzZWxmLmdpZnRDYXJkUGF5bWVudCgpLmdpZnRDYXJkQW1vdW50UmF3VmFsdWUoKSA6IDA7DQogICAgICAgICAgICByZXR1cm4gKHBhcnNlRmxvYXQoY2NBbW91bnQpICsgcGFyc2VGbG9hdChnY0Ftb3VudCkpLnRvRml4ZWQoMik7DQogICAgICAgIH0sDQogICAgICAgIHdyaXRlOiBmdW5jdGlvbiAoKSB7IH0NCiAgICB9KTsNCg0KICAgIHNlbGYuZW5hYmxlVG9Db25maXJtID0ga28uY29tcHV0ZWQoew0KICAgICAgICByZWFkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICBpZiAoc2VsZi5jYXJ0KCkubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBwYXltZW50VG90YWxJc1ZhbGlkID0gcGFyc2VGbG9hdChzZWxmLnBheW1lbnRUb3RhbCgpKSA9PT0gcGFyc2VGbG9hdChzZWxmLmNhcnQoKS50b3RhbEFtb3VudCgpKTsNCiAgICAgICAgICAgIGlmICghcGF5bWVudFRvdGFsSXNWYWxpZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHBheW1lbnRzQXJlVmFsaWQgPSBmYWxzZTsNCiAgICAgICAgICAgIGlmIChzZWxmLmdpZnRDYXJkUGF5bWVudCgpLmlzQWRkZWQoKSkgew0KICAgICAgICAgICAgICAgIHBheW1lbnRzQXJlVmFsaWQgPSBzZWxmLmdpZnRDYXJkUGF5bWVudC5pc1ZhbGlkKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChzZWxmLmNyZWRpdENhcmRQYXltZW50KCkuaXNBZGRlZCgpKSB7DQogICAgICAgICAgICAgICAgaWYgKCFzZWxmLnBheUZlZGVyYXRlZFBheW1lbnQoKSkgew0KICAgICAgICAgICAgICAgICAgICBwYXltZW50c0FyZVZhbGlkID0gc2VsZi5jcmVkaXRDYXJkUGF5bWVudC5pc1ZhbGlkKCkgJiYgc2VsZi5iaWxsaW5nQWRkcmVzcy5pc1ZhbGlkKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBwYXltZW50c0FyZVZhbGlkID0gIXNlbGYuY3JlZGl0Q2FyZFBheW1lbnQoKS5tdXN0UmV2YWxpZGF0ZVBheW1lbnQoKSAmJiBzZWxmLmJpbGxpbmdBZGRyZXNzLmlzVmFsaWQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChwYXltZW50c0FyZVZhbGlkKSB7DQogICAgICAgICAgICAgICAga28udmFsaWRhdGlvbi5ncm91cChzZWxmKS5zaG93QWxsTWVzc2FnZXModHJ1ZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBwYXltZW50c0FyZVZhbGlkICYmIHNlbGYuYmlsbGluZ0VtYWlsLmlzVmFsaWQoKSAmJiBzZWxmLmJpbGxpbmdDb25maXJtRW1haWwuaXNWYWxpZCgpOw0KICAgICAgICB9LA0KICAgICAgICB3cml0ZTogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIHNlbGYudG9DdWx0dXJlTnVtYmVyU3RyaW5nID0gZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIGlmICh2YWx1ZSkgew0KICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCIuIiwgc2VsZi5jdWx0dXJlRGVjaW1hbFNlcGFyYXRvcigpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICB9DQoNCiAgICBzZWxmLnNldFBheW1lbnRNZXRob2RzID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgZGF0YSA9ICJ7IjsNCg0KICAgICAgICBkYXRhID0gZGF0YSArICciQmlsbGluZ0l0ZW1QYXRoIjoiJyArICQoIiNCaWxsaW5nSXRlbVBhdGgiKS52YWwoKSArICciLCcNCiAgICAgICAgZGF0YSA9IGRhdGEgKyAnIlVzZXJFbWFpbCI6JyArICciJyArIHNlbGYuYmlsbGluZ0VtYWlsKCkgKyAnIic7DQoNCiAgICAgICAgaWYgKHNlbGYuY3JlZGl0Q2FyZFBheW1lbnQoKS5pc0FkZGVkKCkpIHsNCiAgICAgICAgICAgIHZhciBjYyA9IHNlbGYuY3JlZGl0Q2FyZFBheW1lbnQoKTsNCiAgICAgICAgICAgIGlmIChzZWxmLnBheUZlZGVyYXRlZFBheW1lbnQpIHsNCiAgICAgICAgICAgICAgICB2YXIgY3JlZGl0Q2FyZCA9IHsNCiAgICAgICAgICAgICAgICAgICAgIkNhcmRUb2tlbiI6IHNlbGYuY2FyZFBheW1lbnRSZXN1bHRBY2Nlc3NDb2RlLA0KICAgICAgICAgICAgICAgICAgICAiQW1vdW50Ijogc2VsZi50b0N1bHR1cmVOdW1iZXJTdHJpbmcoY2MuY3JlZGl0Q2FyZEFtb3VudCgpKSwNCiAgICAgICAgICAgICAgICAgICAgIkNhcmRQYXltZW50QWNjZXB0Q2FyZFByZWZpeCI6IHNlbGYuY2FyZFBheW1lbnRBY2NlcHRDYXJkUHJlZml4DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgZGF0YSArPSAiLCI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZGF0YSArPSAnIkZlZGVyYXRlZFBheW1lbnQiOicgKyBKU09OLnN0cmluZ2lmeShjcmVkaXRDYXJkKTsNCiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jYXJkUGF5bWVudEFjY2VwdENhcmRQcmVmaXggPT09ICJwYXlwYWwiKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBiYSA9IHNlbGYuYmlsbGluZ0FkZHJlc3MoKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbGxpbmdBZGRyZXNzID0NCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgIk5hbWUiOiBiYS5uYW1lKCksDQogICAgICAgICAgICAgICAgICAgICAgICAiQWRkcmVzczEiOiBiYS5hZGRyZXNzMSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvdW50cnkiOiBiYS5jb3VudHJ5KCksDQogICAgICAgICAgICAgICAgICAgICAgICAiQ2l0eSI6IGJhLmNpdHkoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdGF0ZSI6IGJhLnN0YXRlKCksDQogICAgICAgICAgICAgICAgICAgICAgICAiWmlwUG9zdGFsQ29kZSI6IGJhLnppcFBvc3RhbENvZGUoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogYmEuZXh0ZXJuYWxJZCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlBhcnR5SWQiOiBiYS5leHRlcm5hbElkKCkNCiAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhICs9ICIsIjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGRhdGEgKz0gJyJCaWxsaW5nQWRkcmVzcyI6JyArIEpTT04uc3RyaW5naWZ5KGJpbGxpbmdBZGRyZXNzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoc2VsZi5naWZ0Q2FyZFBheW1lbnQoKS5pc0FkZGVkKCkpIHsNCiAgICAgICAgICAgIHZhciBnaWZ0Q2FyZCA9IHsNCiAgICAgICAgICAgICAgICAiUGF5bWVudE1ldGhvZElEIjogc2VsZi5naWZ0Q2FyZFBheW1lbnQoKS5naWZ0Q2FyZE51bWJlcigpLA0KICAgICAgICAgICAgICAgICJBbW91bnQiOiBzZWxmLnRvQ3VsdHVyZU51bWJlclN0cmluZyhzZWxmLmdpZnRDYXJkUGF5bWVudCgpLmdpZnRDYXJkQW1vdW50UmF3VmFsdWUoKSkNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgICBkYXRhICs9ICIsIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZGF0YSArPSAnIkdpZnRDYXJkUGF5bWVudCI6JyArIEpTT04uc3RyaW5naWZ5KGdpZnRDYXJkKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGRhdGEgKz0gIn0iOw0KDQogICAgICAgICQoIi50by1jb25maXJtLWJ1dHRvbiIpLmJ1dHRvbignbG9hZGluZycpOw0KICAgICAgICBNZXNzYWdlQ29udGV4dC5DbGVhckFsbE1lc3NhZ2VzKCk7DQoNCiAgICAgICAgQWpheFNlcnZpY2UuUG9zdCgiL2FwaS9jeGEvY2hlY2tvdXQvU2V0UGF5bWVudE1ldGhvZHMiLCBKU09OLnBhcnNlKGRhdGEpLCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICBpZiAoZGF0YS5TdWNjZXNzICYmIHN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGEuTmV4dFBhZ2VMaW5rDQogICAgICAgICAgICB9DQogICAgICAgICAgICAkKCIudG8tY29uZmlybS1idXR0b24iKS5idXR0b24oJ3Jlc2V0Jyk7DQogICAgICAgIH0sICQodGhpcykpOw0KICAgIH0NCg0KICAgIHNlbGYuc2V0dXBQYWdlID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAkKCcuZXhpc3RpbmctcGF5bWVudC1yZXNldC1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICBzZWxmLmNyZWRpdENhcmRQYXltZW50KCkuY2hhbmdlUGF5bWVudCh0cnVlKTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgc2VsZi5nb1RvTmV4dFBhZ2VDbGljayA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2VsZi5zZXRQYXltZW50TWV0aG9kcygpOw0KICAgIH0NCg0KICAgIHNlbGYuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uIChpZCkgew0KICAgICAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYudXNlckFkZHJlc3NlcygpLCBmdW5jdGlvbiAoYSkgew0KICAgICAgICAgICAgaWYgKGEuZXh0ZXJuYWxJZCgpID09PSBpZCAmJiBpZCAhPT0gIlVzZU90aGVyIikgew0KICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgIH07DQoNCiAgICBzZWxmLmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChDWEFBcHBsaWNhdGlvbi5Jc0V4cGVyaWVuY2VFZGl0b3JNb2RlKCkpIHsNCiAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0TW9ja0RhdGEoKTsNCiAgICAgICAgICAgIGluaXRNb2RlbERhdGEoZGF0YSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBBamF4U2VydmljZS5Qb3N0KCIvYXBpL2N4YS9jaGVja291dC9HZXRCaWxsaW5nRGF0YSIsIG51bGwsIGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBzZW5kZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbml0TW9kZWxEYXRhKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KDQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGdldE1vY2tEYXRhKCkgew0KICAgICAgICB2YXIgbW9ja0RhdGEgPSB7DQogICAgICAgICAgICAiQ3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yIjogbnVsbCwNCiAgICAgICAgICAgICJDdXJyZW5jeUdyb3VwU2VwYXJhdG9yIjogbnVsbCwNCiAgICAgICAgICAgICJQYXltZW50T3B0aW9ucyI6IG51bGwsDQogICAgICAgICAgICAiUGF5bWVudENsaWVudFRva2VuIjogbnVsbCwNCiAgICAgICAgICAgICJQYXltZW50TWV0aG9kcyI6IG51bGwsDQogICAgICAgICAgICAiSGFzRGlnaXRhbFByb2R1Y3QiOiBmYWxzZSwNCiAgICAgICAgICAgICJDYXJ0IjogbnVsbCwNCiAgICAgICAgICAgICJDdXJyZW5jeUNvZGUiOiBudWxsLA0KICAgICAgICAgICAgIklzVXNlckF1dGhlbnRpY2F0ZWQiOiBmYWxzZSwNCiAgICAgICAgICAgICJVc2VyRW1haWwiOiBudWxsLA0KICAgICAgICAgICAgIkNvdW50cmllcyI6IG51bGwsDQogICAgICAgICAgICAiVXNlckFkZHJlc3NlcyI6IG51bGwsDQogICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAiSW5mbyI6IFtdLA0KICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAiSGFzSW5mbyI6IGZhbHNlLA0KICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAiVXJsIjogbnVsbCwNCiAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICJEYXRhIjogbnVsbCwNCiAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICJSZWN1cnNpb25MaW1pdCI6IG51bGwNCiAgICAgICAgfTsNCiAgICAgICAgcmV0dXJuIG1vY2tEYXRhOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGluaXRNb2RlbERhdGEoZGF0YSkgew0KDQogICAgICAgIGlmIChkYXRhLkNvdW50cmllcyAhPSBudWxsKSB7DQogICAgICAgICAgICAkLmVhY2goZGF0YS5Db3VudHJpZXMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICBzZWxmLmNvdW50cmllcy5wdXNoKG5ldyBDb3VudHJ5KHZhbHVlLCBpbmRleCkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBzZWxmLmNhcnQobmV3IENhcnRWaWV3TW9kZWwoZGF0YS5DYXJ0KSk7DQoNCiAgICAgICAgLy8gU2V0IHRoZSBzaGlwcGluZyBhZGRyZXNzLiBOZWVkZWQgZm9yIHNhbWUgYXMgc2hpcHBpbmcuDQogICAgICAgIGlmIChzZWxmLmNhcnQoKS5zaGlwbWVudHMubGVuZ3RoID09IDEpIHsNCiAgICAgICAgICAgIHZhciBwYXJ0eUlkID0gc2VsZi5jYXJ0KCkuc2hpcG1lbnRzWzBdLnBhcnR5SWQ7DQogICAgICAgICAgICB2YXIgcGFydHkgPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYuY2FydCgpLnBhcnRpZXMsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgaWYgKGEuZXh0ZXJuYWxJZCgpID09PSBwYXJ0eUlkKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGlmIChwYXJ0eSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ0FkZHJlc3MocGFydHkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2VsZi5wYXltZW50Q2xpZW50VG9rZW4oZGF0YS5QYXltZW50Q2xpZW50VG9rZW4pOw0KDQogICAgICAgIGlmIChkYXRhLklzVXNlckF1dGhlbnRpY2F0ZWQgPT09IHRydWUgJiYgZGF0YS5Vc2VyQWRkcmVzc2VzLkFkZHJlc3NlcyAhPSBudWxsKSB7DQogICAgICAgICAgICAkLmVhY2goZGF0YS5Vc2VyQWRkcmVzc2VzLkFkZHJlc3NlcywgZnVuY3Rpb24gKGluZGV4LCBhZGRyZXNzKSB7DQogICAgICAgICAgICAgICAgaWYgKChhZGRyZXNzLmV4dGVybmFsSWQgPT09ICdVc2VTaGlwcGluZycgJiYgJHJvb3QuaXNTaGlwQWxsKCkpIHx8IChhZGRyZXNzLmV4dGVybmFsSWQgIT09ICdVc2VTaGlwcGluZycpKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYudXNlckFkZHJlc3Nlcy5wdXNoKG5ldyBBZGRyZXNzVmlld01vZGVsKHRoaXMpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgc2VsZi5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2hlY2tpbmcgaWYgdGhlIGNhcnQgY29udGFpbnMgYSBkaWdpdGFsIHByb2R1Y3QgIkhhc0RpZ2l0YWxQcm9kdWN0Ig0KICAgICAgICAvLyBpZiB0cnVlIHRoZW4gdGhlICJTYW1lIGFzIHNoaXBwaW5nIGFkZHJlc3MiIHdpbGwgbm90IGJlIGF2YWlsYWJsZSANCiAgICAgICAgLy8gZWxzZSBpdCB3aWxsIGJlIGFkZGVkIHRvIG5pbGxpbmcgYWRkcmVzcyBsaXN0DQogICAgICAgIHNlbGYuaGFzRGlnaXRhbFByb2R1Y3RzSW5DYXJ0ID0gZGF0YS5IYXNEaWdpdGFsUHJvZHVjdDsNCiAgICAgICAgaWYgKCFzZWxmLmhhc0RpZ2l0YWxQcm9kdWN0c0luQ2FydCkgew0KICAgICAgICAgICAgc2VsZi51c2VyQWRkcmVzc2VzLnB1c2gobmV3IEFkZHJlc3NWaWV3TW9kZWwoeyAiRXh0ZXJuYWxJZCI6ICJVc2VTaGlwcGluZyIsICJGdWxsQWRkcmVzcyI6ICQoIi5zZWxlY3QtYmlsbGluZy1hZGRyZXNzIikuYXR0cigidGl0bGUiKSB9KSk7DQogICAgICAgIH0NCg0KICAgICAgICBzZWxmLnVzZXJFbWFpbCA9IGRhdGEuVXNlckVtYWlsOw0KICAgICAgICBzZWxmLmJpbGxpbmdFbWFpbChkYXRhLlVzZXJFbWFpbCk7DQogICAgICAgIHNlbGYuYmlsbGluZ0NvbmZpcm1FbWFpbChkYXRhLlVzZXJFbWFpbCk7DQoNCiAgICAgICAgICAgICAgICBzZWxmLmN1bHR1cmVEZWNpbWFsU2VwYXJhdG9yKGRhdGEuQ3VsdHVyZURlY2ltYWxTZXBhcmF0b3IpOw0KICAgICAgICAgICAgICAgIHNlbGYuY3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKGRhdGEuQ3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKTsNCiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbmN5R3JvdXBTZXBhcmF0b3IoZGF0YS5DdXJyZW5jeUdyb3VwU2VwYXJhdG9yKQ0KDQogICAgICAgICAgICAgICAgY3VycmVudE51bWJlclZhbGlkYXRvciA9IGtvLnZhbGlkYXRpb24ucnVsZXMubnVtYmVyLnZhbGlkYXRvcjsNCiAgICAgICAgICAgICAgICBrby52YWxpZGF0aW9uLnJ1bGVzLm51bWJlci52YWxpZGF0b3IgPSBmdW5jdGlvbiAobiwgdCkgew0KICAgICAgICAgICAgICAgICAgICBuID0gbi5yZXBsYWNlKHNlbGYuY3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKCksICIuIik7DQoNCiAgICAgICAgICAgIHJldHVybiBjdXJyZW50TnVtYmVyVmFsaWRhdG9yKG4sIHQpICYmICQuaXNOdW1lcmljKG4pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGRhdGEuUGF5bWVudE9wdGlvbnMgIT0gbnVsbCkgew0KICAgICAgICAgICAgJC5lYWNoKGRhdGEuUGF5bWVudE9wdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICBpZiAodmFsdWUuUGF5bWVudE9wdGlvblR5cGVOYW1lID09PSAiUGF5RmVkZXJhdGVkUGF5bWVudCIpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlGZWRlcmF0ZWRQYXltZW50KHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodmFsdWUuUGF5bWVudE9wdGlvblR5cGVOYW1lID09PSAiUGF5R2lmdENhcmQiKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYucGF5R2lmdENhcmQodHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoZGF0YS5QYXltZW50TWV0aG9kcyAhPSBudWxsKSB7DQogICAgICAgICAgICBzZWxmLnBheW1lbnRNZXRob2RzLnB1c2gobmV3IFBheW1lbnRNZXRob2QoIjAiLCAkKCIjUGF5bWVudE1ldGhvZHMiKS5hdHRyKCJ0aXRsZSIpKSk7DQogICAgICAgICAgICAkLmVhY2goZGF0YS5QYXltZW50TWV0aG9kcywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgew0KICAgICAgICAgICAgICAgIHNlbGYucGF5bWVudE1ldGhvZHMucHVzaChuZXcgUGF5bWVudE1ldGhvZCh2YWx1ZS5FeHRlcm5hbElkLCB2YWx1ZS5EZXNjcmlwdGlvbikpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBzZWxmLmlzU2hpcEFsbCgoZGF0YS5DYXJ0ICE9IG51bGwgJiYgZGF0YS5DYXJ0LlNoaXBtZW50cyAhPSBudWxsICYmIGRhdGEuQ2FydC5TaGlwbWVudHMubGVuZ3RoID09IDEpID8gdHJ1ZSA6IGZhbHNlKTsNCg0KICAgICAgICBpZiAoc2VsZi5wYXltZW50Q2xpZW50VG9rZW4oKSAhPSBudWxsKSB7DQogICAgICAgICAgICB2YXIgdmFsaWRhdGlvbkJ1dHRvblRleHQgPSAkKCIudmFsaWRhdGUtcGF5bWVudC1idG4iKS50ZXh0KCk7DQogICAgICAgICAgICB2YXIgY2xpZW50VG9rZW4gPSBzZWxmLnBheW1lbnRDbGllbnRUb2tlbigpOw0KICAgICAgICAgICAgaWYgKGNsaWVudFRva2VuLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBicmFpbnRyZWUuc2V0dXAoY2xpZW50VG9rZW4sICdkcm9waW4nLCB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2Ryb3Bpbi1jb250YWluZXInLA0KICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kTm9uY2VSZWNlaXZlZDogZnVuY3Rpb24gKGV2ZW50LCBub25jZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vbmNlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmRQYXltZW50UmVzdWx0QWNjZXNzQ29kZSA9IG5vbmNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FyZFBheW1lbnRBY2NlcHRDYXJkUHJlZml4ID0gInBheXBhbCI7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jcmVkaXRDYXJkUGF5bWVudCgpICE9IG51bGwgJiYgc2VsZi5lZGl0TW9kZSgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlZGl0Q2FyZFBheW1lbnQoKS5leGlzdGluZ1BheW1lbnRBbW91bnQoc2VsZi5jcmVkaXRDYXJkUGF5bWVudCgpLmNyZWRpdENhcmRBbW91bnQoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlZGl0Q2FyZFBheW1lbnQoKS5jaGFuZ2VQYXltZW50KGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICQoIi52YWxpZGF0ZS1wYXltZW50LWJ0biIpLmFkZENsYXNzKCJ2YWxpZCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJCgiLnZhbGlkYXRlLXBheW1lbnQtYnRuIikudGV4dCh2YWxpZGF0aW9uQnV0dG9uVGV4dCk7DQoNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogZnVuY3Rpb24oZGF0YSl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnR5cGUgPT0gIlZBTElEQVRJT04iKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRldGFpbHMuaW52YWxpZEZpZWxkcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEubWVzc2FnZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRldGFpbHMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChkYXRhLkNhcnQgIT0gbnVsbCAmJiBkYXRhLkNhcnQuQWNjb3VudGluZ1BhcnR5ICE9IG51bGwpIHsNCiAgICAgICAgICAgIHZhciBwYXJ0eUlkID0gZGF0YS5DYXJ0LkFjY291bnRpbmdQYXJ0eS5QYXJ0eUlEOw0KICAgICAgICAgICAgdmFyIHBhcnR5ID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLmNhcnQoKS5wYXJ0aWVzLCBmdW5jdGlvbiAoYSkgew0KICAgICAgICAgICAgICAgIGlmIChhLmV4dGVybmFsSWQoKSA9PT0gcGFydHlJZCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBpZiAocGFydHkgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHNlbGYuYmlsbGluZ0FkZHJlc3MocGFydHkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGRhdGEuQ2FydCAhPSBudWxsICYmIGRhdGEuQ2FydC5QYXltZW50cyAhPSBudWxsICYmIGRhdGEuQ2FydC5QYXltZW50cy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICB2YXIgZ2lmdENhcmRBZGRlZCA9IGZhbHNlOw0KICAgICAgICAgICAgdmFyIGZlZFBheW1lbnRBZGRlZCA9IGZhbHNlOw0KICAgICAgICAgICAgJC5lYWNoKGRhdGEuQ2FydC5QYXltZW50cywgZnVuY3Rpb24gKGluZGV4LCBWYWx1ZSkgew0KICAgICAgICAgICAgICAgIGlmIChWYWx1ZS5QYXltZW50VHlwZSA9PSBQYXltZW50VHlwZXMuRmVkZXJhdGVkUGF5bWVudCkgew0KICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWRpdENhcmRQYXltZW50KG5ldyBDcmVkaXRDYXJkUGF5bWVudFZpZXdNb2RlbChWYWx1ZSwgc2VsZikpOw0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBheUZlZGVyYXRlZFBheW1lbnQodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuY2FyZFBheW1lbnRSZXN1bHRBY2Nlc3NDb2RlID0gVmFsdWUuQ2FyZFRva2VuOw0KICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmRQYXltZW50QWNjZXB0Q2FyZFByZWZpeCA9ICJwYXlwYWwiOw0KICAgICAgICAgICAgICAgICAgICBmZWRQYXltZW50QWRkZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChWYWx1ZS5QYXltZW50VHlwZSA9PSBQYXltZW50VHlwZXMuR2lmdENhcmQpIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5naWZ0Q2FyZFBheW1lbnQoKS5hZGRHaWZ0Q2FyZChWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHNlbGYucGF5R2lmdENhcmQodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIGdpZnRDYXJkQWRkZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBzZWxmLmVkaXRNb2RlKGZlZFBheW1lbnRBZGRlZCB8fCBnaWZ0Q2FyZEFkZGVkKTsNCg0KICAgICAgICAgICAgaWYgKGZlZFBheW1lbnRBZGRlZCkgew0KICAgICAgICAgICAgICAgICQoIi5jY3BheW1lbnQiKS50cmlnZ2VyKCJjbGljayIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZ2lmdENhcmRBZGRlZCkgew0KICAgICAgICAgICAgICAgICQoIi5naWZ0Q2FyZFBheW1lbnQiKS50cmlnZ2VyKCJjbGljayIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2VsZi5zZXR1cFBhZ2UoKTsNCiAgICB9DQp9
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 25248
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: da
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T144939Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T144938Z
- Language: "fr-CA"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T144940Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: "ja-JP"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20190311T144940Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
