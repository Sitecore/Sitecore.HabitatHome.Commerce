---
ID: "41cc2aec-4b7b-4665-98d4-94c7275d96d2"
Parent: "28d0286e-5ee1-4be0-9aee-41d76fa2f651"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat SXA Sites/Habitat Home Store/scripts/components/Cart/habitathome-feature-cart-delivery-model"
DB: master
SharedFields:
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "97a219ac-df5d-47b5-9ed0-6387cfa4276f"
  Value: 77u/Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIENvcHlyaWdodCAyMDE2IFNpdGVjb3JlIENvcnBvcmF0aW9uIEEvUw0KLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUNCi8vIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KLy8gICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQovLw0KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUNCi8vIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsDQovLyBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMNCi8vIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KdmFyIHNoaXBwaW5nTWV0aG9kc0FycmF5ID0gW107DQp2YXIgbWV0aG9kc1ZpZXdNb2RlbCA9IG51bGw7DQp2YXIgbWV0aG9kID0gbnVsbDsNCg0KZnVuY3Rpb24gRGVsaXZlcnlEYXRhVmlld01vZGVsKCkgew0KICAgIHZhciBzZWxmID0gdGhpczsNCiAgICB2YXIgbW9kZWxDYXJ0TGluZXM7DQogICAgc2VsZi5jYXJ0ID0ga28ub2JzZXJ2YWJsZSgiIik7DQoNCiAgICB2YXIgQ291bnRyeSA9IGZ1bmN0aW9uIChuYW1lLCBjb2RlKSB7DQogICAgICAgIHRoaXMuY291bnRyeSA9IG5hbWU7DQogICAgICAgIHRoaXMuY29kZSA9IGNvZGU7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGlzSXRlbVZhbGlkKGVsZW1lbnQsIGluZGV4LCBhcnJheSkgew0KICAgICAgICByZXR1cm4gZWxlbWVudCA9PT0gdHJ1ZTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRTaGlwcGluZ01ldGhvZHNNb2NrRGF0YSgpIHsNCiAgICAgICAgdmFyIG1vY2tEYXRhID0gew0KICAgICAgICAgICAgIlNoaXBwaW5nTWV0aG9kcyI6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjY1YTlhZTY5LTc3ZjgtNDUzMC1iNWJhLWJkZTA2MTVjYmMyOCIsDQogICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJOZXh0IERheSBBaXIiLA0KICAgICAgICAgICAgICAgICAgICAiTmFtZSI6ICJOZXh0IERheSBBaXIiLA0KICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdPcHRpb25JZCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJTaG9wTmFtZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogImIxNDY2MjJkLWRjODYtNDhhMy1iNzJhLTA1ZWU4ZmZkMTg3YSIsDQogICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJHcm91bmQiLA0KICAgICAgICAgICAgICAgICAgICAiTmFtZSI6ICJHcm91bmQiLA0KICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdPcHRpb25JZCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJTaG9wTmFtZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogImNmMGFmODJhLWUxYjgtNDVjMi05MWRiLTdiOTg0N2FmMjg3YyIsDQogICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJTdGFuZGFyZCIsDQogICAgICAgICAgICAgICAgICAgICJOYW1lIjogIlN0YW5kYXJkIiwNCiAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9uSWQiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiU2hvcE5hbWUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAiRXh0ZXJuYWxJZCI6ICJkNTkzMDM0MC1jMWRkLTQ4MmMtYjk3Mi01MGE5MjUwYmI3YTYiLA0KICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiU3RhbmRhcmQgT3Zlcm5pZ2h0IiwNCiAgICAgICAgICAgICAgICAgICAgIk5hbWUiOiAiU3RhbmRhcmQgT3Zlcm5pZ2h0IiwNCiAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9uSWQiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiU2hvcE5hbWUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICAiTGluZVNoaXBwaW5nTWV0aG9kcyI6IG51bGwsDQogICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAiSW5mbyI6IFtdLA0KICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAiSGFzSW5mbyI6IGZhbHNlLA0KICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAiVXJsIjogbnVsbCwNCiAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICJEYXRhIjogbnVsbCwNCiAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICJSZWN1cnNpb25MaW1pdCI6IG51bGwNCiAgICAgICAgfTsNCg0KICAgICAgICByZXR1cm4gbW9ja0RhdGE7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0TWluaVByb2R1Y3RNb2NrSW1hZ2UoKSB7DQogICAgICAgIHZhciBpbWFnZVNyYyA9ICIiOw0KICAgICAgICB2YXIgcGFnZUV4dGVuc2lvbiA9IGdldEN1cnJlbnRQYWdlRXh0ZW5zaW9uKCk7DQogICAgICAgIHZhciB0ZW5hbnRBbmRTaXRlTmFtZXMgPSBnZXRDdXJyZW50VGVuYW50QW5kU2l0ZU5hbWUoKTsNCiAgICAgICAgaWYgKHBhZ2VFeHRlbnNpb24gPT09ICJodG1sIikgew0KICAgICAgICAgICAgaW1hZ2VTcmMgPQ0KICAgICAgICAgICAgICAgICItL21lZGlhL1Byb2plY3QvIiArIHRlbmFudEFuZFNpdGVOYW1lcy5UZW5hbnQgKyAiLyIgKyB0ZW5hbnRBbmRTaXRlTmFtZXMuU2l0ZSArICIvUGxhY2Vob2xkZXIgSW1hZ2VzLzcyeDcyLnBuZyI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbWFnZVNyYyA9DQogICAgICAgICAgICAgICAgIi9zaXRlY29yZS9zaGVsbC8tL21lZGlhL0ZlYXR1cmUvRXhwZXJpZW5jZSUyMEFjY2VsZXJhdG9yL0NvbW1lcmNlL0NhdGFsb2cvNzJ4NzIucG5nP2g9NzImdz03MiI7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGltYWdlU3JjOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldERlbGl2ZXJ5TW9ja0RhdGEoKSB7DQogICAgICAgIHZhciBwcm9kdWN0TW9ja0ltYWdlID0gZ2V0TWluaVByb2R1Y3RNb2NrSW1hZ2UoKTsNCiAgICAgICAgdmFyIG1vY2tEYXRhID0gew0KICAgICAgICAgICAgIk9yZGVyU2hpcHBpbmdPcHRpb25zIjoNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjM4MTdmOGQ1LTk5NGItNGZiYy04YmJlLTRjMzQyZWM3NTUzYSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiU2hpcCBpdGVtcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTmFtZSI6ICJTaGlwIGl0ZW1zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvblR5cGUiOiB7ICJWYWx1ZSI6IDEsICJOYW1lIjogIlNoaXBUb0FkZHJlc3MiIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAiU2hvcE5hbWUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjM4NzhiNTAyLTg1YWMtNDFiNS05MjAzLWUwZjg3MTJhODU0YiIsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiRGlnaXRhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTmFtZSI6ICJEaWdpdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvblR5cGUiOiB7ICJWYWx1ZSI6IDMsICJOYW1lIjogIkVsZWN0cm9uaWNEZWxpdmVyeSIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaG9wTmFtZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiSW5mbyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiSGFzSW5mbyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAiVXJsIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJEYXRhIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJSZWN1cnNpb25MaW1pdCI6IG51bGwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgIkV4dGVybmFsSWQiOiAiMmZiMDEyOGUtZmJiZC00ZmNlLTkxOTctZjAwMGQ4ZDM5ZjVjIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJTZWxlY3QgZGVsaXZlcnkgb3B0aW9ucyBieSBpdGVtIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJOYW1lIjogIlNlbGVjdCBkZWxpdmVyeSBvcHRpb25zIGJ5IGl0ZW0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9uVHlwZSI6IHsgIlZhbHVlIjogNCwgIk5hbWUiOiAiRGVsaXZlckl0ZW1zSW5kaXZpZHVhbGx5IiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNob3BOYW1lIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICJMaW5lU2hpcHBpbmdPcHRpb25zIjoNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJMaW5lSWQiOiAiYWNkOTQ3NGI4MjQ3NDZmOTkzYzIyNTgyODA3MThmMTkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9ucyI6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjM4MTdmOGQ1LTk5NGItNGZiYy04YmJlLTRjMzQyZWM3NTUzYSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJTaGlwIGl0ZW1zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5hbWUiOiAiU2hpcCBpdGVtcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvblR5cGUiOiB7ICJWYWx1ZSI6IDEsICJOYW1lIjogIlNoaXBUb0FkZHJlc3MiIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTaG9wTmFtZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiTGluZUlkIjogIjcyNjA3M2QzNDhiNDRlZGViOTZmMWViMWJmZjE4OTBkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvbnMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXh0ZXJuYWxJZCI6ICIzODc4YjUwMi04NWFjLTQxYjUtOTIwMy1lMGY4NzEyYTg1NGIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiRGlnaXRhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOYW1lIjogIkRpZ2l0YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdPcHRpb25UeXBlIjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogMywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOYW1lIjogIkVsZWN0cm9uaWNEZWxpdmVyeSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNob3BOYW1lIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW5mbyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGFzSW5mbyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVXJsIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEYXRhIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWN1cnNpb25MaW1pdCI6IG51bGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgIkVtYWlsRGVsaXZlcnlNZXRob2QiOg0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjhhMjMyMzRmLTgxNjMtNDYwOS1iZDMyLTMyZDlkZDZlMzJmNSIsDQogICAgICAgICAgICAgICAgIkRlc2NyaXB0aW9uIjogIkVtYWlsIiwNCiAgICAgICAgICAgICAgICAiTmFtZSI6ICJFbWFpbCIsDQogICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9uSWQiOiBudWxsLA0KICAgICAgICAgICAgICAgICJTaG9wTmFtZSI6IG51bGwsDQogICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgIldhcm5pbmdzIjogW10sDQogICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgIkhhc1dhcm5pbmdzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICJDb250ZW50RW5jb2RpbmciOiBudWxsLA0KICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICJKc29uUmVxdWVzdEJlaGF2aW9yIjogMSwNCiAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJDYXJ0Ijogew0KICAgICAgICAgICAgICAgICJMaW5lcyI6IFsNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgIkV4dGVybmFsQ2FydExpbmVJZCI6ICI3MjYwNzNkMzQ4YjQ0ZWRlYjk2ZjFlYjFiZmYxODkwZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2UiOiBwcm9kdWN0TW9ja0ltYWdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRpc3BsYXlOYW1lIjogIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciIsDQogICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdFVybCI6ICIvIyIsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29sb3JJbmZvcm1hdGlvbiI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiU2l6ZUluZm9ybWF0aW9uIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdHlsZUluZm9ybWF0aW9uIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJHaWZ0Q2FyZEFtb3VudEluZm9ybWF0aW9uIjogIiQwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJRdWFudGl0eSI6ICIxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJMaW5lUHJpY2UiOiAiMC4wMCBVU0QiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmVUb3RhbCI6ICIwLjAwIFVTRCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiUHJvcGVydGllcyI6IHsgIkxvcmVtIjogImlwc3VtIiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nT3B0aW9ucyI6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogIjM4NzhiNTAyLTg1YWMtNDFiNS05MjAzLWUwZjg3MTJhODU0YiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEZXNjcmlwdGlvbiI6ICJEaWdpdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk5hbWUiOiAiRGlnaXRhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvblR5cGUiOiB7ICJWYWx1ZSI6IDMsICJOYW1lIjogIkVsZWN0cm9uaWNEZWxpdmVyeSIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNob3BOYW1lIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW5mbyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGFzSW5mbyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVXJsIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEYXRhIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWN1cnNpb25MaW1pdCI6IG51bGwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRpc2NvdW50T2ZmZXJOYW1lcyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmVEaXNjb3VudCI6ICIwLjAwIFVTRCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiUHJvZHVjdElkIjogIjAwMDAwMDAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nTWV0aG9kTmFtZSI6ICJFdGlhbSByaG9uY3VzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBZGRyZXNzIjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBZGRyZXNzMSI6ICJNYXVyaXMgZWdldCBsYWN1cyBzZWQgZG9sb3Igdml2ZXJyYSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNpdHkiOiAiRXRpYW0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTdGF0ZSI6ICJJbiBncmF2aWRhIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiWmlwUG9zdGFsQ29kZSI6ICI5OTk5OSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvdW50cnkiOiAiTmFtIHB1bHZpbmFyIg0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAiRXh0ZXJuYWxDYXJ0TGluZUlkIjogImUwNjIwMmFjZGNkZjQ4NzY4MWE5NDQxODNlYmRhNzk1IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZSI6IHByb2R1Y3RNb2NrSW1hZ2UsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGlzcGxheU5hbWUiOiAiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWN0VXJsIjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNvbG9ySW5mb3JtYXRpb24iOiAiZG9sb3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNpemVJbmZvcm1hdGlvbiI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiU3R5bGVJbmZvcm1hdGlvbiI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiR2lmdENhcmRBbW91bnRJbmZvcm1hdGlvbiI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiUXVhbnRpdHkiOiAiMSIsDQogICAgICAgICAgICAgICAgICAgICAgICAiTGluZVByaWNlIjogIjAuMDAgVVNEIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJMaW5lVG90YWwiOiAiMC4wMCBVU0QiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlByb3BlcnRpZXMiOiB7ICJMb3JlbSI6ICJpcHN1bSIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ09wdGlvbnMiOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXh0ZXJuYWxJZCI6ICIzODE3ZjhkNS05OTRiLTRmYmMtOGJiZS00YzM0MmVjNzU1M2EiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGVzY3JpcHRpb24iOiAiU2hpcCBpdGVtcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOYW1lIjogIlNoaXAgaXRlbXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdPcHRpb25UeXBlIjogeyAiVmFsdWUiOiAxLCAiTmFtZSI6ICJTaGlwVG9BZGRyZXNzIiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2hvcE5hbWUiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgICAgICAiRGlzY291bnRPZmZlck5hbWVzIjogW10sDQogICAgICAgICAgICAgICAgICAgICAgICAiTGluZURpc2NvdW50IjogIjAuMDAgVVNEIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm9kdWN0SWQiOiAiMDAwMDAwMCIsDQogICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdNZXRob2ROYW1lIjogIkV0aWFtIHJob25jdXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkFkZHJlc3MiOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFkZHJlc3MxIjogIk1hdXJpcyBlZ2V0IGxhY3VzIHNlZCBkb2xvciB2aXZlcnJhIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2l0eSI6ICJFdGlhbSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN0YXRlIjogIkluIGdyYXZpZGEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJaaXBQb3N0YWxDb2RlIjogIjk5OTk5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ291bnRyeSI6ICJOYW0gcHVsdmluYXIiDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9ycyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJXYXJuaW5ncyI6IFtdLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0Vycm9ycyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJIYXNXYXJuaW5ncyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN1Y2Nlc3MiOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudEVuY29kaW5nIjogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50VHlwZSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiSnNvblJlcXVlc3RCZWhhdmlvciI6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAiTWF4SnNvbkxlbmd0aCI6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICJFbWFpbCI6ICIiLA0KICAgICAgICAgICAgICAgICJTdWJ0b3RhbCI6ICIwLjAwIFVTRCIsDQogICAgICAgICAgICAgICAgIlRheFRvdGFsIjogIjAuMDAgVVNEIiwNCiAgICAgICAgICAgICAgICAiVG90YWwiOiAiMC4wMCBVU0QiLA0KICAgICAgICAgICAgICAgICJTaGlwcGluZ1RvdGFsIjogIjAuMDAgVVNEIiwNCiAgICAgICAgICAgICAgICAiVG90YWxBbW91bnQiOiAwLjAwLA0KICAgICAgICAgICAgICAgICJTaGlwbWVudHMiOiBbXSwNCiAgICAgICAgICAgICAgICAiUGF5bWVudHMiOiBbXSwNCiAgICAgICAgICAgICAgICAiUGFydGllcyI6IFtdLA0KICAgICAgICAgICAgICAgICJBY2NvdW50aW5nUGFydHkiOiBudWxsLA0KICAgICAgICAgICAgICAgICJEaXNjb3VudCI6ICIwLjAwIFVTRCIsDQogICAgICAgICAgICAgICAgIlByb21vQ29kZXMiOiBbXSwNCiAgICAgICAgICAgICAgICAiRXJyb3JzIjogW10sDQogICAgICAgICAgICAgICAgIkluZm8iOiBbXSwNCiAgICAgICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICAgICAiSGFzRXJyb3JzIjogZmFsc2UsDQogICAgICAgICAgICAgICAgIkhhc0luZm8iOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAiU3VjY2VzcyI6IHRydWUsDQogICAgICAgICAgICAgICAgIlVybCI6IG51bGwsDQogICAgICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAgICAgIkNvbnRlbnRUeXBlIjogbnVsbCwNCiAgICAgICAgICAgICAgICAiRGF0YSI6IG51bGwsDQogICAgICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgICAgICJNYXhKc29uTGVuZ3RoIjogbnVsbCwNCiAgICAgICAgICAgICAgICAiUmVjdXJzaW9uTGltaXQiOiBudWxsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgIkN1cnJlbmN5Q29kZSI6ICJVU0QiLA0KICAgICAgICAgICAgIklzVXNlckF1dGhlbnRpY2F0ZWQiOiBmYWxzZSwNCiAgICAgICAgICAgICJVc2VyRW1haWwiOiAiIiwNCiAgICAgICAgICAgICJDb3VudHJpZXMiOiB7ICJDQSI6ICJDYW5hZGEiLCAiVVMiOiAiVW5pdGVkIFN0YXRlcyIgfSwNCiAgICAgICAgICAgICJVc2VyQWRkcmVzc2VzIjogbnVsbCwNCiAgICAgICAgICAgICJFcnJvcnMiOiBbXSwNCiAgICAgICAgICAgICJJbmZvIjogW10sDQogICAgICAgICAgICAiV2FybmluZ3MiOiBbXSwNCiAgICAgICAgICAgICJIYXNFcnJvcnMiOiBmYWxzZSwNCiAgICAgICAgICAgICJIYXNJbmZvIjogZmFsc2UsDQogICAgICAgICAgICAiSGFzV2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICJTdWNjZXNzIjogdHJ1ZSwNCiAgICAgICAgICAgICJVcmwiOiBudWxsLA0KICAgICAgICAgICAgIkNvbnRlbnRFbmNvZGluZyI6IG51bGwsDQogICAgICAgICAgICAiQ29udGVudFR5cGUiOiBudWxsLA0KICAgICAgICAgICAgIkRhdGEiOiBudWxsLA0KICAgICAgICAgICAgIkpzb25SZXF1ZXN0QmVoYXZpb3IiOiAxLA0KICAgICAgICAgICAgIk1heEpzb25MZW5ndGgiOiBudWxsLA0KICAgICAgICAgICAgIlJlY3Vyc2lvbkxpbWl0IjogbnVsbA0KICAgICAgICB9Ow0KDQogICAgICAgIHJldHVybiBtb2NrRGF0YTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpbml0aWFsaXplRGVsaXZlcnlNb2RlbChkYXRhKSB7DQogICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgICBzZWxmLmVtYWlsRGVsaXZlcnlNZXRob2QoZGF0YS5FbWFpbERlbGl2ZXJ5TWV0aG9kKTsNCiAgICAgICAgICAgIHNlbGYuY3VycmVuY3lDb2RlID0gZGF0YS5DdXJyZW5jeUNvZGU7DQoNCiAgICAgICAgICAgIGlmIChkYXRhLkNvdW50cmllcykgew0KICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLkNvdW50cmllcywNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb3VudHJpZXMucHVzaChuZXcgQ291bnRyeSh2YWx1ZSwgaW5kZXgpKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChkYXRhLklzVXNlckF1dGhlbnRpY2F0ZWQgPT09IHRydWUgJiYgZGF0YS5Vc2VyQWRkcmVzc2VzICYmIGRhdGEuVXNlckFkZHJlc3Nlcy5BZGRyZXNzZXMpIHsNCiAgICAgICAgICAgICAgICAkLmVhY2goZGF0YS5Vc2VyQWRkcmVzc2VzLkFkZHJlc3NlcywNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51c2VyQWRkcmVzc2VzLnB1c2gobmV3IEFkZHJlc3NWaWV3TW9kZWwodGhpcykpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHNlbGYuaXNBdXRoZW50aWNhdGVkKHRydWUpOw0KICAgICAgICAgICAgICAgIHNlbGYudXNlckVtYWlsID0gZGF0YS5Vc2VyRW1haWw7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHNlbGYuY2FydChuZXcgRGVsaXZlcnlDYXJ0Vmlld01vZGVsKGRhdGEuQ2FydCwgc2VsZi51c2VyQWRkcmVzc2VzKCkpKTsNCiAgICAgICAgICAgIG1vZGVsQ2FydExpbmVzID0gc2VsZi5jYXJ0KCkuY2FydExpbmVzKCk7DQoNCg0KICAgICAgICAgICAgaWYgKGRhdGEuT3JkZXJTaGlwcGluZ09wdGlvbnMpIHsNCiAgICAgICAgICAgICAgICAkLmVhY2goZGF0YS5PcmRlclNoaXBwaW5nT3B0aW9ucywNCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcmRlclNoaXBwaW5nT3B0aW9ucy5wdXNoKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgQWpheFNlcnZpY2UuUG9zdCgiYXBpL2N4YS9EZWxpdmVyeS9HZXRDdXJyZW50Q2FydCIsICIiLCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEuRGF0YSwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4SWQ7IHZhciBwcm9kSWQ7IHZhciB2YXJJZDsNCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykubWFwKGZ1bmN0aW9uIChpLCBiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiWydLZXknXSA9PSAnRXh0ZXJuYWxDYXJ0TGluZUlkJykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4SWQgPSBiWydWYWx1ZSddOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ1Byb2R1Y3RJZCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kSWQgPSBiWydWYWx1ZSddOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ1ZhcmlhbnRJZCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJJZCA9IGJbJ1ZhbHVlJ107DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLmNhcnQoKS5jYXJ0TGluZXMoKSwgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5leHRlcm5hbENhcnRMaW5lSWQgPT09IGV4SWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldENvb2tpZSgic3hhX3NpdGVfc2hvcHNfc3RvcmVzIikgIT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuR2V0SW52ZW50b3J5KGEsIHByb2RJZCwgdmFySWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5Mb2FkTmVhcmVzdFN0b3JlcyhhLCBwcm9kSWQsIHZhcklkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBzZWxmLmhhbmRsZUVkaXRNb2RlKGRhdGEpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgc2VsZi5jYXJ0ID0ga28ub2JzZXJ2YWJsZSgiIik7DQogICAgc2VsZi5jdXJyZW5jeUNvZGUgPSBrby5vYnNlcnZhYmxlKCIiKTsNCg0KICAgIHNlbGYuY291bnRyaWVzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgc2VsZi5zdGF0ZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pOw0KDQogICAgc2VsZi5pc1NoaXBBbGwgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLmlzU2hpcFRvRW1haWwgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLmlzU2hpcEl0ZW1zID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7DQoNCiAgICBzZWxmLmlzUGlja1VwID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7DQogICAgc2VsZi5waWNrVXBTdG9yZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgICBzZWxmLnBpY2tVcFN0b3JlSWQgPSBrby5vYnNlcnZhYmxlKCIiKTsNCiAgICBzZWxmLnN0b3JlID0ga28ub2JzZXJ2YWJsZShuZXcgTmV3UGlja3VwU3RvcmUoeyAiRXh0ZXJuYWxJZCI6ICIwIiB9KSk7DQogICAgc2VsZi5zdG9yZURlbGl2ZXJ5TWV0aG9kID0ga28ub2JzZXJ2YWJsZSgiIik7DQoNCiAgICBzZWxmLmVtYWlsRGVsaXZlcnlNZXRob2QgPSBrby5vYnNlcnZhYmxlKCIiKTsNCiAgICBzZWxmLm9yZGVyU2hpcHBpbmdPcHRpb25zID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQoNCiAgICBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24gPSBrby5vYnNlcnZhYmxlKCcwJyk7DQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLnN1YnNjcmliZShmdW5jdGlvbiAob3B0aW9uKSB7DQogICAgICAgIHNlbGYuaXNTaGlwQWxsKG9wdGlvbiA9PT0gMSk7DQogICAgICAgIHNlbGYuaXNQaWNrVXAob3B0aW9uID09PSAyKTsNCiAgICAgICAgc2VsZi5pc1NoaXBUb0VtYWlsKG9wdGlvbiA9PT0gMyk7DQogICAgICAgIHNlbGYuaXNTaGlwSXRlbXMob3B0aW9uID09PSA0KTsNCiAgICB9LmJpbmQodGhpcykpOw0KDQogICAgc2VsZi5pc0F1dGhlbnRpY2F0ZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTsNCiAgICBzZWxmLnVzZXJFbWFpbCA9ICIiOw0KDQogICAgc2VsZi51c2VyQWRkcmVzc2VzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7DQogICAgc2VsZi51c2VyQWRkcmVzc2VzLnB1c2gobmV3IEFkZHJlc3NWaWV3TW9kZWwoeyAiRXh0ZXJuYWxJZCI6ICJVc2VTaGlwcGluZyIsICJGdWxsQWRkcmVzcyI6ICQoIiNiaWxsaW5nQWRkcmVzc1NlbGVjdCIpLmF0dHIoInRpdGxlIikgfSkpOw0KICAgIHNlbGYudXNlckFkZHJlc3Nlcy5wdXNoKG5ldyBBZGRyZXNzVmlld01vZGVsKHsgIkV4dGVybmFsSWQiOiAiVXNlT3RoZXIiLCAiRnVsbEFkZHJlc3MiOiAkKCIjU2hpcHBpbmdBZGRyZXNzU2VsZWN0IikuYXR0cigidGl0bGUyIikgfSkpOw0KDQogICAgc2VsZi5zaGlwcGluZ01ldGhvZHMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTsNCiAgICBzZWxmLnBpY2t1cE1ldGhvZCA9IGtvLm9ic2VydmFibGVBcnJheSgpOw0KICAgIHNlbGYuc2hpcHBpbmdNZXRob2QgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCkuZXh0ZW5kKHsgcmVxdWlyZWQ6IHRydWUgfSk7DQoNCiAgICBzZWxmLnNoaXBwaW5nQWRkcmVzcyA9IGtvLnZhbGlkYXRlZE9ic2VydmFibGUobmV3IEFkZHJlc3NWaWV3TW9kZWwoeyAiRXh0ZXJuYWxJZCI6ICIwIiB9KSk7DQogICAgc2VsZi5zaGlwcGluZ0FkZHJlc3NGaWVsZENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2QoIiIpOw0KICAgICAgICBzZWxmLnNoaXBwaW5nTWV0aG9kcy5yZW1vdmVBbGwoKTsNCiAgICB9Ow0KDQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nQWRkcmVzcyA9IGtvLm9ic2VydmFibGUoIlVzZU90aGVyIik7DQogICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nQWRkcmVzcy5zdWJzY3JpYmUoZnVuY3Rpb24gKGlkKSB7DQogICAgICAgIHZhciBtYXRjaCA9IHNlbGYuZ2V0QWRkcmVzcyhpZCk7DQogICAgICAgIHNlbGYuc2hpcHBpbmdNZXRob2QoIiIpOw0KICAgICAgICBzZWxmLnNoaXBwaW5nTWV0aG9kcy5yZW1vdmVBbGwoKTsNCiAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICBzZWxmLnNoaXBwaW5nQWRkcmVzcyhtYXRjaCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzZWxmLnNoaXBwaW5nQWRkcmVzcyhuZXcgQWRkcmVzc1ZpZXdNb2RlbCh7ICJFeHRlcm5hbElkIjogIjAiIH0pKTsNCiAgICAgICAgfQ0KICAgIH0uYmluZCh0aGlzKSk7DQoNCiAgICBzZWxmLnNoaXBwaW5nRW1haWwgPSBrby52YWxpZGF0ZWRPYnNlcnZhYmxlKCkuZXh0ZW5kKHsgcmVxdWlyZWQ6IHRydWUsIGVtYWlsOiB0cnVlIH0pOw0KICAgIHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQgPSBrby5vYnNlcnZhYmxlKCIiKTsNCiAgICBzZWxmLnNldFNlbmRUb01lID0gZnVuY3Rpb24gKGl0ZW0sIGV2ZW50KSB7DQogICAgICAgIHZhciBlbWFpbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuaXMoJzpjaGVja2VkJykgPyBzZWxmLnVzZXJFbWFpbCA6ICIiOw0KICAgICAgICBpdGVtLnNoaXBwaW5nRW1haWwoZW1haWwpOw0KICAgIH07DQoNCiAgICBzZWxmLmVuYWJsZVRvQmlsbGluZyA9IGtvLmNvbXB1dGVkKHsNCiAgICAgICAgcmVhZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHNlbGYuaXNTaGlwVG9FbWFpbCgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc2hpcHBpbmdFbWFpbCgpICYmIHNlbGYuc2hpcHBpbmdFbWFpbC5pc1ZhbGlkKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChzZWxmLmlzU2hpcEFsbCgpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc2hpcHBpbmdNZXRob2QuaXNWYWxpZCgpICYmIHNlbGYuc2hpcHBpbmdBZGRyZXNzLmlzVmFsaWQoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHNlbGYuaXNTaGlwSXRlbXMoKSkgew0KICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gW107DQogICAgICAgICAgICAgICAgJC5lYWNoKHNlbGYuY2FydCgpLmNhcnRMaW5lcygpLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTGluZVNoaXBUb0VtYWlsKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQucHVzaCh0aGlzLnNoaXBwaW5nRW1haWwoKSAmJiB0aGlzLnNoaXBwaW5nRW1haWwuaXNWYWxpZCgpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTGluZVNoaXBBbGwoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZC5wdXNoKHRoaXMuc2hpcHBpbmdNZXRob2QuaXNWYWxpZCgpICYmIHRoaXMuc2hpcHBpbmdBZGRyZXNzLmlzVmFsaWQoKSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpbmVQaWNrVXAoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucFBpY2tVcFN0b3JlID0gJCgnaW5wdXRbbmFtZT1waWNrVXBPcHRpb25zXTpjaGVja2VkJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wUGlja1VwU3RvcmUubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlT2JqZWN0ID0ga28uY29udGV4dEZvcihpbnBQaWNrVXBTdG9yZS5wYXJlbnRzKClbMF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQucHVzaChzdG9yZU9iamVjdC4kZGF0YS5BZGRyZXNzMSAhPSBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQucHVzaChmYWxzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkLmV2ZXJ5KGlzSXRlbVZhbGlkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChzZWxmLmlzUGlja1VwKCkpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiaXNwaWNrdXVwIik7DQogICAgICAgICAgICAgICAgdmFyIGlucFBpY2tVcFN0b3JlID0gJCgnaW5wdXRbbmFtZT1waWNrVXBPcHRpb25zXTpjaGVja2VkJyk7DQogICAgICAgICAgICAgICAgaWYgKGlucFBpY2tVcFN0b3JlLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSBrby5jb250ZXh0Rm9yKGlucFBpY2tVcFN0b3JlLnBhcmVudHMoKVswXSk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3RvcmVPYmplY3QuJGRhdGEuQWRkcmVzczEgIT0gbnVsbCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9LA0KICAgICAgICB3cml0ZTogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIHNlbGYuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uIChpZCkgew0KICAgICAgICB2YXIgbWF0Y2ggPSBrby51dGlscy5hcnJheUZpcnN0KHNlbGYudXNlckFkZHJlc3NlcygpLCBmdW5jdGlvbiAoYSkgew0KICAgICAgICAgICAgaWYgKGEuZXh0ZXJuYWxJZCgpID09PSBpZCAmJiBpZCAhPT0gIlVzZU90aGVyIikgew0KICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgIH07DQoNCiAgICBzZWxmLmdldFNoaXBwaW5nTWV0aG9kcyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgaWYgKENYQUFwcGxpY2F0aW9uLklzRXhwZXJpZW5jZUVkaXRvck1vZGUoKSkgew0KICAgICAgICAgICAgdmFyIG1vY2tEYXRhID0gZ2V0U2hpcHBpbmdNZXRob2RzTW9ja0RhdGEoKTsNCiAgICAgICAgICAgIHNlbGYuc2V0U2hpcHBpbmdNZXRob2RzKG1vY2tEYXRhLlNoaXBwaW5nTWV0aG9kcyk7DQogICAgICAgICAgICAkKCIjb3JkZXJHZXRTaGlwcGluZ01ldGhvZHMiKS5idXR0b24oJ3Jlc2V0Jyk7DQogICAgICAgIH0gZWxzZSBpZiAoc2VsZi5zaGlwcGluZ0FkZHJlc3MoKSAmJiBzZWxmLnNoaXBwaW5nQWRkcmVzcy5lcnJvcnMoKS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICQoIiNvcmRlckdldFNoaXBwaW5nTWV0aG9kcyIpLmJ1dHRvbignbG9hZGluZycpOw0KICAgICAgICAgICAgdmFyIHBhcnR5ID0ga28udG9KUyhzZWxmLnNoaXBwaW5nQWRkcmVzcygpKTsNCiAgICAgICAgICAgIHZhciBkYXRhID0geyBTaGlwcGluZ0FkZHJlc3M6IHBhcnR5LCBTaGlwcGluZ1ByZWZlcmVuY2VUeXBlOiBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKSwgTGluZXM6IG51bGwgfTsNCg0KICAgICAgICAgICAgQWpheFNlcnZpY2UuUG9zdCgiL2FwaS9jeGEvY2hlY2tvdXQvR2V0U2hpcHBpbmdNZXRob2RzIiwNCiAgICAgICAgICAgICAgICBkYXRhLA0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBzZW5kZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuU3VjY2VzcyAmJiBzdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldFNoaXBwaW5nTWV0aG9kcyhkYXRhLlNoaXBwaW5nTWV0aG9kcyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAkKCIjb3JkZXJHZXRTaGlwcGluZ01ldGhvZHMiKS5idXR0b24oJ3Jlc2V0Jyk7DQogICAgICAgICAgICAgICAgfSwgJCh0aGlzKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb21wb25lbnQuZGVsaXZlcnlWTS5zaGlwcGluZ0FkZHJlc3MuZXJyb3JzLnNob3dBbGxNZXNzYWdlcygpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbGYuc2V0U2hpcHBpbmdNZXRob2RzID0gZnVuY3Rpb24gKHNoaXBwaW5nTWV0aG9kRGF0YUxpc3QpIHsNCiAgICAgICAgdmFyIG1ldGhvZHMgPSAiIjsNCiAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZHMucmVtb3ZlQWxsKCk7DQogICAgICAgICQuZWFjaChzaGlwcGluZ01ldGhvZERhdGFMaXN0LCBmdW5jdGlvbiAoaSwgdikgew0KICAgICAgICAgICAgaWYgKHYuRGVzY3JpcHRpb24gPT0gIlBpY2t1cCBGcm9tIFN0b3JlIikgew0KICAgICAgICAgICAgICAgIHNlbGYucGlja3VwTWV0aG9kKG5ldyBtZXRob2Qodi5EZXNjcmlwdGlvbiwgdi5FeHRlcm5hbElkKSk7DQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZHMucHVzaChuZXcgbWV0aG9kKHYuRGVzY3JpcHRpb24sIHYuRXh0ZXJuYWxJZCwgdi5OYW1lKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICBzZWxmLmhhbmRsZUVkaXRNb2RlU2hpcEFsbCA9IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgIHNlbGYuaXNTaGlwQWxsKHRydWUpOw0KDQogICAgICAgIHZhciBzaGlwbWVudCA9IGRhdGEuQ2FydC5TaGlwbWVudHNbMF07DQogICAgICAgIGlmIChzaGlwbWVudCAmJiBzaGlwbWVudC5FZGl0TW9kZVNoaXBwaW5nT3B0aW9uVHlwZSkgew0KICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKHNoaXBtZW50LkVkaXRNb2RlU2hpcHBpbmdPcHRpb25UeXBlLlZhbHVlKTsNCiAgICAgICAgICAgIHZhciBvcmRlclNoaXBwaW5nUHJlZmVyZW5jZSA9IHNlbGYuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbigpOw0KDQogICAgICAgICAgICAvLyBTaGlwVG9BZGRyZXNzDQogICAgICAgICAgICBpZiAob3JkZXJTaGlwcGluZ1ByZWZlcmVuY2UgPT09IDEpIHsNCiAgICAgICAgICAgICAgICB2YXIgcGFydHlJZCA9IHNlbGYuY2FydCgpLnNoaXBtZW50c1swXS5wYXJ0eUlkOw0KICAgICAgICAgICAgICAgIHZhciBwYXJ0eSA9IGtvLnV0aWxzLmFycmF5Rmlyc3Qoc2VsZi5jYXJ0KCkucGFydGllcywgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGEuZXh0ZXJuYWxJZCgpID09PSBwYXJ0eUlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKHBhcnR5KSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2hpcHBpbmdBZGRyZXNzKHBhcnR5KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFBpY2sgdXAgZnJvbSBTdG9yZQ0KICAgICAgICAgICAgaWYgKG9yZGVyU2hpcHBpbmdQcmVmZXJlbmNlID09PSAyKSB7DQogICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKDIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBFbWFpbA0KICAgICAgICAgICAgaWYgKG9yZGVyU2hpcHBpbmdQcmVmZXJlbmNlID09PSAzKSB7DQogICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ0VtYWlsKHNoaXBtZW50LkVtYWlsKTsNCiAgICAgICAgICAgICAgICBzZWxmLnNoaXBwaW5nRW1haWxDb250ZW50KHNoaXBtZW50LkVtYWlsQ29udGVudCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChzaGlwbWVudC5TaGlwbWVudEVkaXRNb2RlbCAmJiBzaGlwbWVudC5TaGlwbWVudEVkaXRNb2RlbC5TaGlwcGluZ01ldGhvZHMpIHsNCiAgICAgICAgICAgICAgICBzZWxmLnNldFNoaXBwaW5nTWV0aG9kcyhzaGlwbWVudC5TaGlwbWVudEVkaXRNb2RlbC5TaGlwcGluZ01ldGhvZHMpOw0KDQogICAgICAgICAgICAgICAgdmFyIHNtID0ga28udXRpbHMuYXJyYXlGaXJzdChzZWxmLnNoaXBwaW5nTWV0aG9kcygpLCBmdW5jdGlvbiAoYSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lID09PSBzaGlwbWVudC5TaGlwcGluZ01ldGhvZE5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoc20pIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaGlwcGluZ01ldGhvZChzbSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHNlbGYuaGFuZGxlRWRpdE1vZGVTaGlwSW5kaXZpZHVhbGx5ID0gZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgc2VsZi5pc1NoaXBBbGwoZmFsc2UpOw0KICAgICAgICBzZWxmLmlzU2hpcEl0ZW1zKHRydWUpOw0KICAgICAgICBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oNCk7DQogICAgICAgICQuZWFjaChzZWxmLmNhcnQoKS5jYXJ0TGluZXMoKSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgew0KICAgICAgICAgICAgdmFsdWUuaGFuZGxlRWRpdE1vZGUoZGF0YSk7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICBzZWxmLmhhbmRsZUVkaXRNb2RlID0gZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgaWYgKHNlbGYuY2FydCgpLnNoaXBtZW50cyAmJiBzZWxmLmNhcnQoKS5zaGlwbWVudHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgaWYgKHNlbGYuY2FydCgpLnNoaXBtZW50cy5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZUVkaXRNb2RlU2hpcEFsbChkYXRhKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVFZGl0TW9kZVNoaXBJbmRpdmlkdWFsbHkoZGF0YSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KDQoNCiAgICBzZWxmLmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChDWEFBcHBsaWNhdGlvbi5Jc0V4cGVyaWVuY2VFZGl0b3JNb2RlKCkpIHsNCiAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0RGVsaXZlcnlNb2NrRGF0YSgpOw0KICAgICAgICAgICAgaW5pdGlhbGl6ZURlbGl2ZXJ5TW9kZWwoZGF0YSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBBamF4U2VydmljZS5Qb3N0KCIvYXBpL2N4YS9jaGVja291dC9HZXREZWxpdmVyeURhdGEiLCBudWxsLCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVEZWxpdmVyeU1vZGVsKGRhdGEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfTsNCg0KDQogICAgc2VsZi5HZXRJbnZlbnRvcnkgPSBmdW5jdGlvbiAoY2FydExpbmUsIHByb2R1Y3RJZCwgdmFyaWFudElkKSB7DQogICAgICAgIHZhciBTZXJ2aWNlUmVxdWVzdCA9IG5ldyBPYmplY3QoKTsNCiAgICAgICAgU2VydmljZVJlcXVlc3QuUHJvZHVjdElkID0gcHJvZHVjdElkOw0KICAgICAgICBTZXJ2aWNlUmVxdWVzdC5WYXJpYW50SWQgPSB2YXJpYW50SWQ7DQogICAgICAgIHZhciBwcm9taXNlID0gR2V0SW52ZW50b3J5KFNlcnZpY2VSZXF1ZXN0KS5kb25lKGZ1bmN0aW9uIChyZXN1bHQpIHsNCiAgICAgICAgICAgIGlmIChyZXN1bHQuRXJyb3JzICE9IG51bGwgJiByZXN1bHQuRXJyb3JzICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgICAgICAgc2VsZi5FcnJvck1lc3NhZ2UoZGF0YS5FcnJvcnNbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgdmFyIHN0b3Jlc0RhdGEgPSByZXN1bHQuRGF0YTsNCiAgICAgICAgICAgICAgICB2YXIgc3RvcmVzTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgIC8vc2VsZi5OZWFyZXN0U3RvcmVzTGlzdChzdG9yZXNEYXRhKTsNCiAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LkRhdGEsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0b3JlID0gbmV3IE5ld1BpY2t1cFN0b3JlKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgc3RvcmVzTGlzdC5wdXNoKG5ld1N0b3JlKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBjYXJ0TGluZS5saW5lUGlja1VwU3RvcmVzKHN0b3Jlc0xpc3QpOw0KDQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICBzZWxmLkxvYWROZWFyZXN0U3RvcmVzID0gZnVuY3Rpb24gKGNhcnRMaW5lLCBwcm9kdWN0SWQsIHZhcmlhbnRJZCkgew0KICAgICAgICB2YXIgU2VydmljZVJlcXVlc3QgPSBuZXcgT2JqZWN0KCk7DQogICAgICAgIFNlcnZpY2VSZXF1ZXN0LkxhdGl0dWRlID0gIiI7DQogICAgICAgIFNlcnZpY2VSZXF1ZXN0LkxvbmdpdHVkZSA9ICIiOw0KICAgICAgICBTZXJ2aWNlUmVxdWVzdC5Qcm9kdWN0SWQgPSBwcm9kdWN0SWQ7DQogICAgICAgIFNlcnZpY2VSZXF1ZXN0LlZhcmlhbnRJZCA9IHZhcmlhbnRJZDsNCiAgICAgICAgdmFyIHByb21pc2UgPSBHZXROZWFyZXN0U3RvcmVzKFNlcnZpY2VSZXF1ZXN0KS5kb25lKGZ1bmN0aW9uIChyZXN1bHQpIHsNCiAgICAgICAgICAgIGlmIChyZXN1bHQuRXJyb3JzICE9IG51bGwgJiByZXN1bHQuRXJyb3JzICE9ICJ1bmRlZmluZWQiKSB7DQogICAgICAgICAgICAgICAgc2VsZi5FcnJvck1lc3NhZ2UoZGF0YS5FcnJvcnNbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQoNCiAgICAgICAgICAgICAgICB2YXIgc3RvcmVzTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuRGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICQuZWFjaChyZXN1bHQuRGF0YSwgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0b3JlID0gbmV3IE5ld1BpY2t1cFN0b3JlKHZhbHVlKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVzTGlzdC5wdXNoKG5ld1N0b3JlKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNhcnRMaW5lLmxpbmVQaWNrVXBTdG9yZXMoc3RvcmVzTGlzdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgc2VsZi5zZXRQaWNrVXBTdG9yZSA9IGZ1bmN0aW9uIChtb2RlbCkgew0KDQogICAgICAgIHNlbGYucGlja1VwU3RvcmVJZCA9IG1vZGVsLkludmVudG9yeVN0b3JlSWQ7DQogICAgICAgIHNlbGYuc3RvcmUobW9kZWwpOw0KDQogICAgfTsNCg0KICAgIHNlbGYuZ29Ub05leHRQYWdlQ2xpY2sgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBwYXJ0aWVzID0gW107DQogICAgICAgIHZhciBzaGlwcGluZyA9IFtdOw0KICAgICAgICB2YXIgb3JkZXJTaGlwcGluZ1ByZWZlcmVuY2UgPSBzZWxmLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKTsNCiAgICAgICAgJCgiI2RlbGl2ZXJ5TWV0aG9kU2V0IikudmFsKGZhbHNlKTsNCg0KICAgICAgICAkKCIjVG9CaWxsaW5nQnV0dG9uIikuYnV0dG9uKCdsb2FkaW5nJyk7DQoNCiAgICAgICAgaWYgKG9yZGVyU2hpcHBpbmdQcmVmZXJlbmNlID09PSAxKSB7DQogICAgICAgICAgICB2YXIgcGFydHlJZCA9IHNlbGYuc2hpcHBpbmdBZGRyZXNzKCkuZXh0ZXJuYWxJZCgpOw0KICAgICAgICAgICAgcGFydGllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAiTmFtZSI6IHNlbGYuc2hpcHBpbmdBZGRyZXNzKCkubmFtZSgpLA0KICAgICAgICAgICAgICAgICJBZGRyZXNzMSI6IHNlbGYuc2hpcHBpbmdBZGRyZXNzKCkuYWRkcmVzczEoKSwNCiAgICAgICAgICAgICAgICAiQ291bnRyeSI6IHNlbGYuc2hpcHBpbmdBZGRyZXNzKCkuY291bnRyeSgpLA0KICAgICAgICAgICAgICAgICJDaXR5Ijogc2VsZi5zaGlwcGluZ0FkZHJlc3MoKS5jaXR5KCksDQogICAgICAgICAgICAgICAgIlN0YXRlIjogc2VsZi5zaGlwcGluZ0FkZHJlc3MoKS5zdGF0ZSgpLA0KICAgICAgICAgICAgICAgICJaaXBQb3N0YWxDb2RlIjogc2VsZi5zaGlwcGluZ0FkZHJlc3MoKS56aXBQb3N0YWxDb2RlKCksDQogICAgICAgICAgICAgICAgIkV4dGVybmFsSWQiOiBwYXJ0eUlkLA0KICAgICAgICAgICAgICAgICJQYXJ0eUlkIjogcGFydHlJZA0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHNoaXBwaW5nLnB1c2goew0KICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZElEIjogc2VsZi5zaGlwcGluZ01ldGhvZCgpLmlkLA0KICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZE5hbWUiOiBzZWxmLnNoaXBwaW5nTWV0aG9kKCkubmFtZSwNCiAgICAgICAgICAgICAgICAiU2hpcHBpbmdQcmVmZXJlbmNlVHlwZSI6IG9yZGVyU2hpcHBpbmdQcmVmZXJlbmNlLA0KICAgICAgICAgICAgICAgICJQYXJ0eUlEIjogcGFydHlJZA0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAob3JkZXJTaGlwcGluZ1ByZWZlcmVuY2UgPT09IDIpIHsNCiAgICAgICAgICAgIHZhciBzdG9yZUlkID0gc2VsZi5zdG9yZSgpLmV4dGVybmFsSWQoKTsNCiAgICAgICAgICAgIHZhciBpbnBOYW1lID0gJ3BpY2tVcE9wdGlvbnMnOw0KICAgICAgICAgICAgdmFyIGlucFBpY2tVcFN0b3JlID0gJCgnaW5wdXRbbmFtZT0nICsgaW5wTmFtZSArICddOmNoZWNrZWQnKTsNCiAgICAgICAgICAgIHZhciBzdG9yZU9iamVjdCA9IGtvLmNvbnRleHRGb3IoaW5wUGlja1VwU3RvcmUucGFyZW50cygpWzBdKTsNCg0KICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uKDIpOw0KDQogICAgICAgICAgICBpZiAoc2VsZi5zdG9yZSgpLkludmVudG9yeVN0b3JlSWQgPT0gbnVsbCkgew0KDQogICAgICAgICAgICAgICAgc2VsZi5zZXRQaWNrVXBTdG9yZShzdG9yZU9iamVjdC4kZGF0YSk7DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBzdG9yZXNoaXBwaW5nQWRkcmVzcyA9IG5ldyBPYmplY3QoKTsNCiAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmV4dGVybmFsSWQgPSAwOw0KICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MucGFydHlJZCA9IDA7DQogICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5uYW1lID0gc2VsZi5zdG9yZSgpLkludmVudG9yeVN0b3JlSWQ7DQogICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzMSA9IHNlbGYuc3RvcmUoKS5BZGRyZXNzMTsNCiAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmNpdHkgPSBzZWxmLnN0b3JlKCkuQ2l0eTsNCiAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLnN0YXRlID0gc2VsZi5zdG9yZSgpLlN0YXRlOw0KICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MuemlwUG9zdGFsQ29kZSA9IHNlbGYuc3RvcmUoKS5aaXA7DQogICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5ID0gc2VsZi5zdG9yZSgpLkNvdW50cnk7DQogICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5pc1ByaW1hcnkgPSBmYWxzZTsNCiAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmZ1bGxBZGRyZXNzID0gc2VsZi5zdG9yZSgpLkFkZHJlc3MxICsgIiAiICsgc2VsZi5zdG9yZSgpLkNpdHkgKyAiICIgKyBzZWxmLnN0b3JlKCkuU3RhdGUgKyAiICIgKyBzZWxmLnN0b3JlKCkuWmlwICsgIiAiICsgc2VsZi5zdG9yZSgpLkNvdW50cnk7DQogICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5kZXRhaWxzVXJsID0gIiI7DQoNCiAgICAgICAgICAgIHZhciBwYXJ0eSA9IGtvLnRvSlMoc3RvcmVzaGlwcGluZ0FkZHJlc3MpOw0KICAgICAgICAgICAgdmFyIGRhdGEgPSB7IFNoaXBwaW5nQWRkcmVzczogcGFydHksIFNoaXBwaW5nUHJlZmVyZW5jZVR5cGU6IHNlbGYuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbigpLCBMaW5lczogbnVsbCB9Ow0KDQogICAgICAgICAgICBBamF4U2VydmljZS5Qb3N0KCIvYXBpL2N4YS9jaGVja291dC9HZXRTaGlwcGluZ01ldGhvZHMiLCBkYXRhLCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKGRhdGEuU3VjY2VzcyAmJiBzdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0U2hpcHBpbmdNZXRob2RzKGRhdGEuU2hpcHBpbmdNZXRob2RzKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnR5SWQgPSBzZWxmLnNoaXBwaW5nQWRkcmVzcygpLmV4dGVybmFsSWQoKTsNCiAgICAgICAgICAgICAgICAgICAgcGFydGllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJOYW1lIjogc2VsZi5zdG9yZSgpLkludmVudG9yeVN0b3JlSWQsDQogICAgICAgICAgICAgICAgICAgICAgICAiQWRkcmVzczEiOiBzZWxmLnN0b3JlKCkuQWRkcmVzczEsDQogICAgICAgICAgICAgICAgICAgICAgICAiQ291bnRyeSI6IHNlbGYuc3RvcmUoKS5Db3VudHJ5LA0KICAgICAgICAgICAgICAgICAgICAgICAgIkNpdHkiOiBzZWxmLnN0b3JlKCkuQ2l0eSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTdGF0ZSI6IHNlbGYuc3RvcmUoKS5TdGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJaaXBQb3N0YWxDb2RlIjogc2VsZi5zdG9yZSgpLlppcCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogc3RvcmVJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJ0eUlkIjogcGFydHlJZA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgLy9wYXJ0aWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAvLyAgICAiTmFtZSI6IHNlbGYuc3RvcmUoKS5uYW1lKCksDQogICAgICAgICAgICAgICAgICAgIC8vICAgICJBZGRyZXNzMSI6IHNlbGYuc3RvcmUoKS5hZGRyZXNzKCkNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIC5hZGRyZXNzMSgpLA0KICAgICAgICAgICAgICAgICAgICAvLyAgICAiQ291bnRyeSI6IHNlbGYuc3RvcmUoKS5hZGRyZXNzKCkNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIC5jb3VudHJ5KCksDQogICAgICAgICAgICAgICAgICAgIC8vICAgICJDaXR5Ijogc2VsZi5zdG9yZSgpLmFkZHJlc3MoKQ0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgLmNpdHkoKSwNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIlN0YXRlIjogc2VsZi5zdG9yZSgpLmFkZHJlc3MoKQ0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgLnN0YXRlKCksDQogICAgICAgICAgICAgICAgICAgIC8vICAgICJaaXBQb3N0YWxDb2RlIjogc2VsZi5zdG9yZSgpLmFkZHJlc3MoKQ0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgLnppcFBvc3RhbENvZGUoKSwNCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIkV4dGVybmFsSWQiOiBzdG9yZUlkLA0KICAgICAgICAgICAgICAgICAgICAvLyAgICAiUGFydHlJZCI6IHN0b3JlSWQNCiAgICAgICAgICAgICAgICAgICAgLy99KTsNCg0KICAgICAgICAgICAgICAgICAgICBzaGlwcGluZy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZElEIjogc2VsZi5zaGlwVG9TdG9yZURlbGl2ZXJ5TWV0aG9kKCkuRXh0ZXJuYWxJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZE5hbWUiOiBzZWxmLnNoaXBUb1N0b3JlRGVsaXZlcnlNZXRob2QoKS5OYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nUHJlZmVyZW5jZVR5cGUiOiBvcmRlclNoaXBwaW5nUHJlZmVyZW5jZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJ0eUlEIjogc3RvcmVJZA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChvcmRlclNoaXBwaW5nUHJlZmVyZW5jZSA9PT0gNCkgew0KICAgICAgICAgICAgJC5lYWNoKHNlbGYuY2FydCgpLmNhcnRMaW5lcygpLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIGxpbmVEZWxpdmVyeVByZWZlcmVuY2UgPSB0aGlzLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24oKTsNCiAgICAgICAgICAgICAgICB2YXIgbGluZUlkID0gdGhpcy5leHRlcm5hbENhcnRMaW5lSWQ7DQoNCiAgICAgICAgICAgICAgICBpZiAobGluZURlbGl2ZXJ5UHJlZmVyZW5jZSA9PT0gMSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHlJZCA9IHRoaXMuc2hpcHBpbmdBZGRyZXNzKCkuZXh0ZXJuYWxJZCgpOw0KICAgICAgICAgICAgICAgICAgICBwYXJ0aWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgIk5hbWUiOiB0aGlzLnNoaXBwaW5nQWRkcmVzcygpLm5hbWUoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJBZGRyZXNzMSI6IHRoaXMuc2hpcHBpbmdBZGRyZXNzKCkuYWRkcmVzczEoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJDb3VudHJ5IjogdGhpcy5zaGlwcGluZ0FkZHJlc3MoKS5jb3VudHJ5KCksDQogICAgICAgICAgICAgICAgICAgICAgICAiQ2l0eSI6IHRoaXMuc2hpcHBpbmdBZGRyZXNzKCkuY2l0eSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlN0YXRlIjogdGhpcy5zaGlwcGluZ0FkZHJlc3MoKS5zdGF0ZSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlppcFBvc3RhbENvZGUiOiB0aGlzLnNoaXBwaW5nQWRkcmVzcygpLnppcFBvc3RhbENvZGUoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogcGFydHlJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJ0eUlkIjogcGFydHlJZA0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICBzaGlwcGluZy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZElEIjogdGhpcy5zaGlwcGluZ01ldGhvZCgpLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nTWV0aG9kTmFtZSI6IHRoaXMuc2hpcHBpbmdNZXRob2QoKS5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nUHJlZmVyZW5jZVR5cGUiOiBsaW5lRGVsaXZlcnlQcmVmZXJlbmNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlBhcnR5SUQiOiBwYXJ0eUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmVJRHMiOiBbbGluZUlkXQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobGluZURlbGl2ZXJ5UHJlZmVyZW5jZSA9PT0gMykgew0KICAgICAgICAgICAgICAgICAgICBzaGlwcGluZy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZElEIjogc2VsZi5lbWFpbERlbGl2ZXJ5TWV0aG9kKCkuRXh0ZXJuYWxJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZE5hbWUiOiBzZWxmLmVtYWlsRGVsaXZlcnlNZXRob2QoKS5OYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nUHJlZmVyZW5jZVR5cGUiOiBsaW5lRGVsaXZlcnlQcmVmZXJlbmNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkVsZWN0cm9uaWNEZWxpdmVyeUVtYWlsIjogdGhpcy5zaGlwcGluZ0VtYWlsKCksDQogICAgICAgICAgICAgICAgICAgICAgICAiRWxlY3Ryb25pY0RlbGl2ZXJ5RW1haWxDb250ZW50IjogdGhpcy5zaGlwcGluZ0VtYWlsQ29udGVudCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIkxpbmVJRHMiOiBbbGluZUlkXQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobGluZURlbGl2ZXJ5UHJlZmVyZW5jZSA9PT0gMikgew0KDQogICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0eUlkID0gdGhpcy5zaGlwcGluZ0FkZHJlc3MoKS5leHRlcm5hbElkKCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpbnBOYW1lID0gJ3BpY2tVcE9wdGlvbnMtJyArIHRoaXMuZXh0ZXJuYWxDYXJ0TGluZUlkOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW5wUGlja1VwU3RvcmUgPSAkKCdpbnB1dFtuYW1lPScgKyBpbnBOYW1lICsgJ106Y2hlY2tlZCcpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSBrby5jb250ZXh0Rm9yKGlucFBpY2tVcFN0b3JlLnBhcmVudHMoKVswXSk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlT2JqZWN0ID09IG51bGwpIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgJCgnI1RvQmlsbGluZ0J1dHRvbicpLmF0dHIoJ2Rpc2FibGVkJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVOYW1lID0gc3RvcmVPYmplY3QuJGRhdGEuSW52ZW50b3J5U3RvcmVJZDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZHJlc3MxID0gc3RvcmVPYmplY3QuJGRhdGEuQWRkcmVzczE7DQogICAgICAgICAgICAgICAgICAgIHZhciBjaXR5ID0gc3RvcmVPYmplY3QuJGRhdGEuQ2l0eTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RvcmVPYmplY3QuJGRhdGEuU3RhdGU7DQogICAgICAgICAgICAgICAgICAgIHZhciB6aXAgPSBzdG9yZU9iamVjdC4kZGF0YS5aaXA7DQogICAgICAgICAgICAgICAgICAgIHZhciBjb3VudHJ5ID0gc3RvcmVPYmplY3QuJGRhdGEuQ291bnRyeTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmVzaGlwcGluZ0FkZHJlc3MgPSBuZXcgT2JqZWN0KCk7DQogICAgICAgICAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmV4dGVybmFsSWQgPSAwOw0KICAgICAgICAgICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5wYXJ0eUlkID0gMDsNCiAgICAgICAgICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MubmFtZSA9IHN0b3JlTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MuYWRkcmVzczEgPSBhZGRyZXNzMTsNCiAgICAgICAgICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MuY2l0eSA9IGNpdHk7DQogICAgICAgICAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLnN0YXRlID0gc3RhdGU7DQogICAgICAgICAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLnppcFBvc3RhbENvZGUgPSB6aXA7DQogICAgICAgICAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmNvdW50cnkgPSBjb3VudHJ5Ow0KICAgICAgICAgICAgICAgICAgICBzdG9yZXNoaXBwaW5nQWRkcmVzcy5pc1ByaW1hcnkgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgc3RvcmVzaGlwcGluZ0FkZHJlc3MuZnVsbEFkZHJlc3MgPSBhZGRyZXNzMSArICIgIiArIGNpdHkgKyAiICIgKyBzdGF0ZSArICIgIiArIHppcCArICIgIiArIGNvdW50cnk7DQogICAgICAgICAgICAgICAgICAgIHN0b3Jlc2hpcHBpbmdBZGRyZXNzLmRldGFpbHNVcmwgPSAiIjsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHkgPSBrby50b0pTKHN0b3Jlc2hpcHBpbmdBZGRyZXNzKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7IFNoaXBwaW5nQWRkcmVzczogcGFydHksIFNoaXBwaW5nUHJlZmVyZW5jZVR5cGU6IHNlbGYuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbigpLCBMaW5lczogbnVsbCB9Ow0KDQogICAgICAgICAgICAgICAgICAgIEFqYXhTZXJ2aWNlLlBvc3QoIi9hcGkvY3hhL2NoZWNrb3V0L0dldFNoaXBwaW5nTWV0aG9kcyIsIGRhdGEsIGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzLCBzZW5kZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLlN1Y2Nlc3MgJiYgc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0U2hpcHBpbmdNZXRob2RzKGRhdGEuU2hpcHBpbmdNZXRob2RzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnBOYW1lID0gJ3BpY2tVcE9wdGlvbnMnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnBQaWNrVXBTdG9yZSA9ICQoJ2lucHV0W25hbWU9JyArIGlucE5hbWUgKyAnXTpjaGVja2VkJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlT2JqZWN0ID0ga28uY29udGV4dEZvcihpbnBQaWNrVXBTdG9yZS5wYXJlbnRzKClbMF0pOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnR5SWQgPSBzZWxmLnNoaXBwaW5nQWRkcmVzcygpLmV4dGVybmFsSWQoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWVzLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTmFtZSI6IHN0b3JlTmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFkZHJlc3MxIjogYWRkcmVzczEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb3VudHJ5IjogY291bnRyeSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNpdHkiOiBjaXR5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU3RhdGUiOiBzdGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlppcFBvc3RhbENvZGUiOiB6aXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFeHRlcm5hbElkIjogcGFydHlJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlBhcnR5SWQiOiBwYXJ0eUlkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlwcGluZy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nTWV0aG9kSUQiOiBzZWxmLnBpY2t1cE1ldGhvZCgpLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU2hpcHBpbmdNZXRob2ROYW1lIjogc2VsZi5waWNrdXBNZXRob2QoKS5kZXNjcmlwdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNoaXBwaW5nUHJlZmVyZW5jZVR5cGUiOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUGFydHlJRCI6IHBhcnR5SWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJMaW5lSURzIjogW2xpbmVJZF0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChvcmRlclNoaXBwaW5nUHJlZmVyZW5jZSA9PT0gMykgew0KICAgICAgICAgICAgc2hpcHBpbmcucHVzaCh7DQogICAgICAgICAgICAgICAgIlNoaXBwaW5nTWV0aG9kSUQiOiBzZWxmLmVtYWlsRGVsaXZlcnlNZXRob2QoKS5FeHRlcm5hbElkLA0KICAgICAgICAgICAgICAgICJTaGlwcGluZ01ldGhvZE5hbWUiOiBzZWxmLmVtYWlsRGVsaXZlcnlNZXRob2QoKS5OYW1lLA0KICAgICAgICAgICAgICAgICJTaGlwcGluZ1ByZWZlcmVuY2VUeXBlIjogb3JkZXJTaGlwcGluZ1ByZWZlcmVuY2UsDQogICAgICAgICAgICAgICAgIkVsZWN0cm9uaWNEZWxpdmVyeUVtYWlsIjogc2VsZi5zaGlwcGluZ0VtYWlsKCksDQogICAgICAgICAgICAgICAgIkVsZWN0cm9uaWNEZWxpdmVyeUVtYWlsQ29udGVudCI6IHNlbGYuc2hpcHBpbmdFbWFpbENvbnRlbnQoKQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHZhciBkYXRhID0gJ3siRGVsaXZlcnlJdGVtUGF0aCI6ICInICsgJCgiI0RlbGl2ZXJ5SXRlbVBhdGgiKS52YWwoKSArICciLCAiT3JkZXJTaGlwcGluZ1ByZWZlcmVuY2VUeXBlIjogIicgKyBvcmRlclNoaXBwaW5nUHJlZmVyZW5jZSArICciLCAiU2hpcHBpbmdNZXRob2RzIjonICsgSlNPTi5zdHJpbmdpZnkoc2hpcHBpbmcpICsgJywgIlNoaXBwaW5nQWRkcmVzc2VzIjonICsgSlNPTi5zdHJpbmdpZnkocGFydGllcykgKyAnfSc7DQogICAgICAgICAgICBBamF4U2VydmljZS5Qb3N0KCIvYXBpL2N4YS9jaGVja291dC9TZXRTaGlwcGluZ01ldGhvZHMiLCBKU09OLnBhcnNlKGRhdGEpLCBmdW5jdGlvbiAoZGF0YSwgc3VjY2Vzcywgc2VuZGVyKSB7DQogICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgZGF0YS5TdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS5OZXh0UGFnZUxpbms7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJCgiI1RvQmlsbGluZ0J1dHRvbiIpLmJ1dHRvbigncmVzZXQnKTsNCiAgICAgICAgICAgIH0sICQodGhpcykpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgIH0NCg0KfQ0KDQovKiBlc2xpbnQtZGlzYWJsZSBtYXgtcGFyYW1zICovDQovKiBDYW5ub3QgcmVkdWNlIHRoZSBudW1iZXIgb2YgcGFyYW1zIGFzIHRoZSBpbml0IGFuZCB1cGRhdGUgY2FsbGJhY2sgbWV0aG9kIGRlZmluaXRpb25zIGFyZSBkZWZpbmVkIGJ5IGtub2Nrb3V0LmpzICovDQprby5iaW5kaW5nSGFuZGxlcnMuY2hlY2tNZSA9IHsNCiAgICBpbml0OiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsLCB2bSwgYmluZGluZ0NvbnRleHQpIHsNCiAgICAgICAga28udXRpbHMucmVnaXN0ZXJFdmVudEhhbmRsZXIoZWxlbWVudCwgImNsaWNrIiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGNoZWNrZWRWYWx1ZSA9IHZhbHVlQWNjZXNzb3IoKSwNCiAgICAgICAgICAgICAgICBtZVZhbHVlID0gYmluZGluZ0NvbnRleHQuJGRhdGEsDQogICAgICAgICAgICAgICAgY2hlY2tlZCA9IGVsZW1lbnQuY2hlY2tlZDsNCiAgICAgICAgICAgIGlmIChjaGVja2VkICYmIGtvLmlzT2JzZXJ2YWJsZShjaGVja2VkVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgY2hlY2tlZFZhbHVlKG1lVmFsdWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHVwZGF0ZTogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbCwgdm0sIGJpbmRpbmdDb250ZXh0KSB7DQogICAgICAgIHZhciBjaGVja2VkVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSksDQogICAgICAgICAgICBtZVZhbHVlID0gYmluZGluZ0NvbnRleHQuJGRhdGE7DQoNCiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gY2hlY2tlZFZhbHVlID09PSBtZVZhbHVlOw0KICAgIH0NCn07DQoNCmZ1bmN0aW9uIEdldE5lYXJlc3RTdG9yZXMoU2VydmljZVJlcXVlc3QpIHsNCg0KICAgIHZhciB1cmwgPSAiL2FwaS9jeGEvTmVhcmVzdFN0b3JlL0dldFN0b3Jlcz91c2VyTGF0aXR1ZGU9IiArIFNlcnZpY2VSZXF1ZXN0LkxhdGl0dWRlICsgIiZ1c2VyTG9uZ2l0dWRlPSIgKyBTZXJ2aWNlUmVxdWVzdC5Mb25naXR1ZGUgKyAiJnBpZD0iICsgU2VydmljZVJlcXVlc3QuUHJvZHVjdElkICsgIi0iICsgU2VydmljZVJlcXVlc3QuVmFyaWFudElkOw0KICAgIHZhciByZXF1ZXN0RGF0YSA9IEpTT04uc3RyaW5naWZ5KFNlcnZpY2VSZXF1ZXN0KTsNCiAgICAkKCcubG9hZGVyJykuc2hvdygpOw0KICAgIHZhciBhamF4UmVxdWVzdCA9ICQuYWpheCh7DQogICAgICAgIHR5cGU6ICdQT1NUJywNCiAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgiLA0KICAgICAgICB1cmw6IHVybCwNCiAgICAgICAgLy9kYXRhOiB7ICd1c2VyTGF0aXR1ZGUnOiBTZXJ2aWNlUmVxdWVzdC5MYXRpdHVkZSwgJ3VzZXJMb25naXR1ZGUnOiBTZXJ2aWNlUmVxdWVzdC5Mb25naXR1ZGUgfSwNCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICAgICQoJy5sb2FkZXInKS5oaWRlKCk7DQogICAgICAgIH0sDQogICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeCwgeSwgeikgew0KICAgICAgICB9DQogICAgfSk7DQogICAgcmV0dXJuIGFqYXhSZXF1ZXN0Ow0KfQ0KDQpmdW5jdGlvbiBHZXRJbnZlbnRvcnkoU2VydmljZVJlcXVlc3QpIHsNCg0KICAgIHZhciB1cmwgPSAiL2FwaS9jeGEvTmVhcmVzdFN0b3JlL0dldEludmVudG9yeT9waWQ9IiArIFNlcnZpY2VSZXF1ZXN0LlByb2R1Y3RJZCArICItIiArIFNlcnZpY2VSZXF1ZXN0LlZhcmlhbnRJZDsNCiAgICB2YXIgcmVxdWVzdERhdGEgPSBKU09OLnN0cmluZ2lmeShTZXJ2aWNlUmVxdWVzdCk7DQogICAgJCgnLmxvYWRlcicpLnNob3coKTsNCiAgICB2YXIgYWpheFJlcXVlc3QgPSAkLmFqYXgoew0KICAgICAgICB0eXBlOiAnUE9TVCcsDQogICAgICAgIGNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04IiwNCiAgICAgICAgdXJsOiB1cmwsDQogICAgICAgIC8vZGF0YTogeyAndXNlckxhdGl0dWRlJzogU2VydmljZVJlcXVlc3QuTGF0aXR1ZGUsICd1c2VyTG9uZ2l0dWRlJzogU2VydmljZVJlcXVlc3QuTG9uZ2l0dWRlIH0sDQogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICAkKCcubG9hZGVyJykuaGlkZSgpOw0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHgsIHksIHopIHsNCiAgICAgICAgfQ0KICAgIH0pOw0KICAgIHJldHVybiBhamF4UmVxdWVzdDsNCn0NCg0KZnVuY3Rpb24gTmV3UGlja3VwU3RvcmUoZGF0YSkgew0KICAgIHNlbGYgPSB0aGlzOw0KICAgICQoZGF0YSkubWFwKGZ1bmN0aW9uIChpLCBiKSB7DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ0lkJykpDQogICAgICAgICAgICBzZWxmLklkID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnRXh0ZXJuYWxJZCcpKQ0KICAgICAgICAgICAgc2VsZi5FeHRlcm5hbElkID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnSW52ZW50b3J5U3RvcmVJZCcpKQ0KICAgICAgICAgICAgc2VsZi5JbnZlbnRvcnlTdG9yZUlkID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnSW52ZW50b3J5U3RvcmVJZCcpKQ0KICAgICAgICAgICAgc2VsZi5EaXN0YW5jZSA9IGJbJ1ZhbHVlJ107DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ1plcm9JbnZlbnRvcnknKSkNCiAgICAgICAgICAgIHNlbGYuWmVyb0ludmVudG9yeSA9IGJbJ1ZhbHVlJ107DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ0Rpc3BsYXlOYW1lJykpDQogICAgICAgICAgICBzZWxmLkRpc3BsYXlOYW1lID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnTGltaXRlZCcpKQ0KICAgICAgICAgICAgc2VsZi5MaW1pdGVkID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnUXVhbnRpdHknKSkNCiAgICAgICAgICAgIHNlbGYuUXVhbnRpdHkgPSBiWydWYWx1ZSddOw0KICAgICAgICBpZiAoKGJbJ0tleSddID09ICdJbnZlbnRvcnlBbW91bnQnKSkNCiAgICAgICAgICAgIHNlbGYuSW52ZW50b3J5QW1vdW50ID0gYlsnVmFsdWUnXTsNCiAgICAgICAgaWYgKChiWydLZXknXSA9PSAnQWRkcmVzcycpKQ0KICAgICAgICAgICAgc2VsZi5BZGRyZXNzMSA9IGJbJ1ZhbHVlJ107DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ0NpdHknKSkNCiAgICAgICAgICAgIHNlbGYuQ2l0eSA9IGJbIlZhbHVlIl07DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ1ppcCcpKQ0KICAgICAgICAgICAgc2VsZi5aaXAgPSBiWyJWYWx1ZSJdOw0KICAgICAgICBpZiAoKGJbJ0tleSddID09ICdTdGF0ZScpKQ0KICAgICAgICAgICAgc2VsZi5TdGF0ZSA9IGJbIlZhbHVlIl07DQogICAgICAgIGlmICgoYlsnS2V5J10gPT0gJ0NvdW50cnknKSkNCiAgICAgICAgICAgIHNlbGYuQ291bnRyeSA9IGJbIlZhbHVlIl07DQogICAgfSkNCn0NCg0KDQoNCg0KDQoNCg==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 50326
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Value: "20190819T180335:637018346154186403Z"
