---
ID: "58fadaa9-8bf6-43b3-89a3-1dd93ae727bc"
Parent: "0f96d50a-ce5f-456f-837d-a416b6d71b99"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Themes/Habitat Sites/Habitat Home Store/scripts/vendors/jqueryvalidateunobtrusive
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/58FADAA98BF643B389A31DD93AE727BC.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "8dc00113-3adb-4fd9-b28c-aa0e59172227"
  Value: Ly8gVW5vYnRydXNpdmUgdmFsaWRhdGlvbiBzdXBwb3J0IGxpYnJhcnkgZm9yIGpRdWVyeSBhbmQgalF1ZXJ5IFZhbGlkYXRlDQovLyBDb3B5cmlnaHQgKEMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCi8vIEB2ZXJzaW9uIHYzLjIuNg0KDQovKmpzbGludCB3aGl0ZTogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSwgb25ldmFyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgbm9tZW46IHRydWUsIGVxZXFlcTogdHJ1ZSwgcGx1c3BsdXM6IHRydWUsIGJpdHdpc2U6IHRydWUsIHJlZ2V4cDogdHJ1ZSwgbmV3Y2FwOiB0cnVlLCBpbW1lZDogdHJ1ZSwgc3RyaWN0OiBmYWxzZSAqLw0KLypnbG9iYWwgZG9jdW1lbnQ6IGZhbHNlLCBqUXVlcnk6IGZhbHNlICovDQoNCihmdW5jdGlvbiAoZmFjdG9yeSkgew0KICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsNCiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLg0KICAgICAgICBkZWZpbmUoImpxdWVyeS52YWxpZGF0ZS51bm9idHJ1c2l2ZSIsIFsnanF1ZXJ5LnZhbGlkYXRlJ10sIGZhY3RvcnkpOw0KICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsNCiAgICAgICAgLy8gQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzICAgICANCiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeS12YWxpZGF0aW9uJykpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsDQogICAgICAgIGpRdWVyeS52YWxpZGF0b3IudW5vYnRydXNpdmUgPSBmYWN0b3J5KGpRdWVyeSk7DQogICAgfQ0KfShmdW5jdGlvbiAoJCkgew0KICAgIHZhciAkalF2YWwgPSAkLnZhbGlkYXRvciwNCiAgICAgICAgYWRhcHRlcnMsDQogICAgICAgIGRhdGFfdmFsaWRhdGlvbiA9ICJ1bm9idHJ1c2l2ZVZhbGlkYXRpb24iOw0KDQogICAgZnVuY3Rpb24gc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBydWxlTmFtZSwgdmFsdWUpIHsNCiAgICAgICAgb3B0aW9ucy5ydWxlc1tydWxlTmFtZV0gPSB2YWx1ZTsNCiAgICAgICAgaWYgKG9wdGlvbnMubWVzc2FnZSkgew0KICAgICAgICAgICAgb3B0aW9ucy5tZXNzYWdlc1tydWxlTmFtZV0gPSBvcHRpb25zLm1lc3NhZ2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzcGxpdEFuZFRyaW0odmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAiIikuc3BsaXQoL1xzKixccyovZyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZXNjYXBlQXR0cmlidXRlVmFsdWUodmFsdWUpIHsNCiAgICAgICAgLy8gQXMgbWVudGlvbmVkIG9uIGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jYXRlZ29yeS9zZWxlY3RvcnMvDQogICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oWyEiIyQlJicoKSorLC4vOjs8PT4/QFxbXFxcXV5ge3x9fl0pL2csICJcXCQxIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0TW9kZWxQcmVmaXgoZmllbGROYW1lKSB7DQogICAgICAgIHJldHVybiBmaWVsZE5hbWUuc3Vic3RyKDAsIGZpZWxkTmFtZS5sYXN0SW5kZXhPZigiLiIpICsgMSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYXBwZW5kTW9kZWxQcmVmaXgodmFsdWUsIHByZWZpeCkgew0KICAgICAgICBpZiAodmFsdWUuaW5kZXhPZigiKi4iKSA9PT0gMCkgew0KICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCIqLiIsIHByZWZpeCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IsIGlucHV0RWxlbWVudCkgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnQNCiAgICAgICAgdmFyIGNvbnRhaW5lciA9ICQodGhpcykuZmluZCgiW2RhdGEtdmFsbXNnLWZvcj0nIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGlucHV0RWxlbWVudFswXS5uYW1lKSArICInXSIpLA0KICAgICAgICAgICAgcmVwbGFjZUF0dHJWYWx1ZSA9IGNvbnRhaW5lci5hdHRyKCJkYXRhLXZhbG1zZy1yZXBsYWNlIiksDQogICAgICAgICAgICByZXBsYWNlID0gcmVwbGFjZUF0dHJWYWx1ZSA/ICQucGFyc2VKU09OKHJlcGxhY2VBdHRyVmFsdWUpICE9PSBmYWxzZSA6IG51bGw7DQoNCiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKCJmaWVsZC12YWxpZGF0aW9uLXZhbGlkIikuYWRkQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKTsNCiAgICAgICAgZXJyb3IuZGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiLCBjb250YWluZXIpOw0KDQogICAgICAgIGlmIChyZXBsYWNlKSB7DQogICAgICAgICAgICBjb250YWluZXIuZW1wdHkoKTsNCiAgICAgICAgICAgIGVycm9yLnJlbW92ZUNsYXNzKCJpbnB1dC12YWxpZGF0aW9uLWVycm9yIikuYXBwZW5kVG8oY29udGFpbmVyKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGVycm9yLmhpZGUoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG9uRXJyb3JzKGV2ZW50LCB2YWxpZGF0b3IpIHsgIC8vICd0aGlzJyBpcyB0aGUgZm9ybSBlbGVtZW50DQogICAgICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpLmZpbmQoIltkYXRhLXZhbG1zZy1zdW1tYXJ5PXRydWVdIiksDQogICAgICAgICAgICBsaXN0ID0gY29udGFpbmVyLmZpbmQoInVsIik7DQoNCiAgICAgICAgaWYgKGxpc3QgJiYgbGlzdC5sZW5ndGggJiYgdmFsaWRhdG9yLmVycm9yTGlzdC5sZW5ndGgpIHsNCiAgICAgICAgICAgIGxpc3QuZW1wdHkoKTsNCiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygidmFsaWRhdGlvbi1zdW1tYXJ5LWVycm9ycyIpLnJlbW92ZUNsYXNzKCJ2YWxpZGF0aW9uLXN1bW1hcnktdmFsaWQiKTsNCg0KICAgICAgICAgICAgJC5lYWNoKHZhbGlkYXRvci5lcnJvckxpc3QsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAkKCI8bGkgLz4iKS5odG1sKHRoaXMubWVzc2FnZSkuYXBwZW5kVG8obGlzdCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhlcnJvcikgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnQNCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGVycm9yLmRhdGEoInVub2J0cnVzaXZlQ29udGFpbmVyIik7DQoNCiAgICAgICAgaWYgKGNvbnRhaW5lcikgew0KICAgICAgICAgICAgdmFyIHJlcGxhY2VBdHRyVmFsdWUgPSBjb250YWluZXIuYXR0cigiZGF0YS12YWxtc2ctcmVwbGFjZSIpLA0KICAgICAgICAgICAgICAgIHJlcGxhY2UgPSByZXBsYWNlQXR0clZhbHVlID8gJC5wYXJzZUpTT04ocmVwbGFjZUF0dHJWYWx1ZSkgOiBudWxsOw0KDQogICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tdmFsaWQiKS5yZW1vdmVDbGFzcygiZmllbGQtdmFsaWRhdGlvbi1lcnJvciIpOw0KICAgICAgICAgICAgZXJyb3IucmVtb3ZlRGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKTsNCg0KICAgICAgICAgICAgaWYgKHJlcGxhY2UpIHsNCiAgICAgICAgICAgICAgICBjb250YWluZXIuZW1wdHkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIG9uUmVzZXQoZXZlbnQpIHsgIC8vICd0aGlzJyBpcyB0aGUgZm9ybSBlbGVtZW50DQogICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyksDQogICAgICAgICAgICBrZXkgPSAnX19qcXVlcnlfdW5vYnRydXNpdmVfdmFsaWRhdGlvbl9mb3JtX3Jlc2V0JzsNCiAgICAgICAgaWYgKCRmb3JtLmRhdGEoa2V5KSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIC8vIFNldCBhIGZsYWcgdGhhdCBpbmRpY2F0ZXMgd2UncmUgY3VycmVudGx5IHJlc2V0dGluZyB0aGUgZm9ybS4NCiAgICAgICAgJGZvcm0uZGF0YShrZXksIHRydWUpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgJGZvcm0uZGF0YSgidmFsaWRhdG9yIikucmVzZXRGb3JtKCk7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAkZm9ybS5yZW1vdmVEYXRhKGtleSk7DQogICAgICAgIH0NCg0KICAgICAgICAkZm9ybS5maW5kKCIudmFsaWRhdGlvbi1zdW1tYXJ5LWVycm9ycyIpDQogICAgICAgICAgICAuYWRkQ2xhc3MoInZhbGlkYXRpb24tc3VtbWFyeS12YWxpZCIpDQogICAgICAgICAgICAucmVtb3ZlQ2xhc3MoInZhbGlkYXRpb24tc3VtbWFyeS1lcnJvcnMiKTsNCiAgICAgICAgJGZvcm0uZmluZCgiLmZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKQ0KICAgICAgICAgICAgLmFkZENsYXNzKCJmaWVsZC12YWxpZGF0aW9uLXZhbGlkIikNCiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygiZmllbGQtdmFsaWRhdGlvbi1lcnJvciIpDQogICAgICAgICAgICAucmVtb3ZlRGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKQ0KICAgICAgICAgICAgLmZpbmQoIj4qIikgIC8vIElmIHdlIHdlcmUgdXNpbmcgdmFsbXNnLXJlcGxhY2UsIGdldCB0aGUgdW5kZXJseWluZyBlcnJvcg0KICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKCJ1bm9idHJ1c2l2ZUNvbnRhaW5lciIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHZhbGlkYXRpb25JbmZvKGZvcm0pIHsNCiAgICAgICAgdmFyICRmb3JtID0gJChmb3JtKSwNCiAgICAgICAgICAgIHJlc3VsdCA9ICRmb3JtLmRhdGEoZGF0YV92YWxpZGF0aW9uKSwNCiAgICAgICAgICAgIG9uUmVzZXRQcm94eSA9ICQucHJveHkob25SZXNldCwgZm9ybSksDQogICAgICAgICAgICBkZWZhdWx0T3B0aW9ucyA9ICRqUXZhbC51bm9idHJ1c2l2ZS5vcHRpb25zIHx8IHt9LA0KICAgICAgICAgICAgZXhlY0luQ29udGV4dCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7DQogICAgICAgICAgICAgICAgdmFyIGZ1bmMgPSBkZWZhdWx0T3B0aW9uc1tuYW1lXTsNCiAgICAgICAgICAgICAgICBmdW5jICYmICQuaXNGdW5jdGlvbihmdW5jKSAmJiBmdW5jLmFwcGx5KGZvcm0sIGFyZ3MpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIGlmICghcmVzdWx0KSB7DQogICAgICAgICAgICByZXN1bHQgPSB7DQogICAgICAgICAgICAgICAgb3B0aW9uczogeyAgLy8gb3B0aW9ucyBzdHJ1Y3R1cmUgcGFzc2VkIHRvIGpRdWVyeSBWYWxpZGF0ZSdzIHZhbGlkYXRlKCkgbWV0aG9kDQogICAgICAgICAgICAgICAgICAgIGVycm9yQ2xhc3M6IGRlZmF1bHRPcHRpb25zLmVycm9yQ2xhc3MgfHwgImlucHV0LXZhbGlkYXRpb24tZXJyb3IiLA0KICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQ6IGRlZmF1bHRPcHRpb25zLmVycm9yRWxlbWVudCB8fCAic3BhbiIsDQogICAgICAgICAgICAgICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLmFwcGx5KGZvcm0sIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgICAgICAgICAgICBleGVjSW5Db250ZXh0KCJlcnJvclBsYWNlbWVudCIsIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGludmFsaWRIYW5kbGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9ycy5hcHBseShmb3JtLCBhcmd1bWVudHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0luQ29udGV4dCgiaW52YWxpZEhhbmRsZXIiLCBhcmd1bWVudHMpOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczoge30sDQogICAgICAgICAgICAgICAgICAgIHJ1bGVzOiB7fSwNCiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzLmFwcGx5KGZvcm0sIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgICAgICAgICAgICBleGVjSW5Db250ZXh0KCJzdWNjZXNzIiwgYXJndW1lbnRzKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgYXR0YWNoVmFsaWRhdGlvbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAkZm9ybQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm9mZigicmVzZXQuIiArIGRhdGFfdmFsaWRhdGlvbiwgb25SZXNldFByb3h5KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCJyZXNldC4iICsgZGF0YV92YWxpZGF0aW9uLCBvblJlc2V0UHJveHkpDQogICAgICAgICAgICAgICAgICAgICAgICAudmFsaWRhdGUodGhpcy5vcHRpb25zKTsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHZhbGlkYXRlOiBmdW5jdGlvbiAoKSB7ICAvLyBhIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYnkgdW5vYnRydXNpdmUgQWpheA0KICAgICAgICAgICAgICAgICAgICAkZm9ybS52YWxpZGF0ZSgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGZvcm0udmFsaWQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgJGZvcm0uZGF0YShkYXRhX3ZhbGlkYXRpb24sIHJlc3VsdCk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0NCg0KICAgICRqUXZhbC51bm9idHJ1c2l2ZSA9IHsNCiAgICAgICAgYWRhcHRlcnM6IFtdLA0KDQogICAgICAgIHBhcnNlRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHNraXBBdHRhY2gpIHsNCiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgICAgIC8vLyBQYXJzZXMgYSBzaW5nbGUgSFRNTCBlbGVtZW50IGZvciB1bm9idHJ1c2l2ZSB2YWxpZGF0aW9uIGF0dHJpYnV0ZXMuDQogICAgICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJlbGVtZW50IiBkb21FbGVtZW50PSJ0cnVlIj5UaGUgSFRNTCBlbGVtZW50IHRvIGJlIHBhcnNlZC48L3BhcmFtPg0KICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJza2lwQXR0YWNoIiB0eXBlPSJCb29sZWFuIj5bT3B0aW9uYWxdIHRydWUgdG8gc2tpcCBhdHRhY2hpbmcgdGhlDQogICAgICAgICAgICAvLy8gdmFsaWRhdGlvbiB0byB0aGUgZm9ybS4gSWYgcGFyc2luZyBqdXN0IHRoaXMgc2luZ2xlIGVsZW1lbnQsIHlvdSBzaG91bGQgc3BlY2lmeSB0cnVlLg0KICAgICAgICAgICAgLy8vIElmIHBhcnNpbmcgc2V2ZXJhbCBlbGVtZW50cywgeW91IHNob3VsZCBzcGVjaWZ5IGZhbHNlLCBhbmQgbWFudWFsbHkgYXR0YWNoIHRoZSB2YWxpZGF0aW9uDQogICAgICAgICAgICAvLy8gdG8gdGhlIGZvcm0gd2hlbiB5b3UgYXJlIGZpbmlzaGVkLiBUaGUgZGVmYXVsdCBpcyBmYWxzZS48L3BhcmFtPg0KICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KSwNCiAgICAgICAgICAgICAgICBmb3JtID0gJGVsZW1lbnQucGFyZW50cygiZm9ybSIpWzBdLA0KICAgICAgICAgICAgICAgIHZhbEluZm8sIHJ1bGVzLCBtZXNzYWdlczsNCg0KICAgICAgICAgICAgaWYgKCFmb3JtKSB7ICAvLyBDYW5ub3QgZG8gY2xpZW50LXNpZGUgdmFsaWRhdGlvbiB3aXRob3V0IGEgZm9ybQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFsSW5mbyA9IHZhbGlkYXRpb25JbmZvKGZvcm0pOw0KICAgICAgICAgICAgdmFsSW5mby5vcHRpb25zLnJ1bGVzW2VsZW1lbnQubmFtZV0gPSBydWxlcyA9IHt9Ow0KICAgICAgICAgICAgdmFsSW5mby5vcHRpb25zLm1lc3NhZ2VzW2VsZW1lbnQubmFtZV0gPSBtZXNzYWdlcyA9IHt9Ow0KDQogICAgICAgICAgICAkLmVhY2godGhpcy5hZGFwdGVycywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHZhciBwcmVmaXggPSAiZGF0YS12YWwtIiArIHRoaXMubmFtZSwNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICRlbGVtZW50LmF0dHIocHJlZml4KSwNCiAgICAgICAgICAgICAgICAgICAgcGFyYW1WYWx1ZXMgPSB7fTsNCg0KICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHsgIC8vIENvbXBhcmUgYWdhaW5zdCB1bmRlZmluZWQsIGJlY2F1c2UgYW4gZW1wdHkgbWVzc2FnZSBpcyBsZWdhbCAoYW5kIGZhbHN5KQ0KICAgICAgICAgICAgICAgICAgICBwcmVmaXggKz0gIi0iOw0KDQogICAgICAgICAgICAgICAgICAgICQuZWFjaCh0aGlzLnBhcmFtcywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1WYWx1ZXNbdGhpc10gPSAkZWxlbWVudC5hdHRyKHByZWZpeCArIHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFkYXB0KHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiBmb3JtLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1WYWx1ZXMsDQogICAgICAgICAgICAgICAgICAgICAgICBydWxlczogcnVsZXMsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICQuZXh0ZW5kKHJ1bGVzLCB7ICJfX2R1bW15X18iOiB0cnVlIH0pOw0KDQogICAgICAgICAgICBpZiAoIXNraXBBdHRhY2gpIHsNCiAgICAgICAgICAgICAgICB2YWxJbmZvLmF0dGFjaFZhbGlkYXRpb24oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICBwYXJzZTogZnVuY3Rpb24gKHNlbGVjdG9yKSB7DQogICAgICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgICAgICAvLy8gUGFyc2VzIGFsbCB0aGUgSFRNTCBlbGVtZW50cyBpbiB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yLiBJdCBsb29rcyBmb3IgaW5wdXQgZWxlbWVudHMgZGVjb3JhdGVkDQogICAgICAgICAgICAvLy8gd2l0aCB0aGUgW2RhdGEtdmFsPXRydWVdIGF0dHJpYnV0ZSB2YWx1ZSBhbmQgZW5hYmxlcyB2YWxpZGF0aW9uIGFjY29yZGluZyB0byB0aGUgZGF0YS12YWwtKg0KICAgICAgICAgICAgLy8vIGF0dHJpYnV0ZSB2YWx1ZXMuDQogICAgICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJzZWxlY3RvciIgdHlwZT0iU3RyaW5nIj5BbnkgdmFsaWQgalF1ZXJ5IHNlbGVjdG9yLjwvcGFyYW0+DQoNCiAgICAgICAgICAgIC8vICRmb3JtcyBpbmNsdWRlcyBhbGwgZm9ybXMgaW4gc2VsZWN0b3IncyBET00gaGllcmFyY2h5IChwYXJlbnQsIGNoaWxkcmVuIGFuZCBzZWxmKSB0aGF0IGhhdmUgYXQgbGVhc3Qgb25lDQogICAgICAgICAgICAvLyBlbGVtZW50IHdpdGggZGF0YS12YWw9dHJ1ZQ0KICAgICAgICAgICAgdmFyICRzZWxlY3RvciA9ICQoc2VsZWN0b3IpLA0KICAgICAgICAgICAgICAgICRmb3JtcyA9ICRzZWxlY3Rvci5wYXJlbnRzKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQmFjaygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigiZm9ybSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZCgkc2VsZWN0b3IuZmluZCgiZm9ybSIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oYXMoIltkYXRhLXZhbD10cnVlXSIpOw0KDQogICAgICAgICAgICAkc2VsZWN0b3IuZmluZCgiW2RhdGEtdmFsPXRydWVdIikuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgJGpRdmFsLnVub2J0cnVzaXZlLnBhcnNlRWxlbWVudCh0aGlzLCB0cnVlKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAkZm9ybXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIGluZm8gPSB2YWxpZGF0aW9uSW5mbyh0aGlzKTsNCiAgICAgICAgICAgICAgICBpZiAoaW5mbykgew0KICAgICAgICAgICAgICAgICAgICBpbmZvLmF0dGFjaFZhbGlkYXRpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBhZGFwdGVycyA9ICRqUXZhbC51bm9idHJ1c2l2ZS5hZGFwdGVyczsNCg0KICAgIGFkYXB0ZXJzLmFkZCA9IGZ1bmN0aW9uIChhZGFwdGVyTmFtZSwgcGFyYW1zLCBmbikgew0KICAgICAgICAvLy8gPHN1bW1hcnk+QWRkcyBhIG5ldyBhZGFwdGVyIHRvIGNvbnZlcnQgdW5vYnRydXNpdmUgSFRNTCBpbnRvIGEgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24uPC9zdW1tYXJ5Pg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9ImFkYXB0ZXJOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBhZGFwdGVyIHRvIGJlIGFkZGVkLiBUaGlzIG1hdGNoZXMgdGhlIG5hbWUgdXNlZA0KICAgICAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJwYXJhbXMiIHR5cGU9IkFycmF5IiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBBbiBhcnJheSBvZiBwYXJhbWV0ZXIgbmFtZXMgKHN0cmluZ3MpIHRoYXQgd2lsbA0KICAgICAgICAvLy8gYmUgZXh0cmFjdGVkIGZyb20gdGhlIGRhdGEtdmFsLW5ubm4tbW1tbSBIVE1MIGF0dHJpYnV0ZXMgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSwgYW5kDQogICAgICAgIC8vLyBtbW1tIGlzIHRoZSBwYXJhbWV0ZXIgbmFtZSkuPC9wYXJhbT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJmbiIgdHlwZT0iRnVuY3Rpb24iPlRoZSBmdW5jdGlvbiB0byBjYWxsLCB3aGljaCBhZGFwdHMgdGhlIHZhbHVlcyBmcm9tIHRoZSBIVE1MDQogICAgICAgIC8vLyBhdHRyaWJ1dGVzIGludG8galF1ZXJ5IFZhbGlkYXRlIHJ1bGVzIGFuZC9vciBtZXNzYWdlcy48L3BhcmFtPg0KICAgICAgICAvLy8gPHJldHVybnMgdHlwZT0ialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVycyIgLz4NCiAgICAgICAgaWYgKCFmbikgeyAgLy8gQ2FsbGVkIHdpdGggbm8gcGFyYW1zLCBqdXN0IGEgZnVuY3Rpb24NCiAgICAgICAgICAgIGZuID0gcGFyYW1zOw0KICAgICAgICAgICAgcGFyYW1zID0gW107DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5wdXNoKHsgbmFtZTogYWRhcHRlck5hbWUsIHBhcmFtczogcGFyYW1zLCBhZGFwdDogZm4gfSk7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgIH07DQoNCiAgICBhZGFwdGVycy5hZGRCb29sID0gZnVuY3Rpb24gKGFkYXB0ZXJOYW1lLCBydWxlTmFtZSkgew0KICAgICAgICAvLy8gPHN1bW1hcnk+QWRkcyBhIG5ldyBhZGFwdGVyIHRvIGNvbnZlcnQgdW5vYnRydXNpdmUgSFRNTCBpbnRvIGEgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24sIHdoZXJlDQogICAgICAgIC8vLyB0aGUgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24gcnVsZSBoYXMgbm8gcGFyYW1ldGVyIHZhbHVlcy48L3N1bW1hcnk+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iYWRhcHRlck5hbWUiIHR5cGU9IlN0cmluZyI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkDQogICAgICAgIC8vLyBpbiB0aGUgZGF0YS12YWwtbm5ubiBIVE1MIGF0dHJpYnV0ZSAod2hlcmUgbm5ubiBpcyB0aGUgYWRhcHRlciBuYW1lKS48L3BhcmFtPg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9InJ1bGVOYW1lIiB0eXBlPSJTdHJpbmciIG9wdGlvbmFsPSJ0cnVlIj5bT3B0aW9uYWxdIFRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgdmFsdWUNCiAgICAgICAgLy8vIG9mIGFkYXB0ZXJOYW1lIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPSJqUXVlcnkudmFsaWRhdG9yLnVub2J0cnVzaXZlLmFkYXB0ZXJzIiAvPg0KICAgICAgICByZXR1cm4gdGhpcy5hZGQoYWRhcHRlck5hbWUsIGZ1bmN0aW9uIChvcHRpb25zKSB7DQogICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIHJ1bGVOYW1lIHx8IGFkYXB0ZXJOYW1lLCB0cnVlKTsNCiAgICAgICAgfSk7DQogICAgfTsNCg0KICAgIGFkYXB0ZXJzLmFkZE1pbk1heCA9IGZ1bmN0aW9uIChhZGFwdGVyTmFtZSwgbWluUnVsZU5hbWUsIG1heFJ1bGVOYW1lLCBtaW5NYXhSdWxlTmFtZSwgbWluQXR0cmlidXRlLCBtYXhBdHRyaWJ1dGUpIHsNCiAgICAgICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBuZXcgYWRhcHRlciB0byBjb252ZXJ0IHVub2J0cnVzaXZlIEhUTUwgaW50byBhIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uLCB3aGVyZQ0KICAgICAgICAvLy8gdGhlIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uIGhhcyB0aHJlZSBwb3RlbnRpYWwgcnVsZXMgKG9uZSBmb3IgbWluLW9ubHksIG9uZSBmb3IgbWF4LW9ubHksIGFuZA0KICAgICAgICAvLy8gb25lIGZvciBtaW4tYW5kLW1heCkuIFRoZSBIVE1MIHBhcmFtZXRlcnMgYXJlIGV4cGVjdGVkIHRvIGJlIG5hbWVkIC1taW4gYW5kIC1tYXguPC9zdW1tYXJ5Pg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9ImFkYXB0ZXJOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBhZGFwdGVyIHRvIGJlIGFkZGVkLiBUaGlzIG1hdGNoZXMgdGhlIG5hbWUgdXNlZA0KICAgICAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJtaW5SdWxlTmFtZSIgdHlwZT0iU3RyaW5nIj5UaGUgbmFtZSBvZiB0aGUgalF1ZXJ5IFZhbGlkYXRlIHJ1bGUgdG8gYmUgdXNlZCB3aGVuIHlvdSBvbmx5DQogICAgICAgIC8vLyBoYXZlIGEgbWluaW11bSB2YWx1ZS48L3BhcmFtPg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1heFJ1bGVOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZSB0byBiZSB1c2VkIHdoZW4geW91IG9ubHkNCiAgICAgICAgLy8vIGhhdmUgYSBtYXhpbXVtIHZhbHVlLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0ibWluTWF4UnVsZU5hbWUiIHR5cGU9IlN0cmluZyI+VGhlIG5hbWUgb2YgdGhlIGpRdWVyeSBWYWxpZGF0ZSBydWxlIHRvIGJlIHVzZWQgd2hlbiB5b3UNCiAgICAgICAgLy8vIGhhdmUgYm90aCBhIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuPC9wYXJhbT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJtaW5BdHRyaWJ1dGUiIHR5cGU9IlN0cmluZyIgb3B0aW9uYWw9InRydWUiPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIEhUTUwgYXR0cmlidXRlIHRoYXQNCiAgICAgICAgLy8vIGNvbnRhaW5zIHRoZSBtaW5pbXVtIHZhbHVlLiBUaGUgZGVmYXVsdCBpcyAibWluIi48L3BhcmFtPg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1heEF0dHJpYnV0ZSIgdHlwZT0iU3RyaW5nIiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBUaGUgbmFtZSBvZiB0aGUgSFRNTCBhdHRyaWJ1dGUgdGhhdA0KICAgICAgICAvLy8gY29udGFpbnMgdGhlIG1heGltdW0gdmFsdWUuIFRoZSBkZWZhdWx0IGlzICJtYXgiLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPSJqUXVlcnkudmFsaWRhdG9yLnVub2J0cnVzaXZlLmFkYXB0ZXJzIiAvPg0KICAgICAgICByZXR1cm4gdGhpcy5hZGQoYWRhcHRlck5hbWUsIFttaW5BdHRyaWJ1dGUgfHwgIm1pbiIsIG1heEF0dHJpYnV0ZSB8fCAibWF4Il0sIGZ1bmN0aW9uIChvcHRpb25zKSB7DQogICAgICAgICAgICB2YXIgbWluID0gb3B0aW9ucy5wYXJhbXMubWluLA0KICAgICAgICAgICAgICAgIG1heCA9IG9wdGlvbnMucGFyYW1zLm1heDsNCg0KICAgICAgICAgICAgaWYgKG1pbiAmJiBtYXgpIHsNCiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIG1pbk1heFJ1bGVOYW1lLCBbbWluLCBtYXhdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG1pbikgew0KICAgICAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgbWluUnVsZU5hbWUsIG1pbik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChtYXgpIHsNCiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIG1heFJ1bGVOYW1lLCBtYXgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsID0gZnVuY3Rpb24gKGFkYXB0ZXJOYW1lLCBhdHRyaWJ1dGUsIHJ1bGVOYW1lKSB7DQogICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiwgd2hlcmUNCiAgICAgICAgLy8vIHRoZSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiBydWxlIGhhcyBhIHNpbmdsZSB2YWx1ZS48L3N1bW1hcnk+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iYWRhcHRlck5hbWUiIHR5cGU9IlN0cmluZyI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkDQogICAgICAgIC8vLyBpbiB0aGUgZGF0YS12YWwtbm5ubiBIVE1MIGF0dHJpYnV0ZSh3aGVyZSBubm5uIGlzIHRoZSBhZGFwdGVyIG5hbWUpLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iYXR0cmlidXRlIiB0eXBlPSJTdHJpbmciPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIEhUTUwgYXR0cmlidXRlIHRoYXQgY29udGFpbnMgdGhlIHZhbHVlLg0KICAgICAgICAvLy8gVGhlIGRlZmF1bHQgaXMgInZhbCIuPC9wYXJhbT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJydWxlTmFtZSIgdHlwZT0iU3RyaW5nIiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBUaGUgbmFtZSBvZiB0aGUgalF1ZXJ5IFZhbGlkYXRlIHJ1bGUuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZhbHVlDQogICAgICAgIC8vLyBvZiBhZGFwdGVyTmFtZSB3aWxsIGJlIHVzZWQgaW5zdGVhZC48L3BhcmFtPg0KICAgICAgICAvLy8gPHJldHVybnMgdHlwZT0ialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVycyIgLz4NCiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGFkYXB0ZXJOYW1lLCBbYXR0cmlidXRlIHx8ICJ2YWwiXSwgZnVuY3Rpb24gKG9wdGlvbnMpIHsNCiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgcnVsZU5hbWUgfHwgYWRhcHRlck5hbWUsIG9wdGlvbnMucGFyYW1zW2F0dHJpYnV0ZV0pOw0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgJGpRdmFsLmFkZE1ldGhvZCgiX19kdW1teV9fIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSk7DQoNCiAgICAkalF2YWwuYWRkTWV0aG9kKCJyZWdleCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCwgcGFyYW1zKSB7DQogICAgICAgIHZhciBtYXRjaDsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9uYWwoZWxlbWVudCkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgbWF0Y2ggPSBuZXcgUmVnRXhwKHBhcmFtcykuZXhlYyh2YWx1ZSk7DQogICAgICAgIHJldHVybiAobWF0Y2ggJiYgKG1hdGNoLmluZGV4ID09PSAwKSAmJiAobWF0Y2hbMF0ubGVuZ3RoID09PSB2YWx1ZS5sZW5ndGgpKTsNCiAgICB9KTsNCg0KICAgICRqUXZhbC5hZGRNZXRob2QoIm5vbmFscGhhbWluIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBub25hbHBoYW1pbikgew0KICAgICAgICB2YXIgbWF0Y2g7DQogICAgICAgIGlmIChub25hbHBoYW1pbikgew0KICAgICAgICAgICAgbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFcvZyk7DQogICAgICAgICAgICBtYXRjaCA9IG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSBub25hbHBoYW1pbjsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfSk7DQoNCiAgICBpZiAoJGpRdmFsLm1ldGhvZHMuZXh0ZW5zaW9uKSB7DQogICAgICAgIGFkYXB0ZXJzLmFkZFNpbmdsZVZhbCgiYWNjZXB0IiwgIm1pbXR5cGUiKTsNCiAgICAgICAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsKCJleHRlbnNpb24iLCAiZXh0ZW5zaW9uIik7DQogICAgfSBlbHNlIHsNCiAgICAgICAgLy8gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHdoZW4gdGhlICdleHRlbnNpb24nIHZhbGlkYXRpb24gbWV0aG9kIGRvZXMgbm90IGV4aXN0LCBzdWNoIGFzIHdpdGggdmVyc2lvbnMNCiAgICAgICAgLy8gb2YgSlF1ZXJ5IFZhbGlkYXRpb24gcGx1Z2luIHByaW9yIHRvIDEuMTAsIHdlIHNob3VsZCB1c2UgdGhlICdhY2NlcHQnIG1ldGhvZCBmb3INCiAgICAgICAgLy8gdmFsaWRhdGluZyB0aGUgZXh0ZW5zaW9uLCBhbmQgaWdub3JlIG1pbWUtdHlwZSB2YWxpZGF0aW9ucyBhcyB0aGV5IGFyZSBub3Qgc3VwcG9ydGVkLg0KICAgICAgICBhZGFwdGVycy5hZGRTaW5nbGVWYWwoImV4dGVuc2lvbiIsICJleHRlbnNpb24iLCAiYWNjZXB0Iik7DQogICAgfQ0KDQogICAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsKCJyZWdleCIsICJwYXR0ZXJuIik7DQogICAgYWRhcHRlcnMuYWRkQm9vbCgiY3JlZGl0Y2FyZCIpLmFkZEJvb2woImRhdGUiKS5hZGRCb29sKCJkaWdpdHMiKS5hZGRCb29sKCJlbWFpbCIpLmFkZEJvb2woIm51bWJlciIpLmFkZEJvb2woInVybCIpOw0KICAgIGFkYXB0ZXJzLmFkZE1pbk1heCgibGVuZ3RoIiwgIm1pbmxlbmd0aCIsICJtYXhsZW5ndGgiLCAicmFuZ2VsZW5ndGgiKS5hZGRNaW5NYXgoInJhbmdlIiwgIm1pbiIsICJtYXgiLCAicmFuZ2UiKTsNCiAgICBhZGFwdGVycy5hZGRNaW5NYXgoIm1pbmxlbmd0aCIsICJtaW5sZW5ndGgiKS5hZGRNaW5NYXgoIm1heGxlbmd0aCIsICJtaW5sZW5ndGgiLCAibWF4bGVuZ3RoIik7DQogICAgYWRhcHRlcnMuYWRkKCJlcXVhbHRvIiwgWyJvdGhlciJdLCBmdW5jdGlvbiAob3B0aW9ucykgew0KICAgICAgICB2YXIgcHJlZml4ID0gZ2V0TW9kZWxQcmVmaXgob3B0aW9ucy5lbGVtZW50Lm5hbWUpLA0KICAgICAgICAgICAgb3RoZXIgPSBvcHRpb25zLnBhcmFtcy5vdGhlciwNCiAgICAgICAgICAgIGZ1bGxPdGhlck5hbWUgPSBhcHBlbmRNb2RlbFByZWZpeChvdGhlciwgcHJlZml4KSwNCiAgICAgICAgICAgIGVsZW1lbnQgPSAkKG9wdGlvbnMuZm9ybSkuZmluZCgiOmlucHV0IikuZmlsdGVyKCJbbmFtZT0nIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGZ1bGxPdGhlck5hbWUpICsgIiddIilbMF07DQoNCiAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCAiZXF1YWxUbyIsIGVsZW1lbnQpOw0KICAgIH0pOw0KICAgIGFkYXB0ZXJzLmFkZCgicmVxdWlyZWQiLCBmdW5jdGlvbiAob3B0aW9ucykgew0KICAgICAgICAvLyBqUXVlcnkgVmFsaWRhdGUgZXF1YXRlcyAicmVxdWlyZWQiIHdpdGggIm1hbmRhdG9yeSIgZm9yIGNoZWNrYm94IGVsZW1lbnRzDQogICAgICAgIGlmIChvcHRpb25zLmVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSAiSU5QVVQiIHx8IG9wdGlvbnMuZWxlbWVudC50eXBlLnRvVXBwZXJDYXNlKCkgIT09ICJDSEVDS0JPWCIpIHsNCiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgInJlcXVpcmVkIiwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICBhZGFwdGVycy5hZGQoInJlbW90ZSIsIFsidXJsIiwgInR5cGUiLCAiYWRkaXRpb25hbGZpZWxkcyJdLCBmdW5jdGlvbiAob3B0aW9ucykgew0KICAgICAgICB2YXIgdmFsdWUgPSB7DQogICAgICAgICAgICB1cmw6IG9wdGlvbnMucGFyYW1zLnVybCwNCiAgICAgICAgICAgIHR5cGU6IG9wdGlvbnMucGFyYW1zLnR5cGUgfHwgIkdFVCIsDQogICAgICAgICAgICBkYXRhOiB7fQ0KICAgICAgICB9LA0KICAgICAgICAgICAgcHJlZml4ID0gZ2V0TW9kZWxQcmVmaXgob3B0aW9ucy5lbGVtZW50Lm5hbWUpOw0KDQogICAgICAgICQuZWFjaChzcGxpdEFuZFRyaW0ob3B0aW9ucy5wYXJhbXMuYWRkaXRpb25hbGZpZWxkcyB8fCBvcHRpb25zLmVsZW1lbnQubmFtZSksIGZ1bmN0aW9uIChpLCBmaWVsZE5hbWUpIHsNCiAgICAgICAgICAgIHZhciBwYXJhbU5hbWUgPSBhcHBlbmRNb2RlbFByZWZpeChmaWVsZE5hbWUsIHByZWZpeCk7DQogICAgICAgICAgICB2YWx1ZS5kYXRhW3BhcmFtTmFtZV0gPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gJChvcHRpb25zLmZvcm0pLmZpbmQoIjppbnB1dCIpLmZpbHRlcigiW25hbWU9JyIgKyBlc2NhcGVBdHRyaWJ1dGVWYWx1ZShwYXJhbU5hbWUpICsgIiddIik7DQogICAgICAgICAgICAgICAgLy8gRm9yIGNoZWNrYm94ZXMgYW5kIHJhZGlvIGJ1dHRvbnMsIG9ubHkgcGljayB1cCB2YWx1ZXMgZnJvbSBjaGVja2VkIGZpZWxkcy4NCiAgICAgICAgICAgICAgICBpZiAoZmllbGQuaXMoIjpjaGVja2JveCIpKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZC5maWx0ZXIoIjpjaGVja2VkIikudmFsKCkgfHwgZmllbGQuZmlsdGVyKCI6aGlkZGVuIikudmFsKCkgfHwgJyc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkLmlzKCI6cmFkaW8iKSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGQuZmlsdGVyKCI6Y2hlY2tlZCIpLnZhbCgpIHx8ICcnOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGQudmFsKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICB9KTsNCg0KICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsICJyZW1vdGUiLCB2YWx1ZSk7DQogICAgfSk7DQogICAgYWRhcHRlcnMuYWRkKCJwYXNzd29yZCIsIFsibWluIiwgIm5vbmFscGhhbWluIiwgInJlZ2V4Il0sIGZ1bmN0aW9uIChvcHRpb25zKSB7DQogICAgICAgIGlmIChvcHRpb25zLnBhcmFtcy5taW4pIHsNCiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgIm1pbmxlbmd0aCIsIG9wdGlvbnMucGFyYW1zLm1pbik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdGlvbnMucGFyYW1zLm5vbmFscGhhbWluKSB7DQogICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsICJub25hbHBoYW1pbiIsIG9wdGlvbnMucGFyYW1zLm5vbmFscGhhbWluKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXMucmVnZXgpIHsNCiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgInJlZ2V4Iiwgb3B0aW9ucy5wYXJhbXMucmVnZXgpOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAkKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgJGpRdmFsLnVub2J0cnVzaXZlLnBhcnNlKGRvY3VtZW50KTsNCiAgICB9KTsNCg0KICAgIHJldHVybiAkalF2YWwudW5vYnRydXNpdmU7DQp9KSk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 19584
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 500
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: "de-DE"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
- Language: "fr-FR"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: "ja-JP"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
