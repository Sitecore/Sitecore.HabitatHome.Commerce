---
ID: "55723a0d-5253-4236-9bbe-21bde0518ba0"
Parent: "6d758b6b-3c40-43f6-bc12-1f2be03b7fee"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: /sitecore/media library/Themes/Habitat SXA Sites/Habitat Home Store/scripts/vendors/jqueryvalidateunobtrusive
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/0049D2E0836942ECB673F767DEAA0EFF.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "dc8b03e8-bbc3-446d-9098-7b8dad8b9170"
  Value: Ly8gVW5vYnRydXNpdmUgdmFsaWRhdGlvbiBzdXBwb3J0IGxpYnJhcnkgZm9yIGpRdWVyeSBhbmQgalF1ZXJ5IFZhbGlkYXRlCi8vIENvcHlyaWdodCAoQykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLyBAdmVyc2lvbiB2My4yLjYKCi8qanNsaW50IHdoaXRlOiB0cnVlLCBicm93c2VyOiB0cnVlLCBvbmV2YXI6IHRydWUsIHVuZGVmOiB0cnVlLCBub21lbjogdHJ1ZSwgZXFlcWVxOiB0cnVlLCBwbHVzcGx1czogdHJ1ZSwgYml0d2lzZTogdHJ1ZSwgcmVnZXhwOiB0cnVlLCBuZXdjYXA6IHRydWUsIGltbWVkOiB0cnVlLCBzdHJpY3Q6IGZhbHNlICovCi8qZ2xvYmFsIGRvY3VtZW50OiBmYWxzZSwgalF1ZXJ5OiBmYWxzZSAqLwoKKGZ1bmN0aW9uIChmYWN0b3J5KSB7CiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLgogICAgICAgIGRlZmluZSgianF1ZXJ5LnZhbGlkYXRlLnVub2J0cnVzaXZlIiwgWydqcXVlcnkudmFsaWRhdGUnXSwgZmFjdG9yeSk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzICAgICAKICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5LXZhbGlkYXRpb24nKSk7CiAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsCiAgICAgICAgalF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZSA9IGZhY3RvcnkoalF1ZXJ5KTsKICAgIH0KfShmdW5jdGlvbiAoJCkgewogICAgdmFyICRqUXZhbCA9ICQudmFsaWRhdG9yLAogICAgICAgIGFkYXB0ZXJzLAogICAgICAgIGRhdGFfdmFsaWRhdGlvbiA9ICJ1bm9idHJ1c2l2ZVZhbGlkYXRpb24iOwoKICAgIGZ1bmN0aW9uIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgcnVsZU5hbWUsIHZhbHVlKSB7CiAgICAgICAgb3B0aW9ucy5ydWxlc1tydWxlTmFtZV0gPSB2YWx1ZTsKICAgICAgICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7CiAgICAgICAgICAgIG9wdGlvbnMubWVzc2FnZXNbcnVsZU5hbWVdID0gb3B0aW9ucy5tZXNzYWdlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzcGxpdEFuZFRyaW0odmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXlxzK3xccyskL2csICIiKS5zcGxpdCgvXHMqLFxzKi9nKTsKICAgIH0KCiAgICBmdW5jdGlvbiBlc2NhcGVBdHRyaWJ1dGVWYWx1ZSh2YWx1ZSkgewogICAgICAgIC8vIEFzIG1lbnRpb25lZCBvbiBodHRwOi8vYXBpLmpxdWVyeS5jb20vY2F0ZWdvcnkvc2VsZWN0b3JzLwogICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oWyEiIyQlJicoKSorLC4vOjs8PT4/QFxbXFxcXV5ge3x9fl0pL2csICJcXCQxIik7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TW9kZWxQcmVmaXgoZmllbGROYW1lKSB7CiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZS5zdWJzdHIoMCwgZmllbGROYW1lLmxhc3RJbmRleE9mKCIuIikgKyAxKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHBlbmRNb2RlbFByZWZpeCh2YWx1ZSwgcHJlZml4KSB7CiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoIiouIikgPT09IDApIHsKICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCIqLiIsIHByZWZpeCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbkVycm9yKGVycm9yLCBpbnB1dEVsZW1lbnQpIHsgIC8vICd0aGlzJyBpcyB0aGUgZm9ybSBlbGVtZW50CiAgICAgICAgdmFyIGNvbnRhaW5lciA9ICQodGhpcykuZmluZCgiW2RhdGEtdmFsbXNnLWZvcj0nIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGlucHV0RWxlbWVudFswXS5uYW1lKSArICInXSIpLAogICAgICAgICAgICByZXBsYWNlQXR0clZhbHVlID0gY29udGFpbmVyLmF0dHIoImRhdGEtdmFsbXNnLXJlcGxhY2UiKSwKICAgICAgICAgICAgcmVwbGFjZSA9IHJlcGxhY2VBdHRyVmFsdWUgPyAkLnBhcnNlSlNPTihyZXBsYWNlQXR0clZhbHVlKSAhPT0gZmFsc2UgOiBudWxsOwoKICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tdmFsaWQiKS5hZGRDbGFzcygiZmllbGQtdmFsaWRhdGlvbi1lcnJvciIpOwogICAgICAgIGVycm9yLmRhdGEoInVub2J0cnVzaXZlQ29udGFpbmVyIiwgY29udGFpbmVyKTsKCiAgICAgICAgaWYgKHJlcGxhY2UpIHsKICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7CiAgICAgICAgICAgIGVycm9yLnJlbW92ZUNsYXNzKCJpbnB1dC12YWxpZGF0aW9uLWVycm9yIikuYXBwZW5kVG8oY29udGFpbmVyKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGVycm9yLmhpZGUoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25FcnJvcnMoZXZlbnQsIHZhbGlkYXRvcikgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnQKICAgICAgICB2YXIgY29udGFpbmVyID0gJCh0aGlzKS5maW5kKCJbZGF0YS12YWxtc2ctc3VtbWFyeT10cnVlXSIpLAogICAgICAgICAgICBsaXN0ID0gY29udGFpbmVyLmZpbmQoInVsIik7CgogICAgICAgIGlmIChsaXN0ICYmIGxpc3QubGVuZ3RoICYmIHZhbGlkYXRvci5lcnJvckxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgIGxpc3QuZW1wdHkoKTsKICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCJ2YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzIikucmVtb3ZlQ2xhc3MoInZhbGlkYXRpb24tc3VtbWFyeS12YWxpZCIpOwoKICAgICAgICAgICAgJC5lYWNoKHZhbGlkYXRvci5lcnJvckxpc3QsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQoIjxsaSAvPiIpLmh0bWwodGhpcy5tZXNzYWdlKS5hcHBlbmRUbyhsaXN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhlcnJvcikgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnQKICAgICAgICB2YXIgY29udGFpbmVyID0gZXJyb3IuZGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKTsKCiAgICAgICAgaWYgKGNvbnRhaW5lcikgewogICAgICAgICAgICB2YXIgcmVwbGFjZUF0dHJWYWx1ZSA9IGNvbnRhaW5lci5hdHRyKCJkYXRhLXZhbG1zZy1yZXBsYWNlIiksCiAgICAgICAgICAgICAgICByZXBsYWNlID0gcmVwbGFjZUF0dHJWYWx1ZSA/ICQucGFyc2VKU09OKHJlcGxhY2VBdHRyVmFsdWUpIDogbnVsbDsKCiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygiZmllbGQtdmFsaWRhdGlvbi12YWxpZCIpLnJlbW92ZUNsYXNzKCJmaWVsZC12YWxpZGF0aW9uLWVycm9yIik7CiAgICAgICAgICAgIGVycm9yLnJlbW92ZURhdGEoInVub2J0cnVzaXZlQ29udGFpbmVyIik7CgogICAgICAgICAgICBpZiAocmVwbGFjZSkgewogICAgICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gb25SZXNldChldmVudCkgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnQKICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpLAogICAgICAgICAgICBrZXkgPSAnX19qcXVlcnlfdW5vYnRydXNpdmVfdmFsaWRhdGlvbl9mb3JtX3Jlc2V0JzsKICAgICAgICBpZiAoJGZvcm0uZGF0YShrZXkpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gU2V0IGEgZmxhZyB0aGF0IGluZGljYXRlcyB3ZSdyZSBjdXJyZW50bHkgcmVzZXR0aW5nIHRoZSBmb3JtLgogICAgICAgICRmb3JtLmRhdGEoa2V5LCB0cnVlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAkZm9ybS5kYXRhKCJ2YWxpZGF0b3IiKS5yZXNldEZvcm0oKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAkZm9ybS5yZW1vdmVEYXRhKGtleSk7CiAgICAgICAgfQoKICAgICAgICAkZm9ybS5maW5kKCIudmFsaWRhdGlvbi1zdW1tYXJ5LWVycm9ycyIpCiAgICAgICAgICAgIC5hZGRDbGFzcygidmFsaWRhdGlvbi1zdW1tYXJ5LXZhbGlkIikKICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCJ2YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzIik7CiAgICAgICAgJGZvcm0uZmluZCgiLmZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKQogICAgICAgICAgICAuYWRkQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tdmFsaWQiKQogICAgICAgICAgICAucmVtb3ZlQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKQogICAgICAgICAgICAucmVtb3ZlRGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKQogICAgICAgICAgICAuZmluZCgiPioiKSAgLy8gSWYgd2Ugd2VyZSB1c2luZyB2YWxtc2ctcmVwbGFjZSwgZ2V0IHRoZSB1bmRlcmx5aW5nIGVycm9yCiAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKTsKICAgIH0KCiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uSW5mbyhmb3JtKSB7CiAgICAgICAgdmFyICRmb3JtID0gJChmb3JtKSwKICAgICAgICAgICAgcmVzdWx0ID0gJGZvcm0uZGF0YShkYXRhX3ZhbGlkYXRpb24pLAogICAgICAgICAgICBvblJlc2V0UHJveHkgPSAkLnByb3h5KG9uUmVzZXQsIGZvcm0pLAogICAgICAgICAgICBkZWZhdWx0T3B0aW9ucyA9ICRqUXZhbC51bm9idHJ1c2l2ZS5vcHRpb25zIHx8IHt9LAogICAgICAgICAgICBleGVjSW5Db250ZXh0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHsKICAgICAgICAgICAgICAgIHZhciBmdW5jID0gZGVmYXVsdE9wdGlvbnNbbmFtZV07CiAgICAgICAgICAgICAgICBmdW5jICYmICQuaXNGdW5jdGlvbihmdW5jKSAmJiBmdW5jLmFwcGx5KGZvcm0sIGFyZ3MpOwogICAgICAgICAgICB9CgogICAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgIG9wdGlvbnM6IHsgIC8vIG9wdGlvbnMgc3RydWN0dXJlIHBhc3NlZCB0byBqUXVlcnkgVmFsaWRhdGUncyB2YWxpZGF0ZSgpIG1ldGhvZAogICAgICAgICAgICAgICAgICAgIGVycm9yQ2xhc3M6IGRlZmF1bHRPcHRpb25zLmVycm9yQ2xhc3MgfHwgImlucHV0LXZhbGlkYXRpb24tZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudDogZGVmYXVsdE9wdGlvbnMuZXJyb3JFbGVtZW50IHx8ICJzcGFuIiwKICAgICAgICAgICAgICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLmFwcGx5KGZvcm0sIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNJbkNvbnRleHQoImVycm9yUGxhY2VtZW50IiwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGludmFsaWRIYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3JzLmFwcGx5KGZvcm0sIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNJbkNvbnRleHQoImludmFsaWRIYW5kbGVyIiwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB7fSwKICAgICAgICAgICAgICAgICAgICBydWxlczoge30sCiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3MuYXBwbHkoZm9ybSwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgZXhlY0luQ29udGV4dCgic3VjY2VzcyIsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF0dGFjaFZhbGlkYXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkZm9ybQogICAgICAgICAgICAgICAgICAgICAgICAub2ZmKCJyZXNldC4iICsgZGF0YV92YWxpZGF0aW9uLCBvblJlc2V0UHJveHkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbigicmVzZXQuIiArIGRhdGFfdmFsaWRhdGlvbiwgb25SZXNldFByb3h5KQogICAgICAgICAgICAgICAgICAgICAgICAudmFsaWRhdGUodGhpcy5vcHRpb25zKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gKCkgeyAgLy8gYSB2YWxpZGF0aW9uIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGJ5IHVub2J0cnVzaXZlIEFqYXgKICAgICAgICAgICAgICAgICAgICAkZm9ybS52YWxpZGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAkZm9ybS52YWxpZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICAkZm9ybS5kYXRhKGRhdGFfdmFsaWRhdGlvbiwgcmVzdWx0KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgJGpRdmFsLnVub2J0cnVzaXZlID0gewogICAgICAgIGFkYXB0ZXJzOiBbXSwKCiAgICAgICAgcGFyc2VFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgc2tpcEF0dGFjaCkgewogICAgICAgICAgICAvLy8gPHN1bW1hcnk+CiAgICAgICAgICAgIC8vLyBQYXJzZXMgYSBzaW5nbGUgSFRNTCBlbGVtZW50IGZvciB1bm9idHJ1c2l2ZSB2YWxpZGF0aW9uIGF0dHJpYnV0ZXMuCiAgICAgICAgICAgIC8vLyA8L3N1bW1hcnk+CiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iZWxlbWVudCIgZG9tRWxlbWVudD0idHJ1ZSI+VGhlIEhUTUwgZWxlbWVudCB0byBiZSBwYXJzZWQuPC9wYXJhbT4KICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJza2lwQXR0YWNoIiB0eXBlPSJCb29sZWFuIj5bT3B0aW9uYWxdIHRydWUgdG8gc2tpcCBhdHRhY2hpbmcgdGhlCiAgICAgICAgICAgIC8vLyB2YWxpZGF0aW9uIHRvIHRoZSBmb3JtLiBJZiBwYXJzaW5nIGp1c3QgdGhpcyBzaW5nbGUgZWxlbWVudCwgeW91IHNob3VsZCBzcGVjaWZ5IHRydWUuCiAgICAgICAgICAgIC8vLyBJZiBwYXJzaW5nIHNldmVyYWwgZWxlbWVudHMsIHlvdSBzaG91bGQgc3BlY2lmeSBmYWxzZSwgYW5kIG1hbnVhbGx5IGF0dGFjaCB0aGUgdmFsaWRhdGlvbgogICAgICAgICAgICAvLy8gdG8gdGhlIGZvcm0gd2hlbiB5b3UgYXJlIGZpbmlzaGVkLiBUaGUgZGVmYXVsdCBpcyBmYWxzZS48L3BhcmFtPgogICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLAogICAgICAgICAgICAgICAgZm9ybSA9ICRlbGVtZW50LnBhcmVudHMoImZvcm0iKVswXSwKICAgICAgICAgICAgICAgIHZhbEluZm8sIHJ1bGVzLCBtZXNzYWdlczsKCiAgICAgICAgICAgIGlmICghZm9ybSkgeyAgLy8gQ2Fubm90IGRvIGNsaWVudC1zaWRlIHZhbGlkYXRpb24gd2l0aG91dCBhIGZvcm0KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFsSW5mbyA9IHZhbGlkYXRpb25JbmZvKGZvcm0pOwogICAgICAgICAgICB2YWxJbmZvLm9wdGlvbnMucnVsZXNbZWxlbWVudC5uYW1lXSA9IHJ1bGVzID0ge307CiAgICAgICAgICAgIHZhbEluZm8ub3B0aW9ucy5tZXNzYWdlc1tlbGVtZW50Lm5hbWVdID0gbWVzc2FnZXMgPSB7fTsKCiAgICAgICAgICAgICQuZWFjaCh0aGlzLmFkYXB0ZXJzLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJlZml4ID0gImRhdGEtdmFsLSIgKyB0aGlzLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICRlbGVtZW50LmF0dHIocHJlZml4KSwKICAgICAgICAgICAgICAgICAgICBwYXJhbVZhbHVlcyA9IHt9OwoKICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHsgIC8vIENvbXBhcmUgYWdhaW5zdCB1bmRlZmluZWQsIGJlY2F1c2UgYW4gZW1wdHkgbWVzc2FnZSBpcyBsZWdhbCAoYW5kIGZhbHN5KQogICAgICAgICAgICAgICAgICAgIHByZWZpeCArPSAiLSI7CgogICAgICAgICAgICAgICAgICAgICQuZWFjaCh0aGlzLnBhcmFtcywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbVZhbHVlc1t0aGlzXSA9ICRlbGVtZW50LmF0dHIocHJlZml4ICsgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRhcHQoewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiBmb3JtLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtVmFsdWVzLAogICAgICAgICAgICAgICAgICAgICAgICBydWxlczogcnVsZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICQuZXh0ZW5kKHJ1bGVzLCB7ICJfX2R1bW15X18iOiB0cnVlIH0pOwoKICAgICAgICAgICAgaWYgKCFza2lwQXR0YWNoKSB7CiAgICAgICAgICAgICAgICB2YWxJbmZvLmF0dGFjaFZhbGlkYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHsKICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PgogICAgICAgICAgICAvLy8gUGFyc2VzIGFsbCB0aGUgSFRNTCBlbGVtZW50cyBpbiB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yLiBJdCBsb29rcyBmb3IgaW5wdXQgZWxlbWVudHMgZGVjb3JhdGVkCiAgICAgICAgICAgIC8vLyB3aXRoIHRoZSBbZGF0YS12YWw9dHJ1ZV0gYXR0cmlidXRlIHZhbHVlIGFuZCBlbmFibGVzIHZhbGlkYXRpb24gYWNjb3JkaW5nIHRvIHRoZSBkYXRhLXZhbC0qCiAgICAgICAgICAgIC8vLyBhdHRyaWJ1dGUgdmFsdWVzLgogICAgICAgICAgICAvLy8gPC9zdW1tYXJ5PgogICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9InNlbGVjdG9yIiB0eXBlPSJTdHJpbmciPkFueSB2YWxpZCBqUXVlcnkgc2VsZWN0b3IuPC9wYXJhbT4KCiAgICAgICAgICAgIC8vICRmb3JtcyBpbmNsdWRlcyBhbGwgZm9ybXMgaW4gc2VsZWN0b3IncyBET00gaGllcmFyY2h5IChwYXJlbnQsIGNoaWxkcmVuIGFuZCBzZWxmKSB0aGF0IGhhdmUgYXQgbGVhc3Qgb25lCiAgICAgICAgICAgIC8vIGVsZW1lbnQgd2l0aCBkYXRhLXZhbD10cnVlCiAgICAgICAgICAgIHZhciAkc2VsZWN0b3IgPSAkKHNlbGVjdG9yKSwKICAgICAgICAgICAgICAgICRmb3JtcyA9ICRzZWxlY3Rvci5wYXJlbnRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRCYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoImZvcm0iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZCgkc2VsZWN0b3IuZmluZCgiZm9ybSIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhcygiW2RhdGEtdmFsPXRydWVdIik7CgogICAgICAgICAgICAkc2VsZWN0b3IuZmluZCgiW2RhdGEtdmFsPXRydWVdIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkalF2YWwudW5vYnRydXNpdmUucGFyc2VFbGVtZW50KHRoaXMsIHRydWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRmb3Jtcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBpbmZvID0gdmFsaWRhdGlvbkluZm8odGhpcyk7CiAgICAgICAgICAgICAgICBpZiAoaW5mbykgewogICAgICAgICAgICAgICAgICAgIGluZm8uYXR0YWNoVmFsaWRhdGlvbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIGFkYXB0ZXJzID0gJGpRdmFsLnVub2J0cnVzaXZlLmFkYXB0ZXJzOwoKICAgIGFkYXB0ZXJzLmFkZCA9IGZ1bmN0aW9uIChhZGFwdGVyTmFtZSwgcGFyYW1zLCBmbikgewogICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbi48L3N1bW1hcnk+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJhZGFwdGVyTmFtZSIgdHlwZT0iU3RyaW5nIj5UaGUgbmFtZSBvZiB0aGUgYWRhcHRlciB0byBiZSBhZGRlZC4gVGhpcyBtYXRjaGVzIHRoZSBuYW1lIHVzZWQKICAgICAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9InBhcmFtcyIgdHlwZT0iQXJyYXkiIG9wdGlvbmFsPSJ0cnVlIj5bT3B0aW9uYWxdIEFuIGFycmF5IG9mIHBhcmFtZXRlciBuYW1lcyAoc3RyaW5ncykgdGhhdCB3aWxsCiAgICAgICAgLy8vIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSBkYXRhLXZhbC1ubm5uLW1tbW0gSFRNTCBhdHRyaWJ1dGVzICh3aGVyZSBubm5uIGlzIHRoZSBhZGFwdGVyIG5hbWUsIGFuZAogICAgICAgIC8vLyBtbW1tIGlzIHRoZSBwYXJhbWV0ZXIgbmFtZSkuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9ImZuIiB0eXBlPSJGdW5jdGlvbiI+VGhlIGZ1bmN0aW9uIHRvIGNhbGwsIHdoaWNoIGFkYXB0cyB0aGUgdmFsdWVzIGZyb20gdGhlIEhUTUwKICAgICAgICAvLy8gYXR0cmlidXRlcyBpbnRvIGpRdWVyeSBWYWxpZGF0ZSBydWxlcyBhbmQvb3IgbWVzc2FnZXMuPC9wYXJhbT4KICAgICAgICAvLy8gPHJldHVybnMgdHlwZT0ialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVycyIgLz4KICAgICAgICBpZiAoIWZuKSB7ICAvLyBDYWxsZWQgd2l0aCBubyBwYXJhbXMsIGp1c3QgYSBmdW5jdGlvbgogICAgICAgICAgICBmbiA9IHBhcmFtczsKICAgICAgICAgICAgcGFyYW1zID0gW107CiAgICAgICAgfQogICAgICAgIHRoaXMucHVzaCh7IG5hbWU6IGFkYXB0ZXJOYW1lLCBwYXJhbXM6IHBhcmFtcywgYWRhcHQ6IGZuIH0pOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKCiAgICBhZGFwdGVycy5hZGRCb29sID0gZnVuY3Rpb24gKGFkYXB0ZXJOYW1lLCBydWxlTmFtZSkgewogICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiwgd2hlcmUKICAgICAgICAvLy8gdGhlIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uIHJ1bGUgaGFzIG5vIHBhcmFtZXRlciB2YWx1ZXMuPC9zdW1tYXJ5PgogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iYWRhcHRlck5hbWUiIHR5cGU9IlN0cmluZyI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkCiAgICAgICAgLy8vIGluIHRoZSBkYXRhLXZhbC1ubm5uIEhUTUwgYXR0cmlidXRlICh3aGVyZSBubm5uIGlzIHRoZSBhZGFwdGVyIG5hbWUpLjwvcGFyYW0+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJydWxlTmFtZSIgdHlwZT0iU3RyaW5nIiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBUaGUgbmFtZSBvZiB0aGUgalF1ZXJ5IFZhbGlkYXRlIHJ1bGUuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZhbHVlCiAgICAgICAgLy8vIG9mIGFkYXB0ZXJOYW1lIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLjwvcGFyYW0+CiAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9ImpRdWVyeS52YWxpZGF0b3IudW5vYnRydXNpdmUuYWRhcHRlcnMiIC8+CiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGFkYXB0ZXJOYW1lLCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIHJ1bGVOYW1lIHx8IGFkYXB0ZXJOYW1lLCB0cnVlKTsKICAgICAgICB9KTsKICAgIH07CgogICAgYWRhcHRlcnMuYWRkTWluTWF4ID0gZnVuY3Rpb24gKGFkYXB0ZXJOYW1lLCBtaW5SdWxlTmFtZSwgbWF4UnVsZU5hbWUsIG1pbk1heFJ1bGVOYW1lLCBtaW5BdHRyaWJ1dGUsIG1heEF0dHJpYnV0ZSkgewogICAgICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiwgd2hlcmUKICAgICAgICAvLy8gdGhlIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uIGhhcyB0aHJlZSBwb3RlbnRpYWwgcnVsZXMgKG9uZSBmb3IgbWluLW9ubHksIG9uZSBmb3IgbWF4LW9ubHksIGFuZAogICAgICAgIC8vLyBvbmUgZm9yIG1pbi1hbmQtbWF4KS4gVGhlIEhUTUwgcGFyYW1ldGVycyBhcmUgZXhwZWN0ZWQgdG8gYmUgbmFtZWQgLW1pbiBhbmQgLW1heC48L3N1bW1hcnk+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJhZGFwdGVyTmFtZSIgdHlwZT0iU3RyaW5nIj5UaGUgbmFtZSBvZiB0aGUgYWRhcHRlciB0byBiZSBhZGRlZC4gVGhpcyBtYXRjaGVzIHRoZSBuYW1lIHVzZWQKICAgICAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1pblJ1bGVOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZSB0byBiZSB1c2VkIHdoZW4geW91IG9ubHkKICAgICAgICAvLy8gaGF2ZSBhIG1pbmltdW0gdmFsdWUuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1heFJ1bGVOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZSB0byBiZSB1c2VkIHdoZW4geW91IG9ubHkKICAgICAgICAvLy8gaGF2ZSBhIG1heGltdW0gdmFsdWUuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1pbk1heFJ1bGVOYW1lIiB0eXBlPSJTdHJpbmciPlRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZSB0byBiZSB1c2VkIHdoZW4geW91CiAgICAgICAgLy8vIGhhdmUgYm90aCBhIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1pbkF0dHJpYnV0ZSIgdHlwZT0iU3RyaW5nIiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBUaGUgbmFtZSBvZiB0aGUgSFRNTCBhdHRyaWJ1dGUgdGhhdAogICAgICAgIC8vLyBjb250YWlucyB0aGUgbWluaW11bSB2YWx1ZS4gVGhlIGRlZmF1bHQgaXMgIm1pbiIuPC9wYXJhbT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9Im1heEF0dHJpYnV0ZSIgdHlwZT0iU3RyaW5nIiBvcHRpb25hbD0idHJ1ZSI+W09wdGlvbmFsXSBUaGUgbmFtZSBvZiB0aGUgSFRNTCBhdHRyaWJ1dGUgdGhhdAogICAgICAgIC8vLyBjb250YWlucyB0aGUgbWF4aW11bSB2YWx1ZS4gVGhlIGRlZmF1bHQgaXMgIm1heCIuPC9wYXJhbT4KICAgICAgICAvLy8gPHJldHVybnMgdHlwZT0ialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVycyIgLz4KICAgICAgICByZXR1cm4gdGhpcy5hZGQoYWRhcHRlck5hbWUsIFttaW5BdHRyaWJ1dGUgfHwgIm1pbiIsIG1heEF0dHJpYnV0ZSB8fCAibWF4Il0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgICAgIHZhciBtaW4gPSBvcHRpb25zLnBhcmFtcy5taW4sCiAgICAgICAgICAgICAgICBtYXggPSBvcHRpb25zLnBhcmFtcy5tYXg7CgogICAgICAgICAgICBpZiAobWluICYmIG1heCkgewogICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBtaW5NYXhSdWxlTmFtZSwgW21pbiwgbWF4XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobWluKSB7CiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIG1pblJ1bGVOYW1lLCBtaW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG1heCkgewogICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBtYXhSdWxlTmFtZSwgbWF4KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfTsKCiAgICBhZGFwdGVycy5hZGRTaW5nbGVWYWwgPSBmdW5jdGlvbiAoYWRhcHRlck5hbWUsIGF0dHJpYnV0ZSwgcnVsZU5hbWUpIHsKICAgICAgICAvLy8gPHN1bW1hcnk+QWRkcyBhIG5ldyBhZGFwdGVyIHRvIGNvbnZlcnQgdW5vYnRydXNpdmUgSFRNTCBpbnRvIGEgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24sIHdoZXJlCiAgICAgICAgLy8vIHRoZSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiBydWxlIGhhcyBhIHNpbmdsZSB2YWx1ZS48L3N1bW1hcnk+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJhZGFwdGVyTmFtZSIgdHlwZT0iU3RyaW5nIj5UaGUgbmFtZSBvZiB0aGUgYWRhcHRlciB0byBiZSBhZGRlZC4gVGhpcyBtYXRjaGVzIHRoZSBuYW1lIHVzZWQKICAgICAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUod2hlcmUgbm5ubiBpcyB0aGUgYWRhcHRlciBuYW1lKS48L3BhcmFtPgogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iYXR0cmlidXRlIiB0eXBlPSJTdHJpbmciPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIEhUTUwgYXR0cmlidXRlIHRoYXQgY29udGFpbnMgdGhlIHZhbHVlLgogICAgICAgIC8vLyBUaGUgZGVmYXVsdCBpcyAidmFsIi48L3BhcmFtPgogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0icnVsZU5hbWUiIHR5cGU9IlN0cmluZyIgb3B0aW9uYWw9InRydWUiPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIGpRdWVyeSBWYWxpZGF0ZSBydWxlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2YWx1ZQogICAgICAgIC8vLyBvZiBhZGFwdGVyTmFtZSB3aWxsIGJlIHVzZWQgaW5zdGVhZC48L3BhcmFtPgogICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPSJqUXVlcnkudmFsaWRhdG9yLnVub2J0cnVzaXZlLmFkYXB0ZXJzIiAvPgogICAgICAgIHJldHVybiB0aGlzLmFkZChhZGFwdGVyTmFtZSwgW2F0dHJpYnV0ZSB8fCAidmFsIl0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgcnVsZU5hbWUgfHwgYWRhcHRlck5hbWUsIG9wdGlvbnMucGFyYW1zW2F0dHJpYnV0ZV0pOwogICAgICAgIH0pOwogICAgfTsKCiAgICAkalF2YWwuYWRkTWV0aG9kKCJfX2R1bW15X18iLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQsIHBhcmFtcykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CgogICAgJGpRdmFsLmFkZE1ldGhvZCgicmVnZXgiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQsIHBhcmFtcykgewogICAgICAgIHZhciBtYXRjaDsKICAgICAgICBpZiAodGhpcy5vcHRpb25hbChlbGVtZW50KSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIG1hdGNoID0gbmV3IFJlZ0V4cChwYXJhbXMpLmV4ZWModmFsdWUpOwogICAgICAgIHJldHVybiAobWF0Y2ggJiYgKG1hdGNoLmluZGV4ID09PSAwKSAmJiAobWF0Y2hbMF0ubGVuZ3RoID09PSB2YWx1ZS5sZW5ndGgpKTsKICAgIH0pOwoKICAgICRqUXZhbC5hZGRNZXRob2QoIm5vbmFscGhhbWluIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBub25hbHBoYW1pbikgewogICAgICAgIHZhciBtYXRjaDsKICAgICAgICBpZiAobm9uYWxwaGFtaW4pIHsKICAgICAgICAgICAgbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFcvZyk7CiAgICAgICAgICAgIG1hdGNoID0gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IG5vbmFscGhhbWluOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICB9KTsKCiAgICBpZiAoJGpRdmFsLm1ldGhvZHMuZXh0ZW5zaW9uKSB7CiAgICAgICAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsKCJhY2NlcHQiLCAibWltdHlwZSIpOwogICAgICAgIGFkYXB0ZXJzLmFkZFNpbmdsZVZhbCgiZXh0ZW5zaW9uIiwgImV4dGVuc2lvbiIpOwogICAgfSBlbHNlIHsKICAgICAgICAvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgd2hlbiB0aGUgJ2V4dGVuc2lvbicgdmFsaWRhdGlvbiBtZXRob2QgZG9lcyBub3QgZXhpc3QsIHN1Y2ggYXMgd2l0aCB2ZXJzaW9ucwogICAgICAgIC8vIG9mIEpRdWVyeSBWYWxpZGF0aW9uIHBsdWdpbiBwcmlvciB0byAxLjEwLCB3ZSBzaG91bGQgdXNlIHRoZSAnYWNjZXB0JyBtZXRob2QgZm9yCiAgICAgICAgLy8gdmFsaWRhdGluZyB0aGUgZXh0ZW5zaW9uLCBhbmQgaWdub3JlIG1pbWUtdHlwZSB2YWxpZGF0aW9ucyBhcyB0aGV5IGFyZSBub3Qgc3VwcG9ydGVkLgogICAgICAgIGFkYXB0ZXJzLmFkZFNpbmdsZVZhbCgiZXh0ZW5zaW9uIiwgImV4dGVuc2lvbiIsICJhY2NlcHQiKTsKICAgIH0KCiAgICBhZGFwdGVycy5hZGRTaW5nbGVWYWwoInJlZ2V4IiwgInBhdHRlcm4iKTsKICAgIGFkYXB0ZXJzLmFkZEJvb2woImNyZWRpdGNhcmQiKS5hZGRCb29sKCJkYXRlIikuYWRkQm9vbCgiZGlnaXRzIikuYWRkQm9vbCgiZW1haWwiKS5hZGRCb29sKCJudW1iZXIiKS5hZGRCb29sKCJ1cmwiKTsKICAgIGFkYXB0ZXJzLmFkZE1pbk1heCgibGVuZ3RoIiwgIm1pbmxlbmd0aCIsICJtYXhsZW5ndGgiLCAicmFuZ2VsZW5ndGgiKS5hZGRNaW5NYXgoInJhbmdlIiwgIm1pbiIsICJtYXgiLCAicmFuZ2UiKTsKICAgIGFkYXB0ZXJzLmFkZE1pbk1heCgibWlubGVuZ3RoIiwgIm1pbmxlbmd0aCIpLmFkZE1pbk1heCgibWF4bGVuZ3RoIiwgIm1pbmxlbmd0aCIsICJtYXhsZW5ndGgiKTsKICAgIGFkYXB0ZXJzLmFkZCgiZXF1YWx0byIsIFsib3RoZXIiXSwgZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgICB2YXIgcHJlZml4ID0gZ2V0TW9kZWxQcmVmaXgob3B0aW9ucy5lbGVtZW50Lm5hbWUpLAogICAgICAgICAgICBvdGhlciA9IG9wdGlvbnMucGFyYW1zLm90aGVyLAogICAgICAgICAgICBmdWxsT3RoZXJOYW1lID0gYXBwZW5kTW9kZWxQcmVmaXgob3RoZXIsIHByZWZpeCksCiAgICAgICAgICAgIGVsZW1lbnQgPSAkKG9wdGlvbnMuZm9ybSkuZmluZCgiOmlucHV0IikuZmlsdGVyKCJbbmFtZT0nIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGZ1bGxPdGhlck5hbWUpICsgIiddIilbMF07CgogICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgImVxdWFsVG8iLCBlbGVtZW50KTsKICAgIH0pOwogICAgYWRhcHRlcnMuYWRkKCJyZXF1aXJlZCIsIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgLy8galF1ZXJ5IFZhbGlkYXRlIGVxdWF0ZXMgInJlcXVpcmVkIiB3aXRoICJtYW5kYXRvcnkiIGZvciBjaGVja2JveCBlbGVtZW50cwogICAgICAgIGlmIChvcHRpb25zLmVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSAiSU5QVVQiIHx8IG9wdGlvbnMuZWxlbWVudC50eXBlLnRvVXBwZXJDYXNlKCkgIT09ICJDSEVDS0JPWCIpIHsKICAgICAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCAicmVxdWlyZWQiLCB0cnVlKTsKICAgICAgICB9CiAgICB9KTsKICAgIGFkYXB0ZXJzLmFkZCgicmVtb3RlIiwgWyJ1cmwiLCAidHlwZSIsICJhZGRpdGlvbmFsZmllbGRzIl0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgdmFyIHZhbHVlID0gewogICAgICAgICAgICB1cmw6IG9wdGlvbnMucGFyYW1zLnVybCwKICAgICAgICAgICAgdHlwZTogb3B0aW9ucy5wYXJhbXMudHlwZSB8fCAiR0VUIiwKICAgICAgICAgICAgZGF0YToge30KICAgICAgICB9LAogICAgICAgICAgICBwcmVmaXggPSBnZXRNb2RlbFByZWZpeChvcHRpb25zLmVsZW1lbnQubmFtZSk7CgogICAgICAgICQuZWFjaChzcGxpdEFuZFRyaW0ob3B0aW9ucy5wYXJhbXMuYWRkaXRpb25hbGZpZWxkcyB8fCBvcHRpb25zLmVsZW1lbnQubmFtZSksIGZ1bmN0aW9uIChpLCBmaWVsZE5hbWUpIHsKICAgICAgICAgICAgdmFyIHBhcmFtTmFtZSA9IGFwcGVuZE1vZGVsUHJlZml4KGZpZWxkTmFtZSwgcHJlZml4KTsKICAgICAgICAgICAgdmFsdWUuZGF0YVtwYXJhbU5hbWVdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gJChvcHRpb25zLmZvcm0pLmZpbmQoIjppbnB1dCIpLmZpbHRlcigiW25hbWU9JyIgKyBlc2NhcGVBdHRyaWJ1dGVWYWx1ZShwYXJhbU5hbWUpICsgIiddIik7CiAgICAgICAgICAgICAgICAvLyBGb3IgY2hlY2tib3hlcyBhbmQgcmFkaW8gYnV0dG9ucywgb25seSBwaWNrIHVwIHZhbHVlcyBmcm9tIGNoZWNrZWQgZmllbGRzLgogICAgICAgICAgICAgICAgaWYgKGZpZWxkLmlzKCI6Y2hlY2tib3giKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZC5maWx0ZXIoIjpjaGVja2VkIikudmFsKCkgfHwgZmllbGQuZmlsdGVyKCI6aGlkZGVuIikudmFsKCkgfHwgJyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChmaWVsZC5pcygiOnJhZGlvIikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGQuZmlsdGVyKCI6Y2hlY2tlZCIpLnZhbCgpIHx8ICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnZhbCgpOwogICAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsICJyZW1vdGUiLCB2YWx1ZSk7CiAgICB9KTsKICAgIGFkYXB0ZXJzLmFkZCgicGFzc3dvcmQiLCBbIm1pbiIsICJub25hbHBoYW1pbiIsICJyZWdleCJdLCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICAgIGlmIChvcHRpb25zLnBhcmFtcy5taW4pIHsKICAgICAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCAibWlubGVuZ3RoIiwgb3B0aW9ucy5wYXJhbXMubWluKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbnMucGFyYW1zLm5vbmFscGhhbWluKSB7CiAgICAgICAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgIm5vbmFscGhhbWluIiwgb3B0aW9ucy5wYXJhbXMubm9uYWxwaGFtaW4pOwogICAgICAgIH0KICAgICAgICBpZiAob3B0aW9ucy5wYXJhbXMucmVnZXgpIHsKICAgICAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCAicmVnZXgiLCBvcHRpb25zLnBhcmFtcy5yZWdleCk7CiAgICAgICAgfQogICAgfSk7CgogICAgJChmdW5jdGlvbiAoKSB7CiAgICAgICAgJGpRdmFsLnVub2J0cnVzaXZlLnBhcnNlKGRvY3VtZW50KTsKICAgIH0pOwoKICAgIHJldHVybiAkalF2YWwudW5vYnRydXNpdmU7Cn0pKTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 19157
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "ba3f86a2-4a1c-4d78-b63d-91c2779c1b5e"
  Hint: __Sortorder
  Value: 500
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: "de-DE"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
- Language: "fr-FR"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
- Language: "ja-JP"
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171120T053117Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\admin
